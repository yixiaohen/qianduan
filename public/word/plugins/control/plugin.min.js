/** Version: 5.7.0 (TBD)
 */
!function(){"use strict";var o,a,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils").DOM,u=function(t,e){return t&&t.hasAttribute(e)?t.getAttribute(e):""},n=(o="object",function(t){return n=typeof(e=t),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===o;var e,n}),l=Object.prototype.hasOwnProperty,s=(a=function(t,e){return n(t)&&n(e)?s(t,e):e},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<t.length;o++){var i=t[o];for(var r in i)l.call(i,r)&&(n[r]=a(n[r],i[r]))}return n}),p=tinymce.util.Tools.resolve("tinymce.util.Promise"),d=function(t){var e,n,o,i,r,a=(e=t.selection.getNode())&&"SELECT"!==e.nodeName&&"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName&&(e.children.length&&(e=e.children[e.children.length-1]),"SELECT"!==e.nodeName&&"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName)?null:e;return(t.selection.control=a)?(n=a,o=c.styles.parse(u(n,"style")),i=o.width?o.width:"",r=o.height?o.height:"","SELECT"===n.tagName?{style:{width:i,height:r},option:n.innerHTML.replace(/<\/option><option>/g,",").replace("<option>","").replace("</option>","")}:"TEXTAREA"===n.tagName?{style:{width:i,height:r},option:n.innerHTML}:"INPUT"===n.tagName?{style:{width:i,height:r},option:u(n,"value")}:void 0):{style:{width:"",height:""},option:""}},y=function(t){return{style:{width:t.style.width,height:t.style.height},option:t.option}},e=function(i,t){var r,a={type:t,onSubmit:(r=i,function(o){return function(t){var e=s(y(o.control),t.getData()),n=r.selection.control;n.style&&(n.style.width=e.style.width,n.style.height=e.style.height),"SELECT"===n.tagName?""===e.option.trim()?n.innerHTML="":n.innerHTML="<option>"+e.option.replace(/,/g,"</option><option>")+"</option>":"TEXTAREA"===n.tagName?n.innerHTML=e.option:"INPUT"===n.tagName&&n.setAttribute("value",e.option),t.close()}})};return{open:function(){var e,t,n,o;t=i,n=new p(function(t){t()}),o=d(t),n.then(function(){return{control:o}}).then((e=a,function(t){return{title:e.type,size:"normal",body:"select"!==e.type?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[{name:"style",type:"sizeinput",constrain:!1},{name:"option",type:"input",label:"Value"}]}]}:{type:"tabpanel",tabs:[{title:"General",name:"general",items:[{name:"style",type:"sizeinput",constrain:!0},{name:"option",type:"input",label:"Option"}]}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:y(t.control),onSubmit:e.onSubmit(t)}})).then(i.windowManager.open)}}},i=function(t){return{select:function(){t.insertContent(t.dom.createHTML("select",{name:"h"}))},input:function(){t.insertContent(t.dom.createHTML("input",{name:"h",type:"text"}))},textarea:function(){t.insertContent('<textarea name="h"></textarea>')},checkbox:function(){t.insertContent(t.dom.createHTML("input",{name:"h",type:"checkbox"}))},radio:function(){t.insertContent(t.dom.createHTML("input",{name:"h",type:"radio"}))}}},r=function(t){t.ui.registry.addMenuButton("control",{icon:"control",tooltip:"Control",fetch:function(t){return t("selectInsert inputInsert textareaInsert checkboxInsert radioInsert")}}),t.ui.registry.addMenuItem("selectInsert",{icon:"select",text:"Select",onAction:i(t).select}),t.ui.registry.addMenuItem("select",{icon:"select",text:"Select",onAction:e(t,"select").open}),t.ui.registry.addContextMenu("select",{update:function(t){return"SELECT"===t.nodeName?["select"]:[]}}),t.ui.registry.addMenuItem("inputInsert",{icon:"input",text:"Input",onAction:i(t).input}),t.ui.registry.addMenuItem("input",{icon:"input",text:"Input",onAction:e(t,"input").open}),t.ui.registry.addMenuItem("textareaInsert",{icon:"textarea",text:"Textarea",onAction:i(t).textarea}),t.ui.registry.addMenuItem("textarea",{icon:"textarea",text:"Textarea",onAction:e(t,"textarea").open}),t.ui.registry.addContextMenu("textarea",{update:function(t){return"TEXTAREA"===t.nodeName?["textarea"]:[]}}),t.ui.registry.addMenuItem("checkboxInsert",{icon:"checkbox",text:"Checkbox",onAction:i(t).checkbox}),t.ui.registry.addMenuItem("checkbox",{icon:"checkbox",text:"Checkbox",onAction:e(t,"checkbox").open}),t.ui.registry.addMenuItem("radioInsert",{icon:"radio",text:"Radio",onAction:i(t).radio}),t.ui.registry.addMenuItem("radio",{icon:"radio",text:"Radio",onAction:e(t,"radio").open}),t.ui.registry.addContextMenu("input",{update:function(t){return"INPUT"===(o=t).nodeName&&"text"===c.getAttrib(o,"type")?["input"]:"INPUT"===(n=t).nodeName&&"checkbox"===c.getAttrib(n,"type")?["checkbox"]:"INPUT"===(e=t).nodeName&&"radio"===c.getAttrib(e,"type")?["radio"]:[];var e,n,o}})};t.add("control",function(t){r(t)})}();