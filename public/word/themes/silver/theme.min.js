/** Version: 5.7.0 (TBD)
 */
!function(){"use strict";var ut=function(){},i=function(n,o){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(o.apply(null,t))}},at=function(t){return function(){return t}},ct=function(t){return t};function y(o){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.concat(t);return o.apply(null,n)}}var x=function(e){return function(t){return!e(t)}},u=function(t){return function(){throw new Error(t)}},l=at(!1),w=at(!0),t=tinymce.util.Tools.resolve("tinymce.ThemeManager"),st=function(){return(st=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function k(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function S(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),r=0,e=0;e<n;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,r++)o[r]=i[u];return o}var e,n,o,r,c,a,s=function(){return f},f=(e=function(t){return t.isNone()},{fold:function(t,e){return t()},is:l,isSome:l,isNone:w,getOr:o=function(t){return t},getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:at(null),getOrUndefined:at(undefined),or:o,orThunk:n,map:s,each:ut,bind:s,exists:l,forall:w,filter:s,equals:e,equals_:e,toArray:function(){return[]},toString:at("none()")}),d=function(n){var t=at(n),e=function(){return r},o=function(t){return t(n)},r={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:w,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return d(t(n))},each:function(t){t(n)},bind:o,exists:o,forall:o,filter:function(t){return t(n)?r:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(l,function(t){return e(n,t)})}};return r},lt={some:d,none:s,from:function(t){return null===t||t===undefined?f:d(t)}},m=function(o){return function(t){return n=typeof(e=t),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===o;var e,n}},g=function(e){return function(t){return typeof t===e}},C=m("string"),O=m("object"),p=m("array"),_=g("boolean"),h=(r=undefined,function(t){return r===t}),v=function(t){return!(null===(e=t)||e===undefined);var e},T=g("function"),ft=g("number"),b=function(t,e){if(p(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},E=Array.prototype.slice,D=Array.prototype.indexOf,B=Array.prototype.push,F=function(t,e){return D.call(t,e)},A=function(t,e){return-1<F(t,e)},M=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return!0}return!1},I=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},V=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=E.call(t,o,o+e);n.push(r)}return n},R=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},dt=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},N=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(e(u,r)?n:o).push(u)}return{pass:n,fail:o}},H=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},P=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--){e(t[n],n)}}(t,function(t){n=e(n,t)}),n},z=function(t,e,n){return dt(t,function(t){n=e(n,t)}),n},L=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return lt.some(i);if(n(i,o))break}return lt.none()}(t,e,l)},j=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return lt.some(n)}return lt.none()},mt=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!p(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);B.apply(e,t[n])}return e},U=function(t,e){return mt(R(t,e))},W=function(t,e){for(var n=0,o=t.length;n<o;++n){if(!0!==e(t[n],n))return!1}return!0},G=function(t){var e=E.call(t,0);return e.reverse(),e},X=function(t,e){return H(t,function(t){return!A(e,t)})},Y=function(t,e){var n=E.call(t,0);return n.sort(e),n},q=function(t,e){return 0<=e&&e<t.length?lt.some(t[e]):lt.none()},K=function(t){return q(t,0)},J=function(t){return q(t,t.length-1)},$=T(Array.from)?Array.from:function(t){return E.call(t)},Q=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return lt.none()},Z=function(n){return{is:function(t){return n===t},isValue:w,isError:l,getOr:at(n),getOrThunk:at(n),getOrDie:at(n),or:function(t){return Z(n)},orThunk:function(t){return Z(n)},fold:function(t,e){return e(n)},map:function(t){return Z(t(n))},mapError:function(t){return Z(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOptional:function(){return lt.some(n)}}},tt=function(n){return{is:l,isValue:l,isError:w,getOr:ct,getOrThunk:function(t){return t()},getOrDie:function(){return u(String(n))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,e){return t(n)},map:function(t){return tt(n)},mapError:function(t){return tt(t(n))},each:ut,bind:function(t){return tt(n)},exists:l,forall:w,toOptional:lt.none}},gt={value:Z,error:tt,fromOption:function(t,e){return t.fold(function(){return tt(e)},Z)}};(a=c=c||{})[a.Error=0]="Error",a[a.Value=1]="Value";var et,nt,ot=function(t,e,n){return t.stype===c.Error?e(t.serror):n(t.svalue)},rt=function(t){return{stype:c.Value,svalue:t}},it=function(t){return{stype:c.Error,serror:t}},pt=function(t){return t.fold(it,rt)},ht=function(t){return ot(t,gt.error,gt.value)},vt=rt,bt=function(t){var e=[],n=[];return dt(t,function(t){ot(t,function(t){return n.push(t)},function(t){return e.push(t)})}),{values:e,errors:n}},yt=it,xt=function(t,e){return t.stype===c.Value?e(t.svalue):t},wt=function(t,e){return t.stype===c.Error?e(t.serror):t},kt=function(t,e){return t.stype===c.Value?{stype:c.Value,svalue:e(t.svalue)}:t},St=function(t,e){return t.stype===c.Error?{stype:c.Error,serror:e(t.serror)}:t},Ct=Object.keys,Ot=Object.hasOwnProperty,_t=function(t,e){for(var n=Ct(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},Tt=function(t,n){return Et(t,function(t,e){return{k:e,v:n(t,e)}})},Et=function(t,o){var r={};return _t(t,function(t,e){var n=o(t,e);r[n.k]=n.v}),r},Dt=function(t,e){var n,o,r,i,u={};return n=e,i=u,o=function(t,e){i[e]=t},r=ut,_t(t,function(t,e){(n(t,e)?o:r)(t,e)}),u},Bt=function(t,n){var o=[];return _t(t,function(t,e){o.push(n(t,e))}),o},Ft=function(t,e){for(var n=Ct(t),o=0,r=n.length;o<r;o++){var i=n[o],u=t[i];if(e(u,i,t))return lt.some(u)}return lt.none()},At=function(t){return Bt(t,function(t){return t})},Mt=function(t,e){return It(t,e)?lt.from(t[e]):lt.none()},It=function(t,e){return Ot.call(t,e)},Vt=function(t,e){return It(t,e)&&t[e]!==undefined&&null!==t[e]},Rt=function(u){if(!p(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return dt(u,function(t,o){var e=Ct(t);if(1!==e.length)throw new Error("one and only one name per case");var r=e[0],i=t[r];if(n[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!p(i))throw new Error("case arguments must be an array");a.push(r),n[r]=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.length;if(e!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+e);return{fold:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+t.length);return t[o].apply(null,n)},match:function(t){var e=Ct(t);if(a.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+e.join(","));if(!W(a,function(t){return A(e,t)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+a.join(", "));return t[r].apply(null,n)},log:function(t){console.log(t,{constructors:a,constructor:r,params:n})}}}}),n},Nt=Object.prototype.hasOwnProperty,Ht=function(u){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<t.length;o++){var r=t[o];for(var i in r)Nt.call(r,i)&&(n[i]=u(n[i],r[i]))}return n}},Pt=Ht(function(t,e){return O(t)&&O(e)?Pt(t,e):e}),zt=Ht(function(t,e){return e}),Lt=function(n){var o,r=!1;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r||(r=!0,o=n.apply(null,t)),o}},jt=Rt([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Ut=function(t){return jt.defaultedThunk(at(t))},Wt=jt.strict,Gt=jt.asOption,Xt=jt.defaultedThunk,Yt=(jt.asDefaultedOptionThunk,jt.mergeWithThunk),qt=(Rt([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,e){var n={};return n[t]=e,n}),Kt=function(t,e){return n=e,o={},_t(t,function(t,e){A(n,e)||(o[e]=t)}),o;var n,o},Jt=qt,$t=function(t){return e={},dt(t,function(t){e[t.key]=t.value}),e;var e},Qt=function(t,e){var n,o,r,i,u,a=(n=[],o=[],dt(t,function(t){t.fold(function(t){n.push(t)},function(t){o.push(t)})}),{errors:n,values:o});return 0<a.errors.length?(u=a.errors,gt.error(mt(u))):(i=e,0===(r=a.values).length?gt.value(i):gt.value(Pt(i,zt.apply(undefined,r))))},Zt=function(t){return i(yt,mt)(t)},te=function(t,e){var n,o,r=bt(t);return 0<r.errors.length?Zt(r.errors):(n=r.values,o=e,0<n.length?vt(Pt(o,zt.apply(undefined,n))):vt(o))},ee=function(t){var e=bt(t);return 0<e.errors.length?Zt(e.errors):vt(e.values)},ne=function(t){return O(t)&&100<Ct(t).length?" removed due to size":JSON.stringify(t,null,2)},oe=function(t,e){return yt([{path:t,getErrorInfo:e}])},re=Rt([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ie=function(n,o,r){return Mt(o,r).fold(function(){return t=r,e=o,oe(n,function(){return'Could not find valid *strict* value for "'+t+'" in '+ne(e)});var t,e},vt)},ue=function(t,e,n){var o=Mt(t,e).fold(function(){return n(t)},ct);return vt(o)},ae=function(a,c,t,s){return t.fold(function(r,n,t,o){var i=function(t){var e=o.extract(a.concat([r]),s,t);return kt(e,function(t){return qt(n,s(t))})},u=function(t){return t.fold(function(){var t=qt(n,s(lt.none()));return vt(t)},function(t){var e=o.extract(a.concat([r]),s,t);return kt(e,function(t){return qt(n,s(lt.some(t)))})})};return t.fold(function(){return xt(ie(a,c,r),i)},function(t){return xt(ue(c,r,t),i)},function(){return xt(vt(Mt(c,r)),u)},function(t){return xt((n=t,o=Mt(e=c,r).map(function(t){return!0===t?n(e):t}),vt(o)),u);var e,n,o},function(t){var e=t(c),n=kt(ue(c,r,at({})),function(t){return Pt(e,t)});return xt(n,i)})},function(t,e){var n=e(c);return vt(qt(t,s(n)))})},ce=function(o){return{extract:function(n,t,e){return wt(o(e,t),function(t){return e=t,oe(n,function(){return e});var e})},toString:function(){return"val"}}},se=function(t){var u=le(t),a=P(t,function(e,t){return t.fold(function(t){return Pt(e,Jt(t,!0))},at(e))},{});return{extract:function(t,e,n){var o,r=_(n)?[]:Ct(Dt(n,function(t){return t!==undefined&&null!==t})),i=H(r,function(t){return!Vt(a,t)});return 0===i.length?u.extract(t,e,n):(o=i,oe(t,function(){return"There are unsupported fields: ["+o.join(", ")+"] specified"}))},toString:u.toString}},le=function(a){return{extract:function(t,e,n){return o=t,r=n,i=e,u=R(a,function(t){return ae(o,r,t,i)}),te(u,{});var o,r,i,u},toString:function(){return"obj{\n"+R(a,function(t){return t.fold(function(t,e,n,o){return t+" -> "+o.toString()},function(t,e){return"state("+t+")"})}).join("\n")+"}"}}},fe=function(r){return{extract:function(n,o,t){var e=R(t,function(t,e){return r.extract(n.concat(["["+e+"]"]),o,t)});return ee(e)},toString:function(){return"array("+r.toString()+")"}}},de=function(a){return{extract:function(t,e,n){for(var o=[],r=0,i=a;r<i.length;r++){var u=i[r].extract(t,e,n);if(u.stype===c.Value)return u;o.push(u)}return ee(o)},toString:function(){return"oneOf("+R(a,function(t){return t.toString()}).join(", ")+")"}}},me=function(a,c){return{extract:function(n,o,r){var t,e,i=Ct(r),u=(t=n,e=i,fe(ce(a)).extract(t,ct,e));return xt(u,function(t){var e=R(t,function(t){return re.field(t,t,Wt(),c)});return le(e).extract(n,o,r)})},toString:function(){return"setOf("+c.toString()+")"}}},ge=at(ce(vt)),pe=i(fe,le),he=re.state,ve=re.field,be=function(n,e,o,r,i){return Mt(r,i).fold(function(){return t=r,e=i,oe(n,function(){return'The chosen schema: "'+e+'" did not exist in branches: '+ne(t)});var t,e},function(t){return t.extract(n.concat(["branch: "+i]),e,o)})},ye=function(r,i){return{extract:function(e,n,o){return Mt(o,r).fold(function(){return t=r,oe(e,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(t){return be(e,n,o,i,t)})},toString:function(){return"chooseOn("+r+"). Possible values: "+Ct(i)}}},xe=ce(vt),we=function(t){return pe(t)},ke=function(o){return{extract:function(t,e,n){return o().extract(t,e,n)},toString:function(){return o().toString()}}},Se=function(e){return ce(function(t){return e(t).fold(yt,vt)})},Ce=function(e,t){return me(function(t){return pt(e(t))},t)},Oe=function(t,e,n){return ht((o=t,r=ct,i=n,u=e.extract([o],r,i),St(u,function(t){return{input:i,errors:t}})));var o,r,i,u},_e=function(t){return t.fold(function(t){throw new Error(Ee(t))},ct)},Te=function(t,e,n){return _e(Oe(t,e,n))},Ee=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,R(n,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}).join("\n"))+"\n\nInput object: "+ne(t.input);var e,n},De=ye,Be=function(t,e){return ye(t,Tt(e,le))},Fe=at(xe),Ae=function(n,o){return ce(function(t){var e=typeof t;return n(t)?vt(t):yt("Expected type: "+o+" but got: "+e)})},Me=Ae(ft,"number"),Ie=Ae(C,"string"),Ve=Ae(_,"boolean"),Re=Ae(T,"function"),Ne=function(e){var t=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(function(t){return Ne(e[t])});case"Map":return t(e.keys(),Ne)&&t(e.values(),Ne);case"Set":return t(e.keys(),Ne);default:return!1}},He=ce(function(t){return Ne(t)?vt(t):yt("Expected value to be acceptable for sending via postMessage")}),Pe=function(e){return Se(function(t){return A(e,t)?gt.value(t):gt.error('Unsupported value: "'+t+'", choose one of "'+e.join(", ")+'".')})},ze=function(t){return ve(t,t,Wt(),ge())},Le=function(t,e){return ve(t,t,Wt(),e)},je=function(t){return Le(t,Ie)},Ue=function(t,e){return ve(t,t,Wt(),Pe(e))},We=function(t){return Le(t,Re)},Ge=function(t,e){return ve(t,t,Wt(),le(e))},Xe=function(t,e){return ve(t,t,Wt(),pe(e))},Ye=function(t,e){return ve(t,t,Wt(),fe(e))},qe=function(t){return ve(t,t,Gt(),ge())},Ke=function(t,e){return ve(t,t,Gt(),e)},Je=function(t){return Ke(t,Me)},$e=function(t){return Ke(t,Ie)},Qe=function(t){return Ke(t,Re)},Ze=function(t,e){return Ke(t,le(e))},tn=function(t,e){return ve(t,t,Ut(e),ge())},en=function(t,e,n){return ve(t,t,Ut(e),n)},nn=function(t,e){return en(t,e,Me)},on=function(t,e){return en(t,e,Ie)},rn=function(t,e,n){return en(t,e,Pe(n))},un=function(t,e){return en(t,e,Ve)},an=function(t,e){return en(t,e,Re)},cn=function(t,e,n){return en(t,e,fe(n))},sn=function(t,e,n){return en(t,e,le(n))},ln=function(t,e){return he(t,e)},fn=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},dn=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:t}},mn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return dn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return dn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return dn(n)},fromDom:dn,fromPoint:function(t,e,n){return lt.from(t.dom.elementFromPoint(e,n)).map(dn)}},gn=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}return undefined}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return hn(o(1),o(2))},pn=function(){return hn(0,0)},hn=function(t,e){return{major:t,minor:e}},vn={nu:hn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?pn():gn(t,n)},unknown:pn},bn=function(t,e){var n=String(e).toLowerCase();return L(t,function(t){return t.search(n)})},yn=function(t,n){return bn(t,n).map(function(t){var e=vn.detect(t.versionRegexes,n);return{current:t.name,version:e}})},xn=function(t,n){return bn(t,n).map(function(t){var e=vn.detect(t.versionRegexes,n);return{current:t.name,version:e}})},wn=function(t,e){return-1!==t.indexOf(e)},kn=function(t,e){return o=e,r=(n=t).length-e.length,""===o||n.length>=o.length&&n.substr(r,r+o.length)===o;var n,o,r},Sn=(et=/^\s+|\s+$/g,function(t){return t.replace(et,"")}),Cn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,On=function(e){return function(t){return wn(t,e)}},_n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return wn(t,"edge/")&&wn(t,"chrome")&&wn(t,"safari")&&wn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Cn],search:function(t){return wn(t,"chrome")&&!wn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return wn(t,"msie")||wn(t,"trident")}},{name:"Opera",versionRegexes:[Cn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:On("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:On("firefox")},{name:"Safari",versionRegexes:[Cn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(wn(t,"safari")||wn(t,"mobile/"))&&wn(t,"applewebkit")}}],Tn=[{name:"Windows",search:On("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return wn(t,"iphone")||wn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:On("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:On("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:On("linux"),versionRegexes:[]},{name:"Solaris",search:On("sunos"),versionRegexes:[]},{name:"FreeBSD",search:On("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:On("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],En={browsers:at(_n),oses:at(Tn)},Dn="Firefox",Bn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o("Edge"),isChrome:o("Chrome"),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Dn),isSafari:o("Safari")}},Fn={unknown:function(){return Bn({current:undefined,version:vn.unknown()})},nu:Bn,edge:at("Edge"),chrome:at("Chrome"),ie:at("IE"),opera:at("Opera"),firefox:at(Dn),safari:at("Safari")},An="Windows",Mn="Android",In="Solaris",Vn="FreeBSD",Rn="ChromeOS",Nn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(An),isiOS:o("iOS"),isAndroid:o(Mn),isOSX:o("OSX"),isLinux:o("Linux"),isSolaris:o(In),isFreeBSD:o(Vn),isChromeOS:o(Rn)}},Hn={unknown:function(){return Nn({current:undefined,version:vn.unknown()})},nu:Nn,windows:at(An),ios:at("iOS"),android:at(Mn),linux:at("Linux"),osx:at("OSX"),solaris:at(In),freebsd:at(Vn),chromeos:at(Rn)},Pn=function(t,e){var n,o,r,i,u,a,c,s,l,f,d,m,g=En.browsers(),p=En.oses(),h=yn(g,t).fold(Fn.unknown,Fn.nu),v=xn(p,t).fold(Hn.unknown,Hn.nu);return{browser:h,os:v,deviceType:(o=h,r=t,i=e,u=(n=v).isiOS()&&!0===/ipad/i.test(r),a=n.isiOS()&&!u,c=n.isiOS()||n.isAndroid(),s=c||i("(pointer:coarse)"),l=u||!a&&c&&i("(min-device-width:768px)"),f=a||c&&!l,d=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(r),m=!f&&!l&&!d,{isiPad:at(u),isiPhone:at(a),isTablet:at(l),isPhone:at(f),isTouch:at(s),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:at(d),isDesktop:at(m)})}},zn=function(t){return window.matchMedia(t).matches},Ln=Lt(function(){return Pn(navigator.userAgent,zn)}),jn=function(){return Ln()},Un=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(o.matches!==undefined)return o.matches(e);if(o.msMatchesSelector!==undefined)return o.msMatchesSelector(e);if(o.webkitMatchesSelector!==undefined)return o.webkitMatchesSelector(e);if(o.mozMatchesSelector!==undefined)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Wn=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Gn=function(t,e){return t.dom===e.dom},Xn=function(t,e){return n=t.dom,o=e.dom,r=n,i=o,u=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(i)&u);var n,o,r,i,u},Yn=function(t,e){return jn().browser.isIE()?Xn(t,e):(n=e,o=t.dom,r=n.dom,o!==r&&o.contains(r));var n,o,r},qn=function(t){return T(t)?t:l},Kn=function(t,e,n){for(var o=t.dom,r=qn(n);o.parentNode;){o=o.parentNode;var i=mn.fromDom(o),u=e(i);if(u.isSome())return u;if(r(i))break}return lt.none()},Jn=function(t,e,n){var o=e(t),r=qn(n);return o.orThunk(function(){return r(t)?lt.none():Kn(t,e,r)})},$n=function(t,e){return Gn(t.element,e.event.target)},Qn=function(t){if(!Vt(t,"can")&&!Vt(t,"abort")&&!Vt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return Te("Extracting event.handler",se([tn("can",w),tn("abort",l),tn("run",ut)]),t)},Zn=function(n){var e,o,r,i,t=(o=function(t){return t.can},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return z(e,function(t,e){return t&&o(e).apply(undefined,n)},!0)}),u=(r=e=n,i=function(t){return t.abort},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return z(r,function(t,e){return t||i(e).apply(undefined,n)},!1)});return Qn({can:t,abort:u,run:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];dt(n,function(t){t.run.apply(undefined,e)})}})},to=at,eo=to("touchstart"),no=to("touchmove"),oo=to("touchend"),ro=to("touchcancel"),io=to("mousedown"),uo=to("mousemove"),ao=to("mouseout"),co=to("mouseup"),so=to("mouseover"),lo=to("focusin"),fo=to("focusout"),mo=to("keydown"),go=to("keyup"),po=to("input"),ho=to("change"),vo=to("click"),bo=to("transitionend"),yo=to("selectstart"),xo=function(t){return at("alloy."+t)},wo={tap:xo("tap")},ko=xo("focus"),So=xo("blur.post"),Co=xo("paste.post"),Oo=xo("receive"),_o=xo("execute"),To=xo("focus.item"),Eo=wo.tap,Do=xo("longpress"),Bo=xo("sandbox.close"),Fo=xo("typeahead.cancel"),Ao=xo("system.init"),Mo=xo("system.touchmove"),Io=xo("system.touchend"),Vo=xo("system.scroll"),Ro=xo("system.resize"),No=xo("system.attached"),Ho=xo("system.detached"),Po=xo("system.dismissRequested"),zo=xo("system.repositionRequested"),Lo=xo("focusmanager.shifted"),jo=xo("slotcontainer.visibility"),Uo=xo("change.tab"),Wo=xo("dismiss.tab"),Go=xo("highlight"),Xo=xo("dehighlight"),Yo=function(t,e){$o(t,t.element,e,{})},qo=function(t,e,n){$o(t,t.element,e,n)},Ko=function(t){Yo(t,_o())},Jo=function(t,e,n){$o(t,e,n,{})},$o=function(t,e,n,o){var r=st({target:e},o);t.getSystem().triggerEvent(n,e,r)},Qo=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)},Zo=$t,tr=function(t,e){return{key:t,value:Qn({abort:e})}},er=function(t){return{key:t,value:Qn({run:function(t,e){e.event.prevent()}})}},nr=function(t,e){return{key:t,value:Qn({run:e})}},or=function(t,n,o){return{key:t,value:Qn({run:function(t,e){n.apply(undefined,[t,e].concat(o))}})}},rr=function(t){return function(n){return{key:t,value:Qn({run:function(t,e){$n(t,e)&&n(t,e)}})}}},ir=function(t,e,n){var o,r,i=e.partUids[n];return r=i,nr(o=t,function(t,e){t.getSystem().getByUid(r).each(function(t){Qo(t,t.element,o,e)})})},ur=function(t,r){return nr(t,function(e,t){var n=t.event,o=e.getSystem().getByDom(n.target).fold(function(){return Jn(n.target,function(t){return e.getSystem().getByDom(t).toOptional()},l).getOr(e)},function(t){return t});r(e,o,t)})},ar=function(t){return nr(t,function(t,e){e.cut()})},cr=function(t,e){return rr(t)(e)},sr=rr(No()),lr=rr(Ho()),fr=rr(Ao()),dr=(nt=_o(),function(t){return nr(nt,t)}),mr=("undefined"!=typeof window||Function("return this;")(),function(t){return t.dom.nodeName.toLowerCase()}),gr=function(e){return function(t){return t.dom.nodeType===e}},pr=gr(1),hr=gr(3),vr=gr(9),br=gr(11),yr=function(t){return mn.fromDom(t.dom.ownerDocument)},xr=function(t){return vr(t)?t:yr(t)},wr=function(t){return mn.fromDom(xr(t).dom.documentElement)},kr=function(t){return mn.fromDom(xr(t).dom.defaultView)},Sr=function(t){return lt.from(t.dom.parentNode).map(mn.fromDom)},Cr=Sr,Or=function(t){return lt.from(t.dom.offsetParent).map(mn.fromDom)},_r=function(t){return R(t.dom.childNodes,mn.fromDom)},Tr=function(t,e){var n=t.dom.childNodes;return lt.from(n[e]).map(mn.fromDom)},Er=function(e,n){Sr(e).each(function(t){t.dom.insertBefore(n.dom,e.dom)})},Dr=function(t,e){var n;(n=t,lt.from(n.dom.nextSibling).map(mn.fromDom)).fold(function(){Sr(t).each(function(t){Fr(t,e)})},function(t){Er(t,e)})},Br=function(e,n){Tr(e,0).fold(function(){Fr(e,n)},function(t){e.dom.insertBefore(n.dom,t.dom)})},Fr=function(t,e){t.dom.appendChild(e.dom)},Ar=function(e,t){dt(t,function(t){Fr(e,t)})},Mr=function(t){t.dom.textContent="",dt(_r(t),function(t){Ir(t)})},Ir=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Vr=function(t){var e,n=_r(t);0<n.length&&(e=t,dt(n,function(t){Er(e,t)})),Ir(t)},Rr=function(t){return t.dom.innerHTML},Nr=function(t,e){var n,o,r=yr(t).dom,i=mn.fromDom(r.createDocumentFragment()),u=(n=e,(o=(r||document).createElement("div")).innerHTML=n,_r(mn.fromDom(o)));Ar(i,u),Mr(t),Fr(t,i)},Hr=function(t,e,n){if(!(C(n)||_(n)||ft(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Pr=function(t,e,n){Hr(t.dom,e,n)},zr=function(t,e){var n=t.dom.getAttribute(e);return null===n?undefined:n},Lr=function(t,e){return lt.from(zr(t,e))},jr=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Ur=function(t,e){t.dom.removeAttribute(e)},Wr=function(t){return e=t,n=!1,mn.fromDom(e.dom.cloneNode(n));var e,n},Gr=function(t){var e,n,o,r=Wr(t);return e=r,n=mn.fromTag("div"),o=mn.fromDom(e.dom.cloneNode(!0)),Fr(n,o),Rr(n)},Xr=Zo([{key:ko(),value:Qn({can:function(t,e){var n,o,r=e.event,i=r.originator,u=r.target;return o=u,!(Gn(n=i,t.element)&&!Gn(n,o))||(console.warn(ko()+" did not get interpreted by the desired target. \nOriginator: "+Gr(i)+"\nTarget: "+Gr(u)+"\nCheck the "+ko()+" event handlers"),!1)}})}]),Yr=/* */Object.freeze({__proto__:null,events:Xr}),qr=0,Kr=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++qr+String(e)},Jr=at("alloy-id-"),$r=at("data-alloy-id"),Qr=Jr(),Zr=$r(),ti=function(t,e){Object.defineProperty(t.dom,Zr,{value:e,writable:!0})},ei=function(t){var e=pr(t)?t.dom[Zr]:null;return lt.from(e)},ni=Kr,oi=ct,ri=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+(e?"\n"+Gr(e().element)+" is not in context.":""))}};return{debugInfo:at("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:l}},ii=ri(),ui=function(t){return R(t,function(t){return kn(t,"/*")?t.substring(0,t.length-"/*".length):t})},ai=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:ui(i)}},t},ci=Kr("alloy-premade"),si=function(t){return Jt(ci,t)},li=function(o){return t=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.apply(void 0,S([t.getApis(),t],e))},e=o.toString(),n=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,n-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ui(i.slice(1))}},t;var t,e,n,r,i},fi={init:function(){return di({readState:function(){return"No State required"}})}},di=function(t){return t},mi=function(t,r){var i={};return _t(t,function(t,o){_t(t,function(t,e){var n=Mt(i,e).getOr([]);i[e]=n.concat([r(o,t)])})}),i},gi=function(t){return{classes:t.classes!==undefined?t.classes:[],attributes:t.attributes!==undefined?t.attributes:{},styles:t.styles!==undefined?t.styles:{}}},pi=function(t){return t.cHandler},hi=function(t,e){return{name:t,handler:e}},vi=function(t,e,n){var o,r,i=st(st({},n),(o=t,r={},dt(e,function(t){r[t.name()]=t.handlers(o)}),r));return mi(i,hi)},bi=function(t){var e,i=T(e=t)?{can:w,abort:l,run:e}:e;return function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=[t,e].concat(n);i.abort.apply(undefined,r)?e.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}},yi=function(t,e,n){var o,r,i=e[n];return i?function(u,a,t,c){try{var e=Y(t,function(t,e){var n=t[a],o=e[a],r=c.indexOf(n),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+u+" does not have an entry for "+n+".\nOrder specified: "+JSON.stringify(c,null,2));if(-1===i)throw new Error("The ordering for "+u+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(c,null,2));return r<i?-1:i<r?1:0});return gt.value(e)}catch(n){return gt.error([n])}}("Event: "+n,"name",t,i).map(function(t){var e=R(t,function(t){return t.handler});return Zn(e)}):(o=n,r=t,gt.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(R(r,function(t){return t.name}),null,2)]))},xi=function(t,i){var e=Bt(t,function(o,r){return(1===o.length?gt.value(o[0].handler):yi(o,i,r)).map(function(t){var e=bi(t),n=1<o.length?H(i[r],function(e){return M(o,function(t){return t.name===e})}).join(" > "):o[0].name;return Jt(r,{handler:e,purpose:n})})});return Qt(e,{})},wi="alloy.base.behaviour",ki=function(t){var e,n;return Oe("custom.definition",le([ve("dom","dom",Wt(),le([ze("tag"),tn("styles",{}),tn("classes",[]),tn("attributes",{}),qe("value"),qe("innerHtml")])),ze("components"),ze("uid"),tn("events",{}),tn("apis",{}),ve("eventOrder","eventOrder",((e={})[_o()]=["disabling",wi,"toggling","typeaheadevents"],e[ko()]=[wi,"focusing","keying"],e[Ao()]=[wi,"disabling","toggling","representing"],e[po()]=[wi,"representing","streaming","invalidating"],e[Ho()]=[wi,"representing","item-events","tooltipping"],e[io()]=["focusing",wi,"item-type-events"],e[eo()]=["focusing",wi,"item-type-events"],e[so()]=["item-type-events","tooltipping"],e[Oo()]=["receiving","reflecting","tooltipping"],n=e,jt.mergeWithThunk(at(n))),Fe()),qe("domModification")]),t)},Si=function(t,e){var n=zr(t,e);return n===undefined||""===n?[]:n.split(" ")},Ci=function(t){return t.dom.classList!==undefined},Oi=function(t,e){return r=e,i=Si(n=t,o="class").concat([r]),Pr(n,o,i.join(" ")),!0;var n,o,r,i},_i=function(t,e){return r=e,0<(i=H(Si(n=t,o="class"),function(t){return t!==r})).length?Pr(n,o,i.join(" ")):Ur(n,o),!1;var n,o,r,i},Ti=function(t,e){Ci(t)?t.dom.classList.add(e):Oi(t,e)},Ei=function(t){0===(Ci(t)?t.dom.classList:Si(t,"class")).length&&Ur(t,"class")},Di=function(t,e){Ci(t)?t.dom.classList.remove(e):_i(t,e),Ei(t)},Bi=function(t,e){return Ci(t)&&t.dom.classList.contains(e)},Fi=function(e,t){dt(t,function(t){Ti(e,t)})},Ai=function(e,t){dt(t,function(t){Di(e,t)})},Mi=function(t){return t.style!==undefined&&T(t.style.getPropertyValue)},Ii=function(t){return br(t)},Vi=T(Element.prototype.attachShadow)&&T(Node.prototype.getRootNode),Ri=at(Vi),Ni=Vi?function(t){return mn.fromDom(t.dom.getRootNode())}:xr,Hi=function(t){return Ii(t)?t:mn.fromDom(xr(t).dom.body)},Pi=function(t){var e=Ni(t);return Ii(e)?lt.some(e):lt.none()},zi=function(t){return mn.fromDom(t.dom.host)},Li=function(t){return v(t.dom.shadowRoot)},ji=function(t){var e=hr(t)?t.dom.parentNode:t.dom;if(e===undefined||null===e||null===e.ownerDocument)return!1;var n,o,r=e.ownerDocument;return Pi(mn.fromDom(e)).fold(function(){return r.body.contains(e)},(n=ji,o=zi,function(t){return n(o(t))}))},Ui=function(){return Wi(mn.fromDom(document))},Wi=function(t){var e=t.dom.body;if(null===e||e===undefined)throw new Error("Body is not available yet");return mn.fromDom(e)},Gi=function(t,e,n){if(!C(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Mi(t)&&t.style.setProperty(e,n)},Xi=function(t,e){Mi(t)&&t.style.removeProperty(e)},Yi=function(t,e,n){var o=t.dom;Gi(o,e,n)},qi=function(t,e){var n=t.dom;_t(e,function(t,e){Gi(n,e,t)})},Ki=function(t,e){var n=t.dom;_t(e,function(t,e){t.fold(function(){Xi(n,e)},function(t){Gi(n,e,t)})})},Ji=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||ji(t)?o:$i(n,e)},$i=function(t,e){return Mi(t)?t.style.getPropertyValue(e):""},Qi=function(t,e){var n=t.dom,o=$i(n,e);return lt.from(o).filter(function(t){return 0<t.length})},Zi=function(t,e,n){var o=mn.fromTag(t);return Yi(o,e,n),Qi(o,e).isSome()},tu=function(t,e){var n=t.dom;Xi(n,e),Lr(t,"style").map(Sn).is("")&&Ur(t,"style")},eu=function(t){return t.dom.offsetWidth},nu=function(t){return t.dom.value},ou=function(t,e){if(e===undefined)throw new Error("Value.set was undefined");t.dom.value=e},ru=function(t){var e,n,o,r=mn.fromTag(t.tag);e=r,n=t.attributes,o=e.dom,_t(n,function(t,e){""!==t&&Hr(o,e,t)}),Fi(r,t.classes),qi(r,t.styles),t.innerHtml.each(function(t){return Nr(r,t)});var i=t.domChildren;return Ar(r,i),t.value.each(function(t){ou(r,t)}),t.uid,ti(r,t.uid),r},iu=function(t,e){return n=t,r=R(o=e,function(t){return Ze(t.name(),[ze("config"),tn("state",fi)])}),i=Oe("component.behaviours",le(r),n.behaviours).fold(function(t){throw new Error(Ee(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))},function(t){return t}),{list:o,data:Tt(i,function(t){var e=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return function(){return e}})};var n,o,r,i},uu=function(t){var e,n,o=(e=Mt(t,"behaviours").getOr({}),n=H(Ct(e),function(t){return e[t]!==undefined}),R(n,function(t){return e[t].me}));return iu(t,o)},au=function(t,e,n){var o,r,i,u=st(st({},(o=t).dom),{uid:o.uid,domChildren:R(o.components,function(t){return t.element})}),a=t.domModification.fold(function(){return gi({})},gi),c={"alloy.base.modification":a},s=0<e.length?function(e,t,n,o){var r=st({},t);dt(n,function(t){r[t.name()]=t.exhibit(e,o)});var i=mi(r,function(t,e){return{name:t,modification:e}}),u=function(t){return P(t,function(t,e){return st(st({},e.modification),t)},{})},a=P(i.classes,function(t,e){return e.modification.concat(t)},[]),c=u(i.attributes),s=u(i.styles);return gi({classes:a,attributes:c,styles:s})}(n,c,e,u):a;return i=s,st(st({},r=u),{attributes:st(st({},r.attributes),i.attributes),styles:st(st({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},cu=function(t,e,n){var o,r,i,u={"alloy.base.behaviour":t.events};return o=n,r=t.eventOrder,i=vi(o,e,u),xi(i,r).getOrDie()},su=function(t){var e,n,o,r,i,u,a,c,s,l,f,d,m,g=oi(t),p=g.events,h=k(g,["events"]),v=(e=Mt(h,"components").getOr([]),R(e,mu)),b=st(st({},h),{events:st(st({},Yr),p),components:v});return gt.value((o=function(){return m},r=fn(ii),i=_e(ki(n=b)),u=uu(n),a=u.list,c=u.data,s=au(i,a,c),l=ru(s),f=cu(i,a,c),d=fn(i.components),m={getSystem:r.get,config:function(t){var e=c;return(T(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(t){return T(c[t.name()])},spec:n,readState:function(t){return c[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return i.apis},connect:function(t){r.set(t)},disconnect:function(){r.set(ri(o))},element:l,syncComponents:function(){var t=_r(l),e=U(t,function(t){return r.get().getByDom(t).fold(function(){return[]},function(t){return[t]})});d.set(e)},components:d.get,events:f}))},lu=function(t){var e=mn.fromText(t);return fu({element:e})},fu=function(t){var e=Te("external.component",se([ze("element"),qe("uid")]),t),n=fn(ri());e.uid.each(function(t){ti(e.element,t)});var o={getSystem:n.get,config:lt.none,hasConfigured:l,connect:function(t){n.set(t)},disconnect:function(){n.set(ri(function(){return o}))},getApis:function(){return{}},element:e.element,spec:t,readState:at("No state"),syncComponents:ut,components:at([]),events:{}};return si(o)},du=ni,mu=function(e){return Mt(e,ci).fold(function(){var t=e.hasOwnProperty("uid")?e:st({uid:du("")},e);return su(t).getOrDie()},function(t){return t})},gu=si,pu=function(o,r){var t=function(t){var e=r(t);if(e<=0||null===e){var n=Ji(t,o);return parseFloat(n)||0}return e},i=function(r,t){return z(t,function(t,e){var n=Ji(r,e),o=n===undefined?0:parseInt(n,10);return isNaN(o)?t:t+o},0)};return{set:function(t,e){if(!ft(e)&&!e.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+e);var n=t.dom;Mi(n)&&(n.style[o]=e+"px")},get:t,getOuter:t,aggregate:i,max:function(t,e,n){var o=i(t,n);return o<e?e-o:0}}},hu=pu("height",function(t){var e=t.dom;return ji(t)?e.getBoundingClientRect().height:e.offsetHeight}),vu=function(t){return hu.get(t)},bu=function(t){return hu.getOuter(t)},yu=function(n,o){return{left:n,top:o,translate:function(t,e){return yu(n+t,o+e)}}},xu=yu,wu=function(t,e){return t!==undefined?t:e!==undefined?e:0},ku=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return xu(n.offsetLeft,n.offsetTop);var i=wu(null==o?void 0:o.pageYOffset,r.scrollTop),u=wu(null==o?void 0:o.pageXOffset,r.scrollLeft),a=wu(r.clientTop,n.clientTop),c=wu(r.clientLeft,n.clientLeft);return Su(t).translate(u-c,i-a)},Su=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?xu(o.offsetLeft,o.offsetTop):ji(t)?(e=n.getBoundingClientRect(),xu(e.left,e.top)):xu(0,0)},Cu=pu("width",function(t){return t.dom.offsetWidth}),Ou=function(t){return Cu.get(t)},_u=function(t){return Cu.getOuter(t)},Tu=function(t){var e=mn.fromDom(function(t){if(Ri()&&v(t.target)){var e=mn.fromDom(t.target);if(pr(e)&&Li(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return K(n)}}return lt.from(t.target)}(t).getOr(t.target)),n=function(){return t.stopPropagation()},o=function(){return t.preventDefault()},r=i(o,n);return{target:e,x:t.clientX,y:t.clientY,stop:n,prevent:o,kill:r,raw:t}},Eu=function(t,e,n,o,r){var i,u,a=(i=n,u=o,function(t){i(t)&&u(Tu(t))});return t.dom.addEventListener(e,a,r),{unbind:y(Du,t,e,a,r)}},Du=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Bu=function(t){var e=t!==undefined?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return xu(n,o)},Fu=function(t,e,n){var o=(n!==undefined?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Au=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Mu=function(t){var e,n,o=t===undefined?window:t,r=o.document,i=Bu(mn.fromDom(r));return n=(e=o)===undefined?window:e,lt.from(n.visualViewport).fold(function(){var t=o.document.documentElement,e=t.clientWidth,n=t.clientHeight;return Au(i.left,i.top,e,n)},function(t){return Au(Math.max(t.pageLeft,i.left),Math.max(t.pageTop,i.top),t.width,t.height)})},Iu=function(o,t){return o.view(t).fold(at([]),function(t){var e=o.owner(t),n=Iu(o,e);return[t].concat(n)})},Vu=/* */Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?lt.none():lt.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(mn.fromDom)},owner:yr}),Ru=function(o){var t,e,n,r,i=mn.fromDom(document),u=Bu(i);return(t=o,n=(e=Vu).owner(t),r=Iu(e,n),lt.some(r)).fold(y(ku,o),function(t){var e=Su(o),n=P(t,function(t,e){var n=Su(e);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return xu(n.left+e.left+u.left,n.top+e.top+u.top)})},Nu=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Hu=function(t){var e=ku(t),n=_u(t),o=bu(t);return Nu(e.left,e.top,n,o)},Pu=function(t){var e=Ru(t),n=_u(t),o=bu(t);return Nu(e.left,e.top,n,o)},zu=function(){return Mu(window)};function Lu(t,e,n,o,r){return t(n,o)?lt.some(n):T(r)&&r(n)?lt.none():e(n,o,r)}var ju,Uu,Wu=function(t,e,n){for(var o=t.dom,r=T(n)?n:l;o.parentNode;){o=o.parentNode;var i=mn.fromDom(o);if(e(i))return lt.some(i);if(r(i))break}return lt.none()},Gu=function(t,e,n){return Lu(function(t,e){return e(t)},Wu,t,e,n)},Xu=function(t,e,n){return Gu(t,e,n).isSome()},Yu=function(t,e,n){return Wu(t,function(t){return Un(t,e)},n)},qu=function(t,e){return n=e,r=(o=t)===undefined?document:o.dom,Wn(r)?lt.none():lt.from(r.querySelector(n)).map(mn.fromDom);var n,o,r},Ku=function(t,e,n){return Lu(Un,Yu,t,e,n)},Ju=function(){var e=Kr("aria-owns");return{id:e,link:function(t){Pr(t,"aria-owns",e)},unlink:function(t){Ur(t,"aria-owns")}}},$u=function(e,t){return Gu(t,function(t){if(!pr(t))return!1;var e=zr(t,"id");return e!==undefined&&-1<e.indexOf("aria-owns")}).bind(function(t){var e=zr(t,"id"),n=Ni(t);return qu(n,'[aria-owns="'+e+'"]')}).exists(function(t){return Qu(e,t)})},Qu=function(e,t){return Xu(t,function(t){return Gn(t,e.element)},l)||$u(e,t)},Zu="unknown";(Uu=ju=ju||{})[Uu.STOP=0]="STOP",Uu[Uu.NORMAL=1]="NORMAL",Uu[Uu.LOGGING=2]="LOGGING";var ta,ea,na=fn({}),oa=["alloy/data/Fields","alloy/debugging/Debugging"],ra=function(e,t,n){var o,r,i,u;switch(Mt(na.get(),e).orThunk(function(){var t=Ct(na.get());return Q(t,function(t){return-1<e.indexOf(t)?lt.some(na.get()[t]):lt.none()})}).getOr(ju.NORMAL)){case ju.NORMAL:return n(ia());case ju.LOGGING:var a=(o=e,r=t,i=[],u=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();A(["mousemove","mouseover","mouseout",Ao()],o)||console.log(o,{event:o,time:t-u,target:r.dom,sequence:R(i,function(t){return A(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Gr(t.target)+")":t.outcome})})}}),c=n(a);return a.write(),c;case ju.STOP:return!0}},ia=at({logEventCut:ut,logEventStopped:ut,logNoParent:ut,logEventNoHandlers:ut,logEventResponse:ut,write:ut}),ua=at([ze("menu"),ze("selectedMenu")]),aa=at([ze("item"),ze("selectedItem")]),ca=(at(le(aa().concat(ua()))),at(le(aa()))),sa=Ge("initSize",[ze("numColumns"),ze("numRows")]),la=function(){return Ge("markers",[ze("backgroundMenu")].concat(ua()).concat(aa()))},fa=function(t){return Ge("markers",R(t,ze))},da=function(t,e,n){!function(){var t=new Error;if(t.stack===undefined)return;var e=t.stack.split("\n");L(e,function(e){return 0<e.indexOf("alloy")&&!M(oa,function(t){return-1<e.indexOf(t)})}).getOr(Zu)}();return ve(e,e,n,Se(function(n){return gt.value(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(undefined,t)})}))},ma=function(t){return da(0,t,Ut(ut))},ga=function(t){return da(0,t,Ut(lt.none))},pa=function(t){return da(0,t,Wt())},ha=function(t){return da(0,t,Wt())},va=function(t,e){return ln(t,at(e))},ba=function(t){return ln(t,ct)},ya=at(sa),xa=function(t,e,n,o,r,i){return{x:t,y:e,bubble:n,direction:o,boundsRestriction:r,label:i}},wa=Rt([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ka=wa.southeast,Sa=wa.southwest,Ca=wa.northeast,Oa=wa.northwest,_a=wa.south,Ta=wa.north,Ea=wa.east,Da=wa.west,Ba=function(e,n){return function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}(["left","right","top","bottom"],function(t){return Mt(n,t).map(function(t){return function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(e,t)})})},Fa=function(t){return t.x},Aa=function(t,e){return t.x+t.width/2-e.width/2},Ma=function(t,e){return t.x+t.width-e.width},Ia=function(t,e){return t.y-e.height},Va=function(t){return t.y+t.height},Ra=function(t,e){return t.y+t.height/2-e.height/2},Na=function(t,e,n){return xa(Fa(t),Va(t),n.southeast(),ka(),Ba(t,{left:1,top:3}),"layout-se")},Ha=function(t,e,n){return xa(Ma(t,e),Va(t),n.southwest(),Sa(),Ba(t,{right:0,top:3}),"layout-sw")},Pa=function(t,e,n){return xa(Fa(t),Ia(t,e),n.northeast(),Ca(),Ba(t,{left:1,bottom:2}),"layout-ne")},za=function(t,e,n){return xa(Ma(t,e),Ia(t,e),n.northwest(),Oa(),Ba(t,{right:0,bottom:2}),"layout-nw")},La=function(t,e,n){return xa(Aa(t,e),Ia(t,e),n.north(),Ta(),Ba(t,{bottom:2}),"layout-n")},ja=function(t,e,n){return xa(Aa(t,e),Va(t),n.south(),_a(),Ba(t,{top:3}),"layout-s")},Ua=function(t,e,n){return xa((o=t).x+o.width,Ra(t,e),n.east(),Ea(),Ba(t,{left:0}),"layout-e");var o},Wa=function(t,e,n){return xa((o=e,t.x-o.width),Ra(t,e),n.west(),Da(),Ba(t,{right:1}),"layout-w");var o},Ga=function(){return[Na,Ha,Pa,za,ja,La,Ua,Wa]},Xa=function(){return[Ha,Na,za,Pa,ja,La,Ua,Wa]},Ya=function(){return[Pa,za,Na,Ha,La,ja]},qa=function(){return[za,Pa,Ha,Na,La,ja]},Ka=function(){return[Na,Ha,Pa,za,ja,La]},Ja=function(){return[Ha,Na,za,Pa,ja,La]},$a=/* */Object.freeze({__proto__:null,events:function(c){return Zo([nr(Oo(),function(r,t){var e,n,i=c.channels,o=Ct(i),u=t,a=(e=o,(n=u).universal?e:H(e,function(t){return A(n.channels,t)}));dt(a,function(t){var e=i[t],n=e.schema,o=Te("channel["+t+"] data\nReceiver: "+Gr(r.element),n,u.data);e.onReceive(r,o)})})])}}),Qa=[Le("channels",Ce(gt.value,se([pa("onReceive"),tn("schema",Fe())])))],Za=function(n,o,r){return fr(function(t,e){r(t,n,o)})},tc=function(t,e,n,o,r,i){var u=se(t),a=Ze(e,[Ke("config",se(t))]);return oc(u,a,e,n,o,r,i)},ec=function(r,i,u){var t,e,n,o,a,c;return t=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var o=[n].concat(t);return n.config({name:at(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+u)},function(t){var e=Array.prototype.slice.call(o,1);return i.apply(undefined,[n,t.config,t.state].concat(e))})},e=u,n=i.toString(),o=n.indexOf(")")+1,a=n.indexOf("("),c=n.substring(a+1,o-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:e,parameters:ui(c.slice(0,1).concat(c.slice(3)))}},t},nc=function(t){return{key:t,value:undefined}},oc=function(n,t,o,r,e,i,u){var a=function(t){return Vt(t,o)?t[o]():lt.none()},c=Tt(e,function(t,e){return ec(o,t,e)}),s=Tt(i,ai),l=st(st(st({},s),c),{revoke:y(nc,o),config:function(t){var e=Te(o+"-config",n,t);return{key:o,value:{config:e,me:l,configAsRaw:Lt(function(){return Te(o+"-config",n,t)}),initialConfig:t,state:u}}},schema:at(t),exhibit:function(t,n){return a(t).bind(function(e){return Mt(r,"exhibit").map(function(t){return t(n,e.config,e.state)})}).getOr(gi({}))},name:at(o),handlers:function(t){return a(t).map(function(t){return Mt(r,"events").getOr(function(){return{}})(t.config,t.state)}).getOr({})}});return l},rc=$t,ic=se([ze("fields"),ze("name"),tn("active",{}),tn("apis",{}),tn("state",fi),tn("extra",{})]),uc=function(t){var e=Te("Creating behaviour: "+t.name,ic,t);return tc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},ac=se([ze("branchKey"),ze("branches"),ze("name"),tn("active",{}),tn("apis",{}),tn("state",fi),tn("extra",{})]),cc=function(t){var e,n,o,r,i,u,a,c,s=Te("Creating behaviour: "+t.name,ac,t);return e=Be(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,u=s.state,c=Ze(n,[Ke("config",a=e)]),oc(a,c,n,o,r,i,u)},sc=at(undefined),lc=uc({fields:Qa,name:"receiving",active:$a}),fc=/* */Object.freeze({__proto__:null,exhibit:function(t,e){return gi({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),dc=function(t){return t.dom.focus()},mc=function(t){return void 0===t&&(t=mn.fromDom(document)),lt.from(t.dom.activeElement).map(mn.fromDom)},gc=function(e){return mc(Ni(e)).filter(function(t){return e.dom.contains(t.dom)})},pc=function(t,n){var o=Ni(n),e=mc(o).bind(function(e){var r,i,t=function(t){return Gn(e,t)};return t(n)?lt.some(n):(r=t,(i=function(t){for(var e=0;e<t.childNodes.length;e++){var n=mn.fromDom(t.childNodes[e]);if(r(n))return lt.some(n);var o=i(t.childNodes[e]);if(o.isSome())return o}return lt.none()})(n.dom))}),r=t(n);return e.each(function(e){mc(o).filter(function(t){return Gn(t,e)}).fold(function(){dc(e)},ut)}),r},hc=function(t,e,n,o,r){return{position:t,left:e,top:n,right:o,bottom:r}},vc=function(t,e){var n=function(t){return t+"px"};Ki(t,{position:lt.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},bc=Rt([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),yc=function(t,e,n,o,r,i){var u,a,c,s,l,f,d,m,g,p=e.x-n,h=e.y-o,v=r-(p+e.width),b=i-(h+e.height),y=lt.some(p),x=lt.some(h),w=lt.some(v),k=lt.some(b),S=lt.none();return u=e.direction,a=function(){return hc(t,y,x,S,S)},c=function(){return hc(t,S,x,w,S)},s=function(){return hc(t,y,S,S,k)},l=function(){return hc(t,S,S,w,k)},f=function(){return hc(t,y,x,S,S)},d=function(){return hc(t,y,S,S,k)},m=function(){return hc(t,y,x,S,S)},g=function(){return hc(t,S,x,w,S)},u.fold(a,c,s,l,f,d,m,g)},xc=function(t,e){var n=y(Ru,e),o=t.fold(n,n,function(){var t=Bu();return Ru(e).translate(-t.left,-t.top)}),r=_u(e),i=bu(e);return Nu(o.left,o.top,r,i)},wc=function(t,e,n){var o=xu(e,n);return t.fold(at(o),at(o),function(){var t=Bu();return o.translate(-t.left,-t.top)})},kc=(bc.none,bc.relative),Sc=bc.fixed,Cc=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},Oc=function(t,e,n){return Math.min(Math.max(t,e),n)},_c=Rt([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Tc=function(t,e,n,o){var r,i,u,a,c,s,l,f,d,m,g,p,h,v,b,y,x,w,k,S,C,O,_,T,E,D,B,F,A,M,I,V,R,N=t.x,H=t.y,P=t.bubble.offset,z=P.left,L=P.top,j=(r=o,i=t.boundsRestriction,u=P,c=(a=function(e,n){var o="top"===e||"bottom"===e?u.top:u.left;return Mt(i,e).bind(ct).bind(function(t){return"left"===e||"top"===e?n<=t?lt.some(t):lt.none():t<=n?lt.some(t):lt.none()}).map(function(t){return t+o}).getOr(n)})("left",r.x),s=a("top",r.y),l=a("right",r.right),f=a("bottom",r.bottom),Nu(c,s,l-c,f-s)),U=j.y,W=j.bottom,G=j.x,X=j.right,Y=H+L,q=(d=N+z,m=Y,g=e,p=n,v=(h=j).x,b=h.y,y=h.width,x=h.height,k=b<=m,S=(w=v<=d)&&k,C=d+g<=v+y&&m+p<=b+x,O=Math.abs(Math.min(g,w?v+y-d:v-(d+g))),_=Math.abs(Math.min(p,k?b+x-m:b-(m+p))),T=Math.max(h.x,h.right-g),E=Math.max(h.y,h.bottom-p),{originInBounds:S,sizeInBounds:C,limitX:Oc(d,h.x,T),limitY:Oc(m,h.y,E),deltaW:O,deltaH:_}),K=q.originInBounds,J=q.sizeInBounds,$=q.limitX,Q=q.limitY,Z=q.deltaW,tt=q.deltaH,et=at(Q+tt-U),nt=at(W-Q),ot=(D=t.direction,F=B=nt,A=et,D.fold(B,B,A,A,B,A,F,F)),rt=at($+Z-G),it=at(X-$),ut={x:$,y:Q,width:Z,height:tt,maxHeight:ot,maxWidth:(M=t.direction,V=I=it,R=rt,M.fold(I,R,I,R,V,V,I,R)),direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:Y};return K&&J?_c.fit(ut):_c.nofit(ut,Z,tt)},Ec=function(t,e,n,o){tu(e,"max-height"),tu(e,"max-width");var r,i,u,a,c,s,l,f,d,m={width:_u(r=e),height:bu(r)};return i=o.preference,u=t,a=m,c=n,s=o.bounds,l=a.width,f=a.height,d=function(t,o,r,i){var e=t(u,a,c);return Tc(e,l,f,s).fold(_c.fit,function(t,e,n){return i<n||r<e?_c.nofit(t,e,n):_c.nofit(o,r,i)})},z(i,function(t,e){var n=y(d,e);return t.fold(_c.fit,n)},_c.nofit({x:u.x,y:u.y,width:a.width,height:a.height,maxHeight:a.height,maxWidth:a.width,direction:ka(),classes:{on:[],off:[]},label:"none",candidateYforTest:u.y},-1,-1)).fold(ct,ct)},Dc=function(t,e,n){var o,r;vc(t,(o=n.origin,r=e,o.fold(function(){return hc("absolute",lt.some(r.x),lt.some(r.y),lt.none(),lt.none())},function(t,e,n,o){return yc("absolute",r,t,e,n,o)},function(t,e,n,o){return yc("fixed",r,t,e,n,o)})))},Bc=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=hu.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),Yi(n,"max-height",r+"px")},Fc=at(function(t,e){Bc(t,e),qi(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Ac=at(function(t,e){Bc(t,e)}),Mc=function(t,e,n){return t[e]===undefined?n:t[e]},Ic=function(t,e,n,o,r,i){var u,a=Mc(i,"maxHeightFunction",Fc()),c=Mc(i,"maxWidthFunction",ut),s=t.anchorBox,l=t.origin,f={bounds:(u=l,r.fold(function(){return u.fold(zu,zu,Nu)},function(n){return u.fold(n,n,function(){var t=n(),e=wc(u,t.x,t.y);return Nu(e.left,e.top,t.width,t.height)})})),origin:l,preference:o,maxHeightFunction:a,maxWidthFunction:c};Vc(s,e,n,f)},Vc=function(t,e,n,o){var r,i,u,a,c,s,l=Ec(t,e,n,o);Dc(e,l,o),r=e,i=l.classes,Ai(r,i.off),Fi(r,i.on),u=e,a=l,(0,o.maxHeightFunction)(u,a.maxHeight),c=e,s=l,(0,o.maxWidthFunction)(c,s.maxWidth)},Rc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Nc=function(t,e,n){var r=function(t){return Mt(n,t).getOr([])},o=function(t,e,n){var o=X(Rc,n);return{offset:xu(t,e),classesOn:U(n,r),classesOff:U(o,r)}};return{southeast:function(){return o(-t,e,["top","alignLeft"])},southwest:function(){return o(t,e,["top","alignRight"])},south:function(){return o(-t/2,e,["top","alignCentre"])},northeast:function(){return o(-t,-e,["bottom","alignLeft"])},northwest:function(){return o(t,-e,["bottom","alignRight"])},north:function(){return o(-t/2,-e,["bottom","alignCentre"])},east:function(){return o(t,-e/2,["valignCentre","left"])},west:function(){return o(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return o(-t,e,["top","alignRight"])},innerNortheast:function(){return o(t,e,["top","alignLeft"])},innerNorth:function(){return o(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return o(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return o(t,-e,["bottom","alignLeft"])},innerSouth:function(){return o(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return o(t,-e/2,["valignCentre","right"])},innerEast:function(){return o(-t,-e/2,["valignCentre","left"])}}},Hc=function(){return Nc(0,0,{})},Pc=function(e,n){return function(t){return"rtl"===zc(t)?n:e}},zc=function(t){return"rtl"===Ji(t,"direction")?"rtl":"ltr"};(ea=ta=ta||{}).TopToBottom="toptobottom",ea.BottomToTop="bottomtotop";var Lc,jc,Uc,Wc,Gc,Xc="data-alloy-vertical-dir",Yc=function(t){return Xu(t,function(t){return pr(t)&&zr(t,"data-alloy-vertical-dir")===ta.BottomToTop})},qc=function(){return Ze("layouts",[ze("onLtr"),ze("onRtl"),qe("onBottomLtr"),qe("onBottomRtl")])},Kc=function(e,t,n,o,r,i,u){var a=u.map(Yc).getOr(!1),c=t.layouts.map(function(t){return t.onLtr(e)}),s=t.layouts.map(function(t){return t.onRtl(e)}),l=a?t.layouts.bind(function(t){return t.onBottomLtr.map(function(t){return t(e)})}).or(c).getOr(r):c.getOr(n),f=a?t.layouts.bind(function(t){return t.onBottomRtl.map(function(t){return t(e)})}).or(s).getOr(i):s.getOr(o);return Pc(l,f)(e)},Jc=[ze("hotspot"),qe("bubble"),tn("overrides",{}),qc(),va("placement",function(t,e,n){var o=e.hotspot,r=xc(n,o.element),i=Kc(t.element,e,Ka(),Ja(),Ya(),qa(),lt.some(e.hotspot.element));return lt.some({anchorBox:r,bubble:e.bubble.getOr(Hc()),overrides:e.overrides,layouts:i,placer:lt.none()})})],$c=[ze("x"),ze("y"),tn("height",0),tn("width",0),tn("bubble",Hc()),tn("overrides",{}),qc(),va("placement",function(t,e,n){var o=wc(n,e.x,e.y),r=Nu(o.left,o.top,e.width,e.height),i=Kc(t.element,e,Ga(),Xa(),Ga(),Xa(),lt.none());return lt.some({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:lt.none()})})],Qc=Rt([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Zc=function(t){return t.fold(ct,function(t,e,n){return t.translate(-e,-n)})},ts=function(t){return t.fold(ct,ct)},es=function(t){return z(t,function(t,e){return t.translate(e.left,e.top)},xu(0,0))},ns=function(t){var e=R(t,ts);return es(e)},os=Qc.screen,rs=Qc.absolute,is=function(t,e,n){var o,r,i=yr(t.element),u=Bu(i),a=(o=t,r=kr(n.root).dom,lt.from(r.frameElement).map(mn.fromDom).filter(function(t){var e=yr(t),n=yr(o.element);return Gn(e,n)}).map(ku).getOr(u));return rs(a,u.left,u.top)},us=function(t,e,n,o){var r=t,i=e,u=n,a=o;t<0&&(r=0,u=n+t),e<0&&(i=0,a=o+e);var c=os(xu(r,i));return lt.some({point:c,width:u,height:a})},as=function(t,l,f,d,m){return t.map(function(t){var e,n,o,r=[l,t.point],i=(e=function(){return ns(r)},n=function(){return ns(r)},o=function(){return t=R(r,Zc),es(t);var t},d.fold(e,n,o)),u={x:i.left,y:i.top,width:t.width,height:t.height},a=(f.showAbove?Ya:Ka)(),c=(f.showAbove?qa:Ja)(),s=Kc(m,f,a,c,a,c,lt.none());return{anchorBox:u,bubble:f.bubble.getOr(Hc()),overrides:f.overrides,layouts:s,placer:lt.none()}})},cs=[ze("node"),ze("root"),qe("bubble"),qc(),tn("overrides",{}),tn("showAbove",!1),va("placement",function(r,i,u){var a=is(r,0,i);return i.node.filter(ji).bind(function(t){var e=t.dom.getBoundingClientRect(),n=us(e.left,e.top,e.width,e.height),o=i.node.getOr(r.element);return as(n,a,i,u,o)})})],ss=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},ls=Rt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fs=(ls.before,ls.on,ls.after,function(t){return t.fold(ct,ct,ct)}),ds=Rt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ms={domRange:ds.domRange,relative:ds.relative,exact:ds.exact,exactFromRange:function(t){return ds.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e=t.match({domRange:function(t){return mn.fromDom(t.startContainer)},relative:function(t,e){return fs(t)},exact:function(t,e,n,o){return t}});return kr(e)},range:ss},gs=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold(function(t){o.setStartBefore(t.dom)},function(t,e){o.setStart(t.dom,e)},function(t){o.setStartAfter(t.dom)}),r=i,n.fold(function(t){r.setEndBefore(t.dom)},function(t,e){r.setEnd(t.dom,e)},function(t){r.setEndAfter(t.dom)}),i},ps=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},hs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},vs=Rt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bs=function(t,e,n){return e(mn.fromDom(n.startContainer),n.startOffset,mn.fromDom(n.endContainer),n.endOffset)},ys=function(t,e){var r,n,o,i=(r=t,e.match({domRange:function(t){return{ltr:at(t),rtl:lt.none}},relative:function(t,e){return{ltr:Lt(function(){return gs(r,t,e)}),rtl:Lt(function(){return lt.some(gs(r,e,t))})}},exact:function(t,e,n,o){return{ltr:Lt(function(){return ps(r,t,e,n,o)}),rtl:Lt(function(){return lt.some(ps(r,n,o,t,e))})}}}));return(o=(n=i).ltr()).collapsed?n.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return vs.rtl(mn.fromDom(t.endContainer),t.endOffset,mn.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return bs(0,vs.ltr,o)}):bs(0,vs.ltr,o)},xs=(vs.ltr,vs.rtl,Lc=hr,jc="text",{get:function(t){if(!Lc(t))throw new Error("Can only get "+jc+" value of a "+jc+" node");return Uc(t).getOr("")},getOption:Uc=function(t){return Lc(t)?lt.from(t.dom.nodeValue):lt.none()},set:function(t,e){if(!Lc(t))throw new Error("Can only set raw "+jc+" value of a "+jc+" node");t.dom.nodeValue=e}}),ws=function(t){return xs.getOption(t)},ks=["img","br"],Ss=function(t){return ws(t).filter(function(t){return 0!==t.trim().length||-1<t.indexOf("\xa0")}).isSome()||A(ks,mr(t))},Cs=function(t,i){var u=function(t){for(var e=_r(t),n=e.length-1;0<=n;n--){var o=e[n];if(i(o))return lt.some(o);var r=u(o);if(r.isSome())return r}return lt.none()};return u(t)},Os=function(t,e){return n=e,r=(o=t)===undefined?document:o.dom,Wn(r)?[]:R(r.querySelectorAll(n),mn.fromDom);var n,o,r},_s=function(t,e,n,o){var r,i,u,a,c,s=(i=e,u=n,a=o,(c=yr(r=t).dom.createRange()).setStart(r.dom,i),c.setEnd(u.dom,a),c),l=Gn(t,n)&&e===o;return s.collapsed&&!l},Ts=function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return lt.some(ss(mn.fromDom(e.startContainer),e.startOffset,mn.fromDom(n.endContainer),n.endOffset))}return lt.none()},Es=function(t){if(null===t.anchorNode||null===t.focusNode)return Ts(t);var e=mn.fromDom(t.anchorNode),n=mn.fromDom(t.focusNode);return _s(e,t.anchorOffset,n,t.focusOffset)?lt.some(ss(e,t.anchorOffset,n,t.focusOffset)):Ts(t)},Ds=function(t){return e=t,lt.from(e.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(Es);var e},Bs=function(t,e){var i,n,o,r,u=ys(i=t,e).match({ltr:function(t,e,n,o){var r=i.document.createRange();return r.setStart(t.dom,e),r.setEnd(n.dom,o),r},rtl:function(t,e,n,o){var r=i.document.createRange();return r.setStart(n.dom,o),r.setEnd(t.dom,e),r}});return o=(n=u).getClientRects(),0<(r=0<o.length?o[0]:n.getBoundingClientRect()).width||0<r.height?lt.some(r).map(hs):lt.none()},Fs=function(t,e){return{element:t,offset:e}},As=function(t,e){var n=_r(t);if(0===n.length)return Fs(t,e);if(e<n.length)return Fs(n[e],0);var o,r=n[n.length-1],i=hr(r)?(o=r,xs.get(o).length):_r(r).length;return Fs(r,i)},Ms=function(t,e){return(hr(t)?Fs:As)(t,e)},Is=function(t,e){return e.getSelection.getOrThunk(function(){return function(){return Ds(t)}})().map(function(t){var e=Ms(t.start,t.soffset),n=Ms(t.finish,t.foffset);return ms.range(e.element,e.offset,n.element,n.offset)})},Vs=[qe("getSelection"),ze("root"),qe("bubble"),qc(),tn("overrides",{}),tn("showAbove",!1),va("placement",function(t,e,n){var o=kr(e.root).dom,r=is(t,0,e),i=Is(o,e).bind(function(t){return Bs(o,ms.exactFromRange(t)).orThunk(function(){var e=mn.fromText("\ufeff");return Er(t.start,e),Bs(o,ms.exact(e,0,e,1)).map(function(t){return Ir(e),t})}).bind(function(t){return us(t.left,t.top,t.width,t.height)})}),u=Is(o,e).bind(function(t){return pr(t.start)?lt.some(t.start):Cr(t.start)}).getOr(t.element);return as(i,r,e,n,u)})],Rs=function(t){return t.x+t.width},Ns=function(t,e){return t.x-e.width},Hs=function(t,e){return t.y-e.height+t.height},Ps=function(t){return t.y},zs=function(t,e,n){return xa(Rs(t),Ps(t),n.southeast(),ka(),Ba(t,{left:0,top:2}),"link-layout-se")},Ls=function(t,e,n){return xa(Ns(t,e),Ps(t),n.southwest(),Sa(),Ba(t,{right:1,top:2}),"link-layout-sw")},js=function(t,e,n){return xa(Rs(t),Hs(t,e),n.northeast(),Ca(),Ba(t,{left:0,bottom:3}),"link-layout-ne")},Us=function(t,e,n){return xa(Ns(t,e),Hs(t,e),n.northwest(),Oa(),Ba(t,{right:1,bottom:3}),"link-layout-nw")},Ws=function(){return[zs,Ls,js,Us]},Gs=function(){return[Ls,zs,Us,js]},Xs=[ze("item"),qc(),tn("overrides",{}),va("placement",function(t,e,n){var o=xc(n,e.item.element),r=Kc(t.element,e,Ws(),Gs(),Ws(),Gs(),lt.none());return lt.some({anchorBox:o,bubble:Hc(),overrides:e.overrides,layouts:r,placer:lt.none()})})],Ys=Be("anchor",{selection:Vs,node:cs,hotspot:Jc,submenu:Xs,makeshift:$c}),qs=function(t,e,n,o,r){var i={anchorBox:n.anchorBox,origin:e};Ic(i,r.element,n.bubble,n.layouts,o,n.overrides)},Ks=function(t,e,n,o,r,i){var u=i.map(Hu);return Js(t,e,n,o,r,u)},Js=function(c,s,t,e,l,f){var d=Te("positioning anchor.info",Ys,e);pc(function(){Yi(l.element,"position","fixed");var t=Qi(l.element,"visibility");Yi(l.element,"visibility","hidden");var e,n,o,r,i=s.useFixed()?(r=document.documentElement,Sc(0,0,r.clientWidth,r.clientHeight)):(n=ku((e=c).element),o=e.element.dom.getBoundingClientRect(),kc(n.left,n.top,o.width,o.height)),u=d.placement,a=f.map(at).or(s.getBounds);u(c,d,i).each(function(t){t.placer.getOr(qs)(c,i,t,a,l)}),t.fold(function(){tu(l.element,"visibility")},function(t){Yi(l.element,"visibility",t)}),Qi(l.element,"left").isNone()&&Qi(l.element,"top").isNone()&&Qi(l.element,"right").isNone()&&Qi(l.element,"bottom").isNone()&&Qi(l.element,"position").is("fixed")&&tu(l.element,"position")},l.element)},$s=/* */Object.freeze({__proto__:null,position:function(t,e,n,o,r){Ks(t,e,n,o,r,lt.none())},positionWithin:Ks,positionWithinBounds:Js,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),Qs=[tn("useFixed",l),qe("getBounds")],Zs=uc({fields:Qs,name:"positioning",active:fc,apis:$s}),tl=function(t){Yo(t,Ho());var e=t.components();dt(e,tl)},el=function(t){var e=t.components();dt(e,el),Yo(t,No())},nl=function(t,e){Fr(t.element,e.element)},ol=function(e,t){var n,o=e.components();dt((n=e).components(),function(t){return Ir(t.element)}),Mr(n.element),n.syncComponents();var r=X(o,t);dt(r,function(t){tl(t),e.getSystem().removeFromWorld(t)}),dt(t,function(t){t.getSystem().isConnected()?nl(e,t):(e.getSystem().addToWorld(t),nl(e,t),ji(e.element)&&el(t)),e.syncComponents()})},rl=function(t,e){il(t,e,Fr)},il=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),ji(t.element)&&el(e),t.syncComponents()},ul=function(t){tl(t),Ir(t.element),t.getSystem().removeFromWorld(t)},al=function(e){var t=Sr(e.element).bind(function(t){return e.getSystem().getByDom(t).toOptional()});ul(e),t.each(function(t){t.syncComponents()})},cl=function(t){var e=t.components();dt(e,ul),Mr(t.element),t.syncComponents()},sl=function(t,e){ll(t,e,Fr)},ll=function(t,e,n){n(t,e.element);var o=_r(e.element);dt(o,function(t){e.getByDom(t).each(el)})},fl=function(e){var t=_r(e.element);dt(t,function(t){e.getByDom(t).each(tl)}),Ir(e.element)},dl=function(e,t,n,o){n.get().each(function(t){cl(e)});var r=t.getAttachPoint(e);rl(r,e);var i=e.getSystem().build(o);return rl(e,i),n.set(i),i},ml=function(t,e,n,o){var r=dl(t,e,n,o);return e.onOpen(t,r),r},gl=function(e,n,o){o.get().each(function(t){cl(e),al(e),n.onClose(e,t),o.clear()})},pl=function(t,e,n){return n.isOpen()},hl=function(t,e,n){var o,r,i,u,a=e.getAttachPoint(t);Yi(t.element,"position",Zs.getMode(a)),o=t,r="visibility",i=e.cloakVisibilityAttr,u="hidden",Qi(o.element,r).fold(function(){Ur(o.element,i)},function(t){Pr(o.element,i,t)}),Yi(o.element,r,u)},vl=function(t,e,n){var o,r,i,u;o=t.element,M(["top","left","right","bottom"],function(t){return Qi(o,t).isSome()})||tu(t.element,"position"),r=t,i="visibility",u=e.cloakVisibilityAttr,Lr(r.element,u).fold(function(){return tu(r.element,i)},function(t){return Yi(r.element,i,t)})},bl=/* */Object.freeze({__proto__:null,cloak:hl,decloak:vl,open:ml,openWhileCloaked:function(t,e,n,o,r){hl(t,e),ml(t,e,n,o),r(),vl(t,e)},close:gl,isOpen:pl,isPartOf:function(e,n,t,o){return pl(0,0,t)&&t.get().exists(function(t){return n.isPartOf(e,t,o)})},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map(function(){return dl(t,e,n,o)})}}),yl=/* */Object.freeze({__proto__:null,events:function(n,o){return Zo([nr(Bo(),function(t,e){gl(t,n,o)})])}}),xl=[ma("onOpen"),ma("onClose"),ze("isPartOf"),ze("getAttachPoint"),tn("cloakVisibilityAttr","data-precloak-visibility")],wl=uc({fields:xl,name:"sandboxing",active:yl,apis:bl,state:/* */Object.freeze({__proto__:null,init:function(){var e=fn(lt.none()),t=at("not-implemented");return di({readState:t,isOpen:function(){return e.get().isSome()},clear:function(){e.set(lt.none())},set:function(t){e.set(lt.some(t))},get:function(){return e.get()}})}})}),kl=at("dismiss.popups"),Sl=at("reposition.popups"),Cl=at("mouse.released"),Ol=se([tn("isExtraPart",l),Ze("fireEventInstead",[tn("event",Po())])]),_l=function(t){var n=Te("Dismissal",Ol,t),e={};return e[kl()]={schema:se([ze("target")]),onReceive:function(e,t){wl.isOpen(e)&&(wl.isPartOf(e,t.target)||n.isExtraPart(e,t.target)||n.fireEventInstead.fold(function(){return wl.close(e)},function(t){return Yo(e,t.event)}))}},e},Tl=se([Ze("fireEventInstead",[tn("event",zo())]),We("doReposition")]),El=function(t){var n=Te("Reposition",Tl,t),e={};return e[Sl()]={onReceive:function(e){wl.isOpen(e)&&n.fireEventInstead.fold(function(){return n.doReposition(e)},function(t){return Yo(e,t.event)})}},e},Dl=function(t,e,n){e.store.manager.onLoad(t,e,n)},Bl=function(t,e,n){e.store.manager.onUnload(t,e,n)},Fl=/* */Object.freeze({__proto__:null,onLoad:Dl,onUnload:Bl,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Al=/* */Object.freeze({__proto__:null,events:function(n,o){var t=n.resetOnDom?[sr(function(t,e){Dl(t,n,o)}),lr(function(t,e){Bl(t,n,o)})]:[Za(n,o,Dl)];return Zo(t)}}),Ml=function(){var t=fn(null);return di({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Il=function(){var i=fn({}),u=fn({});return di({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(t){return Mt(i.get(),t).orThunk(function(){return Mt(u.get(),t)})},update:function(t){var e=i.get(),n=u.get(),o={},r={};dt(t,function(e){o[e.value]=e,Mt(e,"meta").each(function(t){Mt(t,"text").each(function(t){r[t]=e})})}),i.set(st(st({},e),o)),u.set(st(st({},n),r))},clear:function(){i.set({}),u.set({})}})},Vl=/* */Object.freeze({__proto__:null,memory:Ml,dataset:Il,manual:function(){return di({readState:ut})},init:function(t){return t.store.manager.state(t)}}),Rl=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},Nl=[qe("initialValue"),ze("getFallbackEntry"),ze("getDataKey"),ze("setValue"),va("manager",{setValue:Rl,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold(function(){return o.getFallbackEntry(r)},function(t){return t})},onLoad:function(e,n,o){n.store.initialValue.each(function(t){Rl(e,n,o,t)})},onUnload:function(t,e,n){n.clear()},state:Il})],Hl=[ze("getValue"),tn("setValue",ut),qe("initialValue"),va("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(e,n,t){n.store.initialValue.each(function(t){n.store.setValue(e,t)})},onUnload:ut,state:fi.init})],Pl=[qe("initialValue"),va("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each(function(t){n.isNotSet()&&n.set(t)})},onUnload:function(t,e,n){n.clear()},state:Ml})],zl=[en("store",{mode:"memory"},Be("mode",{memory:Pl,manual:Hl,dataset:Nl})),ma("onSetValue"),tn("resetOnDom",!1)],Ll=uc({fields:zl,name:"representing",active:Al,apis:Fl,extra:{setValueFrom:function(t,e){var n=Ll.getValue(e);Ll.setValue(t,n)}},state:Vl}),jl=function(o,t){return sn(o,{},R(t,function(t){return e=t.name(),n="Cannot configure "+t.name()+" for "+o,ve(e,e,Gt(),ce(function(t){return yt("The field: "+e+" is forbidden. "+n)}));var e,n}).concat([ln("dump",ct)]))},Ul=function(t){return t.dump},Wl=function(t,e){return st(st({},t.dump),rc(e))},Gl=jl,Xl=Wl,Yl="placeholder",ql=Rt([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Kl=function(t){return It(t,"uiType")},Jl=function(t,e,n,o){return Kl(n)&&n.uiType===Yl?(i=n,u=o,(r=t).exists(function(t){return t!==i.owner})?ql.single(!0,at(i)):Mt(u,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+Ct(u)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+JSON.stringify(i,null,2))},function(t){return t.replace()})):ql.single(!1,at(n));var r,i,u},$l=function(i,u,a,c){return Jl(i,0,a,c).fold(function(t,e){var n=Kl(a)?e(u,a.config,a.validated):e(u),o=Mt(n,"components").getOr([]),r=U(o,function(t){return $l(i,u,t,c)});return[st(st({},n),{components:r})]},function(t,e){if(Kl(a)){var n=e(u,a.config,a.validated);return a.validated.preprocess.getOr(ct)(n)}return e(u)})},Ql=function(e,n,t,o){var r,i,u,a=Tt(o,function(t,e){return o=t,r=!1,{name:at(n=e),required:function(){return o.fold(function(t,e){return t},function(t,e){return t})},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r}),c=(r=e,i=n,u=a,U(t,function(t){return $l(r,i,t,u)}));return _t(a,function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(n.components,null,2))}),c},Zl=ql.single,tf=ql.multiple,ef=at(Yl),nf=Rt([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),of=tn("factory",{sketch:ct}),rf=tn("schema",[]),uf=ze("name"),af=ve("pname","pname",Xt(function(t){return"<alloy."+Kr(t.name)+">"}),Fe()),cf=ln("schema",function(){return[qe("preprocess")]}),sf=tn("defaults",at({})),lf=tn("overrides",at({})),ff=le([of,rf,uf,af,sf,lf]),df=le([of,rf,uf,sf,lf]),mf=le([of,rf,uf,af,sf,lf]),gf=le([of,cf,uf,ze("unit"),af,sf,lf]),pf=function(t){return t.fold(lt.some,lt.none,lt.some,lt.some)},hf=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},vf=function(n,o){return function(t){var e=Te("Converting part type",o,t);return n(e)}},bf=vf(nf.required,ff),yf=vf(nf.external,df),xf=vf(nf.optional,mf),wf=vf(nf.group,gf),kf=at("entirety"),Sf=/* */Object.freeze({__proto__:null,required:bf,external:yf,optional:xf,group:wf,asNamedPart:pf,name:hf,asCommon:function(t){return t.fold(ct,ct,ct,ct)},original:kf}),Cf=function(t,e,n,o){return Pt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Of=function(r,t){var e={};return dt(t,function(t){pf(t).each(function(n){var o=_f(r,n.pname);e[n.name]=function(t){var e=Te("Part: "+n.name+" in "+r,le(n.schema),t);return st(st({},o),{config:t,validated:e})}})}),e},_f=function(t,e){return{uiType:ef(),owner:t,name:e}},Tf=function(t,e,n){return{uiType:ef(),owner:t,name:e,config:n,validated:{}}},Ef=function(t){return U(t,function(t){return t.fold(lt.none,lt.some,lt.none,lt.none).map(function(t){return Ge(t.name,t.schema.concat([ba(kf())]))}).toArray()})},Df=function(t){return R(t,hf)},Bf=function(t,e,n){return o=e,i={},r={},dt(n,function(t){t.fold(function(o){i[o.pname]=Zl(!0,function(t,e,n){return o.factory.sketch(Cf(t,o,e,n))})},function(t){var e=o.parts[t.name];r[t.name]=at(t.factory.sketch(Cf(o,t,e[kf()]),e))},function(o){i[o.pname]=Zl(!1,function(t,e,n){return o.factory.sketch(Cf(t,o,e,n))})},function(r){i[r.pname]=tf(!0,function(e,t,n){var o=e[r.name];return R(o,function(t){return r.factory.sketch(Pt(r.defaults(e,t,n),t,r.overrides(e,t)))})})})}),{internals:at(i),externals:at(r)};var o,i,r},Ff=function(t,e,n){return Ql(lt.some(t),e,e.components,n)},Af=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()},Mf=function(t,e,n){return Af(t,e,n).getOrDie("Could not find part: "+n)},If=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return dt(n,function(t){o[t]=at(i.getByUid(r[t]))}),o},Vf=function(t,e){var n=t.getSystem();return Tt(e.partUids,function(t,e){return at(n.getByUid(t))})},Rf=function(t){return Ct(t.partUids)},Nf=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return dt(n,function(t){o[t]=at(i.getByUid(r[t]).getOrDie())}),o},Hf=function(e,t){var n=Df(t);return $t(R(n,function(t){return{key:t,value:e+"-"+t}}))},Pf=function(e){return ve("partUids","partUids",Yt(function(t){return Hf(t.uid,e)}),Fe())},zf=/* */Object.freeze({__proto__:null,generate:Of,generateOne:Tf,schemas:Ef,names:Df,substitutes:Bf,components:Ff,defaultUids:Hf,defaultUidsSchema:Pf,getAllParts:Vf,getAllPartNames:Rf,getPart:Af,getPartOrDie:Mf,getParts:If,getPartsOrDie:Nf}),Lf=function(t,e,n,o,r){var i,u,a=(u=r,(0<(i=o).length?[Ge("parts",i)]:[]).concat([ze("uid"),tn("dom",{}),tn("components",[]),ba("originalSpec"),tn("debug.sketcher",{})]).concat(u));return Te(t+" [SpecSchema]",se(a.concat(e)),n)},jf=function(t,e,n,o,r){var i=Uf(r),u=Ef(n),a=Pf(n),c=Lf(t,e,i,u,[a]),s=Bf(0,c,n);return o(c,Ff(t,c,s.internals()),i,s.externals())},Uf=function(t){return It(t,"uid")?t:st(st({},t),{uid:ni("uid")})},Wf=se([ze("name"),ze("factory"),ze("configFields"),tn("apis",{}),tn("extraApis",{})]),Gf=se([ze("name"),ze("factory"),ze("configFields"),ze("partFields"),tn("apis",{}),tn("extraApis",{})]),Xf=function(t){var i=Te("Sketcher for "+t.name,Wf,t),e=Tt(i.apis,li),n=Tt(i.extraApis,ai);return st(st({name:i.name,configFields:i.configFields,sketch:function(t){return e=i.name,n=i.configFields,o=i.factory,r=Uf(t),o(Lf(e,n,r,[],[]),r);var e,n,o,r}},e),n)},Yf=function(t){var e=Te("Sketcher for "+t.name,Gf,t),n=Of(e.name,e.partFields),o=Tt(e.apis,li),r=Tt(e.extraApis,ai);return st(st({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return jf(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)},qf=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Kf=function(t,e){return t?lt.some(e):lt.none()},Jf=function(t){return"input"===mr(t)&&"radio"!==zr(t,"type")||"textarea"===mr(t)},$f=/* */Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),Qf=[ze("find")],Zf=uc({fields:Qf,name:"composing",apis:$f}),td=function(n,o,t,r){var e=Os(n.element,"."+o.highlightClass);dt(e,function(e){M(r,function(t){return t.element===e})||(Di(e,o.highlightClass),n.getSystem().getByDom(e).each(function(t){o.onDehighlight(n,t),Yo(t,Xo())}))})},ed=function(t,e,n,o){td(t,e,0,[o]),nd(t,e,n,o)||(Ti(o.element,e.highlightClass),e.onHighlight(t,o),Yo(o,Go()))},nd=function(t,e,n,o){return Bi(o.element,e.highlightClass)},od=function(t,e,n,o){var r=Os(t.element,"."+e.itemClass);return lt.from(r[o]).fold(function(){return gt.error(new Error("No element found with index "+o))},t.getSystem().getByDom)},rd=function(e,t,n){return qu(e.element,"."+t.itemClass).bind(function(t){return e.getSystem().getByDom(t).toOptional()})},id=function(e,t,n){var o=Os(e.element,"."+t.itemClass);return(0<o.length?lt.some(o[o.length-1]):lt.none()).bind(function(t){return e.getSystem().getByDom(t).toOptional()})},ud=function(n,e,t,o){var r=Os(n.element,"."+e.itemClass);return j(r,function(t){return Bi(t,e.highlightClass)}).bind(function(t){var e=Cc(t,o,0,r.length-1);return n.getSystem().getByDom(r[e]).toOptional()})},ad=function(e,t,n){var o=Os(e.element,"."+t.itemClass);return qf(R(o,function(t){return e.getSystem().getByDom(t).toOptional()}))},cd=/* */Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return td(t,e,0,[])},dehighlight:function(t,e,n,o){nd(t,e,n,o)&&(Di(o.element,e.highlightClass),e.onDehighlight(t,o),Yo(o,Xo()))},highlight:ed,highlightFirst:function(e,n,o){rd(e,n).each(function(t){ed(e,n,o,t)})},highlightLast:function(e,n,o){id(e,n).each(function(t){ed(e,n,o,t)})},highlightAt:function(e,n,o,t){od(e,n,o,t).fold(function(t){throw t},function(t){ed(e,n,o,t)})},highlightBy:function(e,n,o,t){var r=ad(e,n);L(r,t).each(function(t){ed(e,n,o,t)})},isHighlighted:nd,getHighlighted:function(e,t,n){return qu(e.element,"."+t.highlightClass).bind(function(t){return e.getSystem().getByDom(t).toOptional()})},getFirst:rd,getLast:id,getPrevious:function(t,e,n){return ud(t,e,0,-1)},getNext:function(t,e,n){return ud(t,e,0,1)},getCandidates:ad}),sd=[ze("highlightClass"),ze("itemClass"),ma("onHighlight"),ma("onDehighlight")],ld=uc({fields:sd,name:"highlighting",apis:cd}),fd=[8],dd=[9],md=[13],gd=[27],pd=[32],hd=[37],vd=[38],bd=[39],yd=[40],xd=function(t,e,n){var o=G(t.slice(0,e)),r=G(t.slice(e+1));return L(o.concat(r),n)},wd=function(t,e,n){var o=G(t.slice(0,e));return L(o,n)},kd=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return L(r.concat(o),n)},Sd=function(t,e,n){var o=t.slice(e+1);return L(o,n)},Cd=function(n){return function(t){var e=t.raw;return A(n,e.which)}},Od=function(t){return function(e){return W(t,function(t){return t(e)})}},_d=function(t){return!0===t.raw.shiftKey},Td=function(t){return!0===t.raw.ctrlKey},Ed=x(_d),Dd=function(t,e){return{matches:t,classification:e}},Bd=function(t,e,n){e.exists(function(e){return n.exists(function(t){return Gn(t,e)})})||qo(t,Lo(),{prevFocus:e,newFocus:n})},Fd=function(){var r=function(t){return gc(t.element)};return{get:r,set:function(t,e){var n=r(t);t.getSystem().triggerFocus(e,t.element);var o=r(t);Bd(t,n,o)}}},Ad=function(){var r=function(t){return ld.getHighlighted(t).map(function(t){return t.element})};return{get:r,set:function(e,t){var n=r(e);e.getSystem().getByDom(t).fold(ut,function(t){ld.highlight(e,t)});var o=r(e);Bd(e,n,o)}}};(Gc=Wc=Wc||{}).OnFocusMode="onFocus",Gc.OnEnterOrSpaceMode="onEnterOrSpace",Gc.OnApiMode="onApi";var Md,Id=function(t,e,n,o,a){var c=function(e,n,t,o,r){var i,u,a=t(e,n,o,r);return i=a,u=n.event,L(i,function(t){return t.matches(u)}).map(function(t){return t.classification}).bind(function(t){return t(e,n,o,r)})},r={schema:function(){return t.concat([tn("focusManager",Fd()),en("focusInside","onFocus",Se(function(t){return A(["onFocus","onEnterOrSpace","onApi"],t)?gt.value(t):gt.error("Invalid value for focusInside")})),va("handler",r),va("state",e),va("sendFocusIn",a)])},processKey:c,toEvents:function(i,u){var t=i.focusInside!==Wc.OnFocusMode?lt.none():a(i).map(function(n){return nr(ko(),function(t,e){n(t,i,u),e.stop()})}),e=[nr(mo(),function(o,r){c(o,r,n,i,u).fold(function(){var e,n,t;e=o,n=r,t=Cd(pd.concat(md))(n.event),i.focusInside===Wc.OnEnterOrSpaceMode&&t&&$n(e,n)&&a(i).each(function(t){t(e,i,u),n.stop()})},function(t){r.stop()})}),nr(go(),function(t,e){c(t,e,o,i,u).each(function(t){e.stop()})})];return Zo(t.toArray().concat(e))}};return r},Vd=function(t){var e=[qe("onEscape"),qe("onEnter"),tn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),tn("firstTabstop",0),tn("useTabstopAt",w),qe("visibilitySelector")].concat([t]),u=function(t,e){var n=t.visibilitySelector.bind(function(t){return Ku(e,t)}).getOr(e);return 0<vu(n)},n=function(e,n,t){var o,r,i;o=n,r=Os(e.element,o.selector),i=H(r,function(t){return u(o,t)}),lt.from(i[o.firstTabstop]).each(function(t){n.focusManager.set(e,t)})},a=function(e,t,n,o,r){return r(t,n,function(t){return u(e=o,n=t)&&e.useTabstopAt(n);var e,n}).fold(function(){return o.cyclic?lt.some(!0):lt.none()},function(t){return o.focusManager.set(e,t),lt.some(!0)})},r=function(e,t,n,o){var r,i,u=Os(e.element,n.selector);return r=e,(i=n).focusManager.get(r).bind(function(t){return Ku(t,i.selector)}).bind(function(t){return j(u,y(Gn,t)).bind(function(t){return a(e,u,t,n,o)})})},o=at([Dd(Od([_d,Cd(dd)]),function(t,e,n){var o=n.cyclic?xd:wd;return r(t,0,n,o)}),Dd(Cd(dd),function(t,e,n){var o=n.cyclic?kd:Sd;return r(t,0,n,o)}),Dd(Cd(gd),function(e,n,t){return t.onEscape.bind(function(t){return t(e,n)})}),Dd(Od([Ed,Cd(md)]),function(e,n,t){return t.onEnter.bind(function(t){return t(e,n)})})]),i=at([]);return Id(e,fi.init,o,i,function(){return lt.some(n)})},Rd=Vd(ln("cyclic",l)),Nd=Vd(ln("cyclic",w)),Hd=function(t,e,n){return Jf(n)&&Cd(pd)(e.event)?lt.none():(Jo(t,n,_o()),lt.some(!0))},Pd=function(t,e){return lt.some(!0)},zd=[tn("execute",Hd),tn("useSpace",!1),tn("useEnter",!0),tn("useControlEnter",!1),tn("useDown",!1)],Ld=function(t,e,n){return n.execute(t,e,t.element)},jd=Id(zd,fi.init,function(t,e,n,o){var r=n.useSpace&&!Jf(t.element)?pd:[],i=n.useEnter?md:[],u=n.useDown?yd:[],a=r.concat(i).concat(u);return[Dd(Cd(a),Ld)].concat(n.useControlEnter?[Dd(Od([Td,Cd(md)]),Ld)]:[])},function(t,e,n,o){return n.useSpace&&!Jf(t.element)?[Dd(Cd(pd),Pd)]:[]},function(){return lt.none()}),Ud=function(){var n=fn(lt.none());return di({readState:function(){return n.get().map(function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,e){n.set(lt.some({numRows:t,numColumns:e}))},getNumRows:function(){return n.get().map(function(t){return t.numRows})},getNumColumns:function(){return n.get().map(function(t){return t.numColumns})}})},Wd=/* */Object.freeze({__proto__:null,flatgrid:Ud,init:function(t){return t.state(t)}}),Gd=function(i){return function(t,e,n,o){var r=i(t.element);return Kd(r,t,e,n,o)}},Xd=function(t,e){var n=Pc(t,e);return Gd(n)},Yd=function(t,e){var n=Pc(e,t);return Gd(n)},qd=function(r){return function(t,e,n,o){return Kd(r,t,e,n,o)}},Kd=function(e,n,t,o,r){return o.focusManager.get(n).bind(function(t){return e(n.element,t,o,r)}).map(function(t){return o.focusManager.set(n,t),!0})},Jd=qd,$d=qd,Qd=qd,Zd=function(t){return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0);var e},tm=function(t,e,n){var o,r=Os(t,n),i=H(r,Zd);return j(o=i,function(t){return Gn(t,e)}).map(function(t){return{index:t,candidates:o}})},em=function(t,e){return j(t,function(t){return Gn(e,t)})},nm=function(n,t,o,e){return e(Math.floor(t/o),t%o).bind(function(t){var e=t.row*o+t.column;return 0<=e&&e<n.length?lt.some(n[e]):lt.none()})},om=function(r,t,i,u,a){return nm(r,t,u,function(t,e){var n=t===i-1?r.length-t*u:u,o=Cc(e,a,0,n-1);return lt.some({row:t,column:o})})},rm=function(i,t,u,a,c){return nm(i,t,a,function(t,e){var n=Cc(t,c,0,u-1),o=n===u-1?i.length-n*a:a,r=Oc(e,0,o-1);return lt.some({row:n,column:r})})},im=[ze("selector"),tn("execute",Hd),ga("onEscape"),tn("captureTab",!1),ya()],um=function(e,n,t){qu(e.element,n.selector).each(function(t){n.focusManager.set(e,t)})},am=function(r){return function(t,e,n,o){return tm(t,e,n.selector).bind(function(t){return r(t.candidates,t.index,o.getNumRows().getOr(n.initSize.numRows),o.getNumColumns().getOr(n.initSize.numColumns))})}},cm=function(t,e,n){return n.captureTab?lt.some(!0):lt.none()},sm=am(function(t,e,n,o){return om(t,e,n,o,-1)}),lm=am(function(t,e,n,o){return om(t,e,n,o,1)}),fm=am(function(t,e,n,o){return rm(t,e,n,o,-1)}),dm=am(function(t,e,n,o){return rm(t,e,n,o,1)}),mm=at([Dd(Cd(hd),Xd(sm,lm)),Dd(Cd(bd),Yd(sm,lm)),Dd(Cd(vd),Jd(fm)),Dd(Cd(yd),$d(dm)),Dd(Od([_d,Cd(dd)]),cm),Dd(Od([Ed,Cd(dd)]),cm),Dd(Cd(gd),function(t,e,n){return n.onEscape(t,e)}),Dd(Cd(pd.concat(md)),function(e,n,o,t){return r=e,(i=o).focusManager.get(r).bind(function(t){return Ku(t,i.selector)}).bind(function(t){return o.execute(e,n,t)});var r,i})]),gm=at([Dd(Cd(pd),Pd)]),pm=Id(im,Ud,mm,gm,function(){return lt.some(um)}),hm=function(t,e,n,i){var u=function(t,e,n){var o,r=Cc(e,i,0,n.length-1);return r===t?lt.none():(o=n[r],"button"===mr(o)&&"disabled"===zr(o,"disabled")?u(t,r,n):lt.from(n[r]))};return tm(t,n,e).bind(function(t){var e=t.index,n=t.candidates;return u(e,e,n)})},vm=[ze("selector"),tn("getInitial",lt.none),tn("execute",Hd),ga("onEscape"),tn("executeOnMove",!1),tn("allowVertical",!0)],bm=function(e,n,o){return t=e,(r=o).focusManager.get(t).bind(function(t){return Ku(t,r.selector)}).bind(function(t){return o.execute(e,n,t)});var t,r},ym=function(e,n,t){n.getInitial(e).orThunk(function(){return qu(e.element,n.selector)}).each(function(t){n.focusManager.set(e,t)})},xm=function(t,e,n){return hm(t,n.selector,e,-1)},wm=function(t,e,n){return hm(t,n.selector,e,1)},km=function(r){return function(t,e,n,o){return r(t,e,n,o).bind(function(){return n.executeOnMove?bm(t,e,n):lt.some(!0)})}},Sm=function(t,e,n){return n.onEscape(t,e)},Cm=at([Dd(Cd(pd),Pd)]),Om=Id(vm,fi.init,function(t,e,n,o){var r=hd.concat(n.allowVertical?vd:[]),i=bd.concat(n.allowVertical?yd:[]);return[Dd(Cd(r),km(Xd(xm,wm))),Dd(Cd(i),km(Yd(xm,wm))),Dd(Cd(md),bm),Dd(Cd(pd),bm),Dd(Cd(gd),Sm)]},Cm,function(){return lt.some(ym)}),_m=function(t,e,n){return lt.from(t[e]).bind(function(t){return lt.from(t[n]).map(function(t){return{rowIndex:e,columnIndex:n,cell:t}})})},Tm=function(t,e,n,o){var r=t[e].length,i=Cc(n,o,0,r-1);return _m(t,e,i)},Em=function(t,e,n,o){var r=Cc(n,o,0,t.length-1),i=t[r].length,u=Oc(e,0,i-1);return _m(t,r,u)},Dm=function(t,e,n,o){var r=t[e].length,i=Oc(n+o,0,r-1);return _m(t,e,i)},Bm=function(t,e,n,o){var r=Oc(n+o,0,t.length-1),i=t[r].length,u=Oc(e,0,i-1);return _m(t,r,u)},Fm=[Ge("selectors",[ze("row"),ze("cell")]),tn("cycles",!0),tn("previousSelector",lt.none),tn("execute",Hd)],Am=function(e,n,t){n.previousSelector(e).orThunk(function(){var t=n.selectors;return qu(e.element,t.cell)}).each(function(t){n.focusManager.set(e,t)})},Mm=function(t,e){return function(n,o,i){var u=i.cycles?t:e;return Ku(o,i.selectors.row).bind(function(t){var e=Os(t,i.selectors.cell);return em(e,o).bind(function(o){var r=Os(n,i.selectors.row);return em(r,t).bind(function(t){var e,n=(e=i,R(r,function(t){return Os(t,e.selectors.cell)}));return u(n,t,o).map(function(t){return t.cell})})})})}},Im=Mm(function(t,e,n){return Tm(t,e,n,-1)},function(t,e,n){return Dm(t,e,n,-1)}),Vm=Mm(function(t,e,n){return Tm(t,e,n,1)},function(t,e,n){return Dm(t,e,n,1)}),Rm=Mm(function(t,e,n){return Em(t,n,e,-1)},function(t,e,n){return Bm(t,n,e,-1)}),Nm=Mm(function(t,e,n){return Em(t,n,e,1)},function(t,e,n){return Bm(t,n,e,1)}),Hm=at([Dd(Cd(hd),Xd(Im,Vm)),Dd(Cd(bd),Yd(Im,Vm)),Dd(Cd(vd),Jd(Rm)),Dd(Cd(yd),$d(Nm)),Dd(Cd(pd.concat(md)),function(e,n,o){return gc(e.element).bind(function(t){return o.execute(e,n,t)})})]),Pm=at([Dd(Cd(pd),Pd)]),zm=Id(Fm,fi.init,Hm,Pm,function(){return lt.some(Am)}),Lm=[ze("selector"),tn("execute",Hd),tn("moveOnTab",!1)],jm=function(e,n,o){return o.focusManager.get(e).bind(function(t){return o.execute(e,n,t)})},Um=function(e,n,t){qu(e.element,n.selector).each(function(t){n.focusManager.set(e,t)})},Wm=function(t,e,n){return hm(t,n.selector,e,-1)},Gm=function(t,e,n){return hm(t,n.selector,e,1)},Xm=at([Dd(Cd(vd),Qd(Wm)),Dd(Cd(yd),Qd(Gm)),Dd(Od([_d,Cd(dd)]),function(t,e,n,o){return n.moveOnTab?Qd(Wm)(t,e,n,o):lt.none()}),Dd(Od([Ed,Cd(dd)]),function(t,e,n,o){return n.moveOnTab?Qd(Gm)(t,e,n,o):lt.none()}),Dd(Cd(md),jm),Dd(Cd(pd),jm)]),Ym=at([Dd(Cd(pd),Pd)]),qm=Id(Lm,fi.init,Xm,Ym,function(){return lt.some(Um)}),Km=[ga("onSpace"),ga("onEnter"),ga("onShiftEnter"),ga("onLeft"),ga("onRight"),ga("onTab"),ga("onShiftTab"),ga("onUp"),ga("onDown"),ga("onEscape"),tn("stopSpaceKeyup",!1),qe("focusIn")],Jm=Id(Km,fi.init,function(t,e,n){return[Dd(Cd(pd),n.onSpace),Dd(Od([Ed,Cd(md)]),n.onEnter),Dd(Od([_d,Cd(md)]),n.onShiftEnter),Dd(Od([_d,Cd(dd)]),n.onShiftTab),Dd(Od([Ed,Cd(dd)]),n.onTab),Dd(Cd(vd),n.onUp),Dd(Cd(yd),n.onDown),Dd(Cd(hd),n.onLeft),Dd(Cd(bd),n.onRight),Dd(Cd(pd),n.onSpace),Dd(Cd(gd),n.onEscape)]},function(t,e,n){return n.stopSpaceKeyup?[Dd(Cd(pd),Pd)]:[]},function(t){return t.focusIn}),$m=Rd.schema(),Qm=Nd.schema(),Zm=Om.schema(),tg=pm.schema(),eg=zm.schema(),ng=jd.schema(),og=qm.schema(),rg=Jm.schema(),ig=cc({branchKey:"mode",branches:/* */Object.freeze({__proto__:null,acyclic:$m,cyclic:Qm,flow:Zm,flatgrid:tg,matrix:eg,execution:ng,menu:og,special:rg}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(e,n,o){n.sendFocusIn(n).fold(function(){e.getSystem().triggerFocus(e.element,e.element)},function(t){t(e,n,o)})},setGridSize:function(t,e,n,o,r){Vt(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Wd}),ug=function(t,e,n,o){var r=t.getSystem().build(o);il(t,r,n)},ag=function(t,e,n,o){var r=cg(t);L(r,function(t){return Gn(o.element,t.element)}).each(al)},cg=function(t,e){return t.components()},sg=function(e,t,n,r,o){var i=cg(e);return lt.from(i[r]).map(function(t){return ag(e,0,0,t),o.each(function(t){ug(e,0,function(t,e){var n,o;o=e,Tr(n=t,r).fold(function(){Fr(n,o)},function(t){Er(t,o)})},t)}),t})},lg=uc({fields:[],name:"replacing",apis:/* */Object.freeze({__proto__:null,append:function(t,e,n,o){ug(t,0,Fr,o)},prepend:function(t,e,n,o){ug(t,0,Br,o)},remove:ag,replaceAt:sg,replaceBy:function(e,t,n,o,r){var i=cg(e);return j(i,o).bind(function(t){return sg(e,0,0,t,r)})},set:function(e,t,n,o){pc(function(){var t=R(o,e.getSystem().build);ol(e,t)},e.element)},contents:cg})}),fg=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=Zo(e),uc({fields:[ze("enabled")],name:n,active:{events:at(o)}})),configAsRaw:at({}),initialConfig:{},state:fi}}},dg=function(t,e){e.ignore||(dc(t.element),e.onFocus(t))},mg=/* */Object.freeze({__proto__:null,focus:dg,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return e=t.element,n=Ni(e).dom,e.dom===n.activeElement;var e,n}}),gg=/* */Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return gi(n)},events:function(n){return Zo([nr(ko(),function(t,e){dg(t,n),e.stop()})].concat(n.stopMousedown?[nr(io(),function(t,e){e.event.prevent()})]:[]))}}),pg=[ma("onFocus"),tn("stopMousedown",!1),tn("ignore",!1)],hg=uc({fields:pg,name:"focusing",active:gg,apis:mg}),vg=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},bg=function(e,t,n){t.toggleClass.each(function(t){(n.get()?Ti:Di)(e.element,t)})},yg=function(t,e,n){kg(t,e,n,!n.get())},xg=function(t,e,n){n.set(!0),bg(t,e,n),vg(t,e,n)},wg=function(t,e,n){n.set(!1),bg(t,e,n),vg(t,e,n)},kg=function(t,e,n,o){(o?xg:wg)(t,e,n)},Sg=function(t,e,n){kg(t,e,n,e.selected)},Cg=/* */Object.freeze({__proto__:null,onLoad:Sg,toggle:yg,isOn:function(t,e,n){return n.get()},on:xg,off:wg,set:kg}),Og=/* */Object.freeze({__proto__:null,exhibit:function(){return gi({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=yg,dr(function(t){r(t,n,o)})),u=Za(t,e,Sg);return Zo(mt([t.toggleOnExecute?[i]:[],[u]]))}}),_g=function(t,e,n){Pr(t.element,"aria-expanded",n)},Tg=[tn("selected",!1),qe("toggleClass"),tn("toggleOnExecute",!0),en("aria",{mode:"none"},Be("mode",{pressed:[tn("syncWithExpanded",!1),va("update",function(t,e,n){Pr(t.element,"aria-pressed",n),e.syncWithExpanded&&_g(t,e,n)})],checked:[va("update",function(t,e,n){Pr(t.element,"aria-checked",n)})],expanded:[va("update",_g)],selected:[va("update",function(t,e,n){Pr(t.element,"aria-selected",n)})],none:[va("update",ut)]}))],Eg=uc({fields:Tg,name:"toggling",active:Og,apis:Cg,state:(Md=!1,{init:function(){var e=fn(Md);return{get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(Md)},readState:function(){return e.get()}}}})}),Dg=function(){var t=function(t,e){e.stop(),Ko(t)};return[nr(vo(),t),nr(Eo(),t),ar(eo()),ar(io())]},Bg=function(t){return Zo(mt([t.map(function(n){return dr(function(t,e){n(t),e.stop()})}).toArray(),Dg()]))},Fg="alloy.item-hover",Ag="alloy.item-focus",Mg=function(t){(gc(t.element).isNone()||hg.isFocused(t))&&(hg.isFocused(t)||hg.focus(t),qo(t,Fg,{item:t}))},Ig=function(t){qo(t,Ag,{item:t})},Vg=at(Fg),Rg=at(Ag),Ng=[ze("data"),ze("components"),ze("dom"),tn("hasSubmenu",!1),qe("toggling"),Gl("itemBehaviours",[Eg,hg,ig,Ll]),tn("ignoreFocus",!1),tn("domModification",{}),va("builder",function(t){return{dom:t.dom,domModification:st(st({},t.domModification),{attributes:st(st(st({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Xl(t.itemBehaviours,[t.toggling.fold(Eg.revoke,function(t){return Eg.config(st({aria:{mode:"checked"}},t))}),hg.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Ig(t)}}),ig.config({mode:"execution"}),Ll.config({store:{mode:"memory",initialValue:t.data}}),fg("item-type-events",S(Dg(),[nr(so(),Mg),nr(To(),hg.focus)]))]),components:t.components,eventOrder:t.eventOrder}}),tn("eventOrder",{})],Hg=[ze("dom"),ze("components"),va("builder",function(t){return{dom:t.dom,components:t.components,events:Zo([(e=To(),nr(e,function(t,e){e.stop()}))])};var e})],Pg=at("item-widget"),zg=at([bf({name:"widget",overrides:function(e){return{behaviours:rc([Ll.config({store:{mode:"manual",getValue:function(t){return e.data},setValue:ut}})])}}})]),Lg=[ze("uid"),ze("data"),ze("components"),ze("dom"),tn("autofocus",!1),tn("ignoreFocus",!1),Gl("widgetBehaviours",[Ll,hg,ig]),tn("domModification",{}),Pf(zg()),va("builder",function(n){var t=Bf(Pg(),n,zg()),e=Ff(Pg(),n,t.internals()),o=function(t){return Af(t,n,"widget").map(function(t){return ig.focusIn(t),t})},r=function(t,e){return Jf(e.event.target)||n.autofocus&&e.setSource(t.element),lt.none()};return{dom:n.dom,components:e,domModification:n.domModification,events:Zo([dr(function(t,e){o(t).each(function(t){e.stop()})}),nr(so(),Mg),nr(To(),function(t,e){n.autofocus?o(t):hg.focus(t)})]),behaviours:Xl(n.widgetBehaviours,[Ll.config({store:{mode:"memory",initialValue:n.data}}),hg.config({ignore:n.ignoreFocus,onFocus:function(t){Ig(t)}}),ig.config({mode:"special",focusIn:n.autofocus?function(t){o(t)}:sc(),onLeft:r,onRight:r,onEscape:function(t,e){return hg.isFocused(t)||n.autofocus?(n.autofocus&&e.setSource(t.element),lt.none()):(hg.focus(t),lt.some(!0))}})])}})],jg=Be("type",{widget:Lg,item:Ng,separator:Hg}),Ug=at([wf({factory:{sketch:function(t){var e=Te("menu.spec item",jg,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:st(st({},e),{uid:ni("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Wg=at([ze("value"),ze("items"),ze("dom"),ze("components"),tn("eventOrder",{}),jl("menuBehaviours",[ld,Ll,Zf,ig]),en("movement",{mode:"menu",moveOnTab:!0},Be("mode",{grid:[ya(),va("config",function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}})],matrix:[va("config",function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),ze("rowSelector")],menu:[tn("moveOnTab",!0),va("config",function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}})]})),Le("markers",ca()),tn("fakeFocus",!1),tn("focusManager",Fd()),ma("onHighlight")]),Gg=at("alloy.menu-focus"),Xg=Yf({name:"Menu",configFields:Wg(),partFields:Ug(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Wl(t.menuBehaviours,[ld.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Ll.config({store:{mode:"memory",initialValue:t.value}}),Zf.config({find:lt.some}),ig.config(t.movement.config(t,t.movement))]),events:Zo([nr(Rg(),function(e,n){var t=n.event;e.getSystem().getByDom(t.target).each(function(t){ld.highlight(e,t),n.stop(),qo(e,Gg(),{menu:e,item:t})})}),nr(Vg(),function(t,e){var n=e.event.item;ld.highlight(t,n)})]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Yg=function(n,o,r,t){return Mt(r,t).bind(function(t){return Mt(n,t).bind(function(t){var e=Yg(n,o,r,t);return lt.some([t].concat(e))})}).getOr([])},qg=function(t,e){var n={};_t(t,function(t,e){dt(t,function(t){n[t]=e})});var o=e,r=Et(e,function(t,e){return{k:t,v:e}}),i=Tt(r,function(t,e){return[e].concat(Yg(n,o,r,e))});return Tt(n,function(t){return Mt(i,t).getOr([t])})},Kg=function(t){return"prepared"===t.type?lt.some(t.menu):lt.none()},Jg={init:function(){var i=fn({}),u=fn({}),a=fn({}),c=fn(lt.none()),s=fn({}),r=function(t,o,r){return n(t).bind(function(e){return n=t,Ft(i.get(),function(t,e){return t===n}).bind(function(t){return o(t).map(function(t){return{triggeredMenu:e,triggeringItem:t,triggeringPath:r}})});var n})},n=function(t){return e(t).bind(Kg)},e=function(t){return Mt(u.get(),t)},l=function(t){return Mt(i.get(),t)};return{setMenuBuilt:function(t,e){var n;u.set(st(st({},u.get()),((n={})[t]={type:"prepared",menu:e},n)))},setContents:function(t,e,n,o){c.set(lt.some(t)),i.set(n),u.set(e),s.set(o);var r=qg(o,n);a.set(r)},expand:function(n){return Mt(i.get(),n).map(function(t){var e=Mt(a.get(),n).getOr([]);return[t].concat(e)})},refresh:function(t){return Mt(a.get(),t)},collapse:function(t){return Mt(a.get(),t).bind(function(t){return 1<t.length?lt.some(t.slice(1)):lt.none()})},lookupMenu:e,lookupItem:l,otherMenus:function(t){var e=s.get();return X(Ct(e),t)},getPrimary:function(){return c.get().bind(n)},getMenus:function(){return u.get()},clear:function(){i.set({}),u.set({}),a.set({}),c.set(lt.none())},isClear:function(){return c.get().isNone()},getTriggeringPath:function(t,o){var e=H(l(t).toArray(),function(t){return n(t).isSome()});return Mt(a.get(),t).bind(function(t){var n=G(e.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return lt.none();e.push(o.getOrDie())}return lt.some(e)}(U(n,function(t,e){return r(t,o,n.slice(0,e+1)).fold(function(){return c.get().is(t)?[]:[lt.none()]},function(t){return[lt.some(t)]})}))})}}},extractPreparedMenu:Kg},$g=at("collapse-item"),Qg=Xf({name:"TieredMenu",configFields:[ha("onExecute"),ha("onEscape"),pa("onOpenMenu"),pa("onOpenSubmenu"),ma("onRepositionMenu"),ma("onCollapseMenu"),tn("highlightImmediately",!0),Ge("data",[ze("primary"),ze("menus"),ze("expansions")]),tn("fakeFocus",!1),ma("onHighlight"),ma("onHover"),la(),ze("dom"),tn("navigateOnHover",!0),tn("stayInDom",!1),jl("tmenuBehaviours",[ig,ld,Zf,lg]),tn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(a,t){var c,e,i=fn(lt.none()),s=Jg.init(),n=function(t){var o,r,e,n=(o=t,r=a.data.primary,e=a.data.menus,Tt(e,function(t,e){var n=function(){return Xg.sketch(st(st({},t),{value:e,markers:a.markers,fakeFocus:a.fakeFocus,onHighlight:a.onHighlight,focusManager:(a.fakeFocus?Ad:Fd)()}))};return e===r?{type:"prepared",menu:o.getSystem().build(n())}:{type:"notbuilt",nbMenu:n}})),i=u();return s.setContents(a.data.primary,n,a.data.expansions,i),s.getPrimary()},l=function(t){return Ll.getValue(t).value},u=function(t){return Tt(a.data.menus,function(t,e){return U(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})})},f=function(e,t){ld.highlight(e,t),ld.getHighlighted(t).orThunk(function(){return ld.getFirst(t)}).each(function(t){Jo(e,t.element,To())})},d=function(e,t){return qf(R(t,function(t){return e.lookupMenu(t).bind(function(t){return"prepared"===t.type?lt.some(t.menu):lt.none()})}))},m=function(e,t,n){var o=d(t,t.otherMenus(n));dt(o,function(t){Ai(t.element,[a.markers.backgroundMenu]),a.stayInDom||lg.remove(e,t)})},g=function(t,o){var r,e=(r=t,i.get().getOrThunk(function(){var n={},t=Os(r.element,"."+a.markers.item),e=H(t,function(t){return"true"===zr(t,"aria-haspopup")});return dt(e,function(t){r.getSystem().getByDom(t).each(function(t){var e=l(t);n[e]=t})}),i.set(lt.some(n)),n}));_t(e,function(t,e){var n=A(o,e);Pr(t.element,"aria-expanded",n)})},p=function(o,r,i){return lt.from(i[0]).bind(function(t){return r.lookupMenu(t).bind(function(t){if("notbuilt"===t.type)return lt.none();var e=t.menu,n=d(r,i.slice(1));return dt(n,function(t){Ti(t.element,a.markers.backgroundMenu)}),ji(e.element)||lg.append(o,gu(e)),Ai(e.element,[a.markers.backgroundMenu]),f(o,e),m(o,r,i),lt.some(e)})})};(e=c=c||{})[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent";var h=function(r,i,u){void 0===u&&(u=c.HighlightSubmenu);var t=l(i);return s.expand(t).bind(function(o){return g(r,o),lt.from(o[0]).bind(function(n){return s.lookupMenu(n).bind(function(t){var e=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return s.setMenuBuilt(e,o),o}(r,n,t);return ji(e.element)||lg.append(r,gu(e)),a.onOpenSubmenu(r,i,e,G(o)),u===c.HighlightSubmenu?(ld.highlightFirst(e),p(r,s,o)):(ld.dehighlightAll(e),lt.some(i))})})})},o=function(e,n){var t=l(n);return s.collapse(t).bind(function(t){return g(e,t),p(e,s,t).map(function(t){return a.onCollapseMenu(e,n,t),t})})},r=function(n){return function(e,t){return Ku(t.getSource(),"."+a.markers.item).bind(function(t){return e.getSystem().getByDom(t).toOptional().bind(function(t){return n(e,t).map(w)})})}},v=Zo([nr(Gg(),function(n,o){var t=o.event.item;s.lookupItem(l(t)).each(function(){var t=o.event.menu;ld.highlight(n,t);var e=l(o.event.item);s.refresh(e).each(function(t){return m(n,s,t)})})}),dr(function(e,t){var n=t.event.target;e.getSystem().getByDom(n).each(function(t){0===l(t).indexOf("collapse-item")&&o(e,t),h(e,t,c.HighlightSubmenu).fold(function(){a.onExecute(e,t)},ut)})}),sr(function(e,t){n(e).each(function(t){lg.append(e,gu(t)),a.onOpenMenu(e,t),a.highlightImmediately&&f(e,t)})})].concat(a.navigateOnHover?[nr(Vg(),function(t,e){var n,o,r=e.event.item;n=t,o=l(r),s.refresh(o).bind(function(t){return g(n,t),p(n,s,t)}),h(t,r,c.HighlightParent),a.onHover(t,r)})]:[])),b=function(t){return ld.getHighlighted(t).bind(ld.getHighlighted)},y={collapseMenu:function(e){b(e).each(function(t){o(e,t)})},highlightPrimary:function(e){s.getPrimary().each(function(t){f(e,t)})},repositionMenus:function(o){s.getPrimary().bind(function(e){return b(o).bind(function(t){var e=l(t),n=At(s.getMenus()),o=qf(R(n,Jg.extractPreparedMenu));return s.getTriggeringPath(e,function(t){return n=t,Q(o,function(t){if(!t.getSystem().isConnected())return lt.none();var e=ld.getCandidates(t);return L(e,function(t){return l(t)===n})});var n})}).map(function(t){return{primary:e,triggeringPath:t}})}).fold(function(){var t;t=o,lt.from(t.components()[0]).filter(function(t){return"menu"===zr(t.element,"role")}).each(function(t){a.onRepositionMenu(o,t,[])})},function(t){var e=t.primary,n=t.triggeringPath;a.onRepositionMenu(o,e,n)})}};return{uid:a.uid,dom:a.dom,markers:a.markers,behaviours:Wl(a.tmenuBehaviours,[ig.config({mode:"special",onRight:r(function(t,e){return Jf(e.element)?lt.none():h(t,e,c.HighlightSubmenu)}),onLeft:r(function(t,e){return Jf(e.element)?lt.none():o(t,e)}),onEscape:r(function(t,e){return o(t,e).orThunk(function(){return a.onEscape(t,e).map(function(){return t})})}),focusIn:function(e,t){s.getPrimary().each(function(t){Jo(e,t.element,To())})}}),ld.config({highlightClass:a.markers.selectedMenu,itemClass:a.markers.menu}),Zf.config({find:function(t){return ld.getHighlighted(t)}}),lg.config({})]),eventOrder:a.eventOrder,apis:y,events:v}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:Jt(t,e),expansions:{}}},collapseItem:function(t){return{value:Kr($g()),meta:{text:t}}}}}),Zg=Xf({name:"InlineView",configFields:[ze("lazySink"),ma("onShow"),ma("onHide"),Qe("onEscape"),jl("inlineBehaviours",[wl,Ll,lc]),Ze("fireDismissalEventInstead",[tn("event",Po())]),Ze("fireRepositionEventInstead",[tn("event",zo())]),tn("getRelated",lt.none),tn("isExtraPart",l),tn("eventOrder",lt.none)],factory:function(m,t){var o=function(t,e,n,o){r(t,e,n,function(){return o.map(Hu)})},r=function(t,e,n,o){var r=m.lazySink(t).getOrDie();wl.openWhileCloaked(t,n,function(){return Zs.positionWithinBounds(r,e,t,o())}),Ll.setValue(t,lt.some({mode:"position",anchor:e,getBounds:o}))},i=function(t,e,n,o){var r,i,u,a,c,s,l,f,d=(r=m,i=t,u=e,c=o,s=function(){return r.lazySink(i)},l="horizontal"===(a=n).type?{layouts:{onLtr:Ka,onRtl:Ja}}:{},f=function(t){return 2===t.length?l:{}},Qg.sketch({dom:{tag:"div"},data:a.data,markers:a.menu.markers,highlightImmediately:a.menu.highlightImmediately,onEscape:function(){return wl.close(i),r.onEscape.map(function(t){return t(i)}),lt.some(!0)},onExecute:function(){return lt.some(!0)},onOpenMenu:function(t,e){Zs.positionWithinBounds(s().getOrDie(),u,e,c())},onOpenSubmenu:function(t,e,n,o){var r=s().getOrDie();Zs.position(r,st({anchor:"submenu",item:e},f(o)),n)},onRepositionMenu:function(t,e,n){var o=s().getOrDie();Zs.positionWithinBounds(o,u,e,c()),dt(n,function(t){var e=f(t.triggeringPath);Zs.position(o,st({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)})}}));wl.open(t,d),Ll.setValue(t,lt.some({mode:"menu",menu:d}))},e=function(n){wl.isOpen(n)&&Ll.getValue(n).each(function(t){switch(t.mode){case"menu":wl.getState(n).each(function(t){Qg.repositionMenus(t)});break;case"position":var e=m.lazySink(n).getOrDie();Zs.positionWithinBounds(e,t.anchor,n,t.getBounds())}})},n={setContent:function(t,e){wl.setContent(t,e)},showAt:function(t,e,n){o(t,e,n,lt.none())},showWithin:o,showWithinBounds:r,showMenuAt:function(t,e,n){i(t,e,n,function(){return lt.none()})},showMenuWithinBounds:i,hide:function(t){wl.isOpen(t)&&(Ll.setValue(t,lt.none()),wl.close(t))},getContent:function(t){return wl.getState(t)},reposition:e,isOpen:wl.isOpen};return{uid:m.uid,dom:m.dom,behaviours:Wl(m.inlineBehaviours,[wl.config({isPartOf:function(t,e,n){return Qu(e,n)||(o=t,r=n,m.getRelated(o).exists(function(t){return Qu(t,r)}));var o,r},getAttachPoint:function(t){return m.lazySink(t).getOrDie()},onOpen:function(t){m.onShow(t)},onClose:function(t){m.onHide(t)}}),Ll.config({store:{mode:"memory",initialValue:lt.none()}}),lc.config({channels:st(st({},_l(st({isExtraPart:t.isExtraPart},m.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),El(st(st({},m.fireRepositionEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})),{doReposition:e})))})]),eventOrder:m.eventOrder,apis:n}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),tp=function(t){return t.x},ep=function(t,e){return t.x+t.width/2-e.width/2},np=function(t,e){return t.x+t.width-e.width},op=function(t){return t.y},rp=function(t,e){return t.y+t.height-e.height},ip=function(t,e,n){return xa(np(t,e),rp(t,e),n.innerSoutheast(),Oa(),Ba(t,{right:0,bottom:3}),"layout-inner-se")},up=function(t,e,n){return xa(tp(t),rp(t,e),n.innerSouthwest(),Ca(),Ba(t,{left:1,bottom:3}),"layout-inner-sw")},ap=function(t,e,n){return xa(np(t,e),op(t),n.innerNortheast(),Sa(),Ba(t,{right:0,top:2}),"layout-inner-ne")},cp=function(t,e,n){return xa(tp(t),op(t),n.innerNorthwest(),ka(),Ba(t,{left:1,top:2}),"layout-inner-nw")},sp=function(t,e,n){return xa(ep(t,e),op(t),n.innerNorth(),_a(),Ba(t,{top:2}),"layout-inner-n")},lp=function(t,e,n){return xa(ep(t,e),rp(t,e),n.innerSouth(),Ta(),Ba(t,{bottom:3}),"layout-inner-s")},fp=tinymce.util.Tools.resolve("tinymce.util.Delay"),dp=Xf({name:"Button",factory:function(t){var e=Bg(t.action),n=t.dom.tag,o=function(e){return Mt(t.dom,"attributes").bind(function(t){return Mt(t,e)})};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Xl(t.buttonBehaviours,[hg.config({}),ig.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map(function(t){return{role:t}}).getOr({});return st({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[tn("uid",undefined),ze("dom"),tn("components",[]),Gl("buttonBehaviours",[hg,ig]),qe("action"),qe("role"),tn("eventOrder",{})]}),mp=function(t){var e=t.uid!==undefined&&Vt(t,"uid")?t.uid:ni("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return st(st({},t),{uid:e})}}},gp=function(t){return lt.from(t()["temporary-placeholder"]).getOr("!not found!")},pp=function(t,e){return lt.from(e()[t.toLowerCase()]).getOrThunk(function(){return gp(e)})},hp={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},vp=Xf({name:"Notification",factory:function(e){var t,n,o=mp({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:rc([lg.config({})])}),r=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},i=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},u=mp({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},i(0)],behaviours:rc([lg.config({})])}),a={updateProgress:function(t,e){t.getSystem().isConnected()&&u.getOpt(t).each(function(t){lg.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(e)]},i(e)])})},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=o.get(t),lg.set(n,[lu(e)]))}},c=mt([e.icon.toArray(),e.level.toArray(),e.level.bind(function(t){return lt.from(hp[t])}).toArray()]),s=mp(dp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:pp("close",e.iconProvider),attributes:{"aria-label":e.translationProvider("Close")}}}],action:function(t){e.onAction(t)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=c,n=e.iconProvider,Q(t,function(t){return lt.from(n()[t.toLowerCase()])}).getOrThunk(function(){return gp(n)}))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:rc([lg.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},behaviours:rc([hg.config({}),fg("notification-events",[nr(lo(),function(t){s.getOpt(t).each(hg.focus)})])]),components:l.concat(e.progress?[u.asSpec()]:[]).concat(e.closeButton?[s.asSpec()]:[]),apis:a}},configFields:[qe("level"),ze("progress"),ze("icon"),ze("onAction"),ze("text"),ze("iconProvider"),ze("translationProvider"),un("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function bp(t,u,a){var c=u.backstage;return{open:function(t,e){var n=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),o=function(){e(),Zg.hide(i)},r=mu(vp.sketch({text:t.text,level:A(["success","error","warning","warn","info"],t.type)?t.type:undefined,progress:!0===t.progressBar,icon:lt.from(t.icon),closeButton:!n,onAction:o,iconProvider:c.shared.providers.icons,translationProvider:c.shared.providers.translate})),i=mu(Zg.sketch(st({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:u.backstage.shared.getSink,fireDismissalEventInstead:{}},c.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return a.add(i),0<t.timeout&&fp.setTimeout(function(){o()},t.timeout),{close:o,moveTo:function(t,e){Zg.showAt(i,{anchor:"makeshift",x:t,y:e},gu(r))},moveRel:function(t,e){var n,o;"banner"!==e?(n=function(t){switch(t){case"bc-bc":return lp;case"tc-tc":return sp;case"tc-bc":return La;case"bc-tc":default:return ja}}(e),o={anchor:"node",root:Ui(),node:lt.some(mn.fromDom(t)),layouts:{onRtl:function(){return[n]},onLtr:function(){return[n]}}},Zg.showAt(i,o,gu(r))):Zg.showAt(i,u.backstage.shared.anchors.banner(),gu(r))},text:function(t){vp.updateText(r,t)},settings:t,getEl:function(){return r.element.dom},progressBar:{value:function(t){vp.updateProgress(r,t)}}}},close:function(t){t.close()},reposition:function(t){var n;dt(t,function(t){return t.moveTo(0,0)}),0<(n=t).length&&(K(n).each(function(t){return t.moveRel(null,"banner")}),dt(n,function(t,e){0<e&&t.moveRel(n[e-1].getEl(),"bc-tc")}))},getArgs:function(t){return t.settings}}}var yp,xp,wp=function(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,t),r=null},o)}}},kp=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Sp=function(o,t,e,n,r){var i=kp(o,function(t){return n=t,(e=o).isBlock(n)||A(["BR","IMG","HR","INPUT"],n.nodeName)||"false"===e.getContentEditable(n);var e,n});return lt.from(i.backwards(t,e,n,r))},Cp=function(n,e){return Op(mn.fromDom(n.selection.getNode())).getOrThunk(function(){var t=mn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',n.getDoc());return Fr(t,mn.fromDom(e.extractContents())),e.insertNode(t.dom),Sr(t).each(function(t){return t.dom.normalize()}),Cs(t,Ss).map(function(t){var e;n.selection.setCursorLocation(t.dom,"img"===mr(e=t)?1:ws(e).fold(function(){return _r(e).length},function(t){return t.length}))}),t})},Op=function(t){return Ku(t,"[data-mce-autocompleter]")},_p=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Tp=function(t){return""!==t&&-1!==" \xa0\f\n\r\t\x0B".indexOf(t)},Ep=function(t,e){return t.substring(e.length)},Dp=function(t,o,r,i){if(void 0===i&&(i=0),!(e=o).collapsed||3!==e.startContainer.nodeType)return lt.none();var e,n=t.getParent(o.startContainer,t.isBlock)||t.getRoot();return Sp(t,o.startContainer,o.startOffset,function(t,e,n){return function(t,e,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(Tp(r))return lt.none();if(r===n)break}return lt.some(o)}(n,e,r).getOr(e)},n).bind(function(t){var e=o.cloneRange();if(e.setStart(t.container,t.offset),e.setEnd(o.endContainer,o.endOffset),e.collapsed)return lt.none();var n=_p(e);return 0!==n.lastIndexOf(r)||Ep(n,r).length<i?lt.none():lt.some({text:Ep(n,r),range:e,triggerChar:r})})},Bp=function(o,t,r,e){return void 0===e&&(e=0),Op(mn.fromDom(t.startContainer)).fold(function(){return Dp(o,t,r,e)},function(t){var e=o.createRng();e.selectNode(t.dom);var n=_p(e);return lt.some({range:e,text:Ep(n,r),triggerChar:r})})},Fp=function(n,t){t.on("keypress compositionend",n.onKeypress.throttle),t.on("remove",n.onKeypress.cancel);var o=function(t,e){qo(t,mo(),{raw:e})};t.on("keydown",function(e){var t=function(){return n.getView().bind(ld.getHighlighted)};8===e.which&&n.onKeypress.throttle(e),n.isActive()&&(27===e.which&&n.cancelIfNecessary(),n.isMenuOpen()?13===e.which?(t().each(Ko),e.preventDefault()):40===e.which?(t().fold(function(){n.getView().each(ld.highlightFirst)},function(t){o(t,e)}),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||t().each(function(t){o(t,e),e.preventDefault(),e.stopImmediatePropagation()}):13!==e.which&&38!==e.which&&40!==e.which||n.cancelIfNecessary())}),t.on("NodeChange",function(t){n.isActive()&&!n.isProcessingAction()&&Op(mn.fromDom(t.element)).isNone()&&n.cancelIfNecessary()})},Ap=tinymce.util.Tools.resolve("tinymce.util.Promise"),Mp=function(t,e){return{container:t,offset:e}},Ip=function(t){if(3===t.nodeType)return Mp(t,t.data.length);var e=t.childNodes;return 0<e.length?Ip(e[e.length-1]):Mp(t,e.length)},Vp=function(t,e){var n=t.childNodes;return 0<n.length&&e<n.length?Vp(n[e],0):0<n.length&&1===t.nodeType&&n.length===e?Ip(n[n.length-1]):Mp(t,e)},Rp=function(r){return function(t){var e,n,o=Vp(t.startContainer,t.startOffset);return!Sp(e=r,(n=o).container,n.offset,function(t,e){return 0===e?-1:e},e.getRoot()).filter(function(t){var e=t.container.data.charAt(t.offset-1);return!Tp(e)}).isSome()}},Np=function(e,n){var o,r,t=n(),i=e.selection.getRng();return o=e.dom,r=i,Q(t.triggerChars,function(t){return Bp(o,r,t)}).bind(function(t){return Hp(e,n,t)})},Hp=function(e,t,n,o){void 0===o&&(o={});var r=t(),i=e.selection.getRng().startContainer.nodeValue,u=H(r.lookupByChar(n.triggerChar),function(t){return n.text.length>=t.minChars&&t.matches.getOrThunk(function(){return Rp(e.dom)})(n.range,i,n.text)});if(0===u.length)return lt.none();var a=Ap.all(R(u,function(e){return e.fetch(n.text,e.maxResults,o).then(function(t){return{matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}})}));return lt.some({lookupData:a,context:n})},Pp=le([je("type"),$e("text")]),zp=le([tn("type","autocompleteitem"),tn("active",!1),tn("disabled",!1),tn("meta",{}),je("value"),$e("text"),$e("icon")]),Lp=le([je("type"),je("ch"),nn("minChars",1),tn("columns",1),nn("maxResults",10),Qe("matches"),We("fetch"),We("onAction"),cn("highlightOn",[],Ie)]),jp=[un("disabled",!1),$e("tooltip"),$e("icon"),$e("text"),an("onSetup",function(){return ut})],Up=le([je("type"),We("onAction")].concat(jp)),Wp=function(t){return Oe("toolbarbutton",Up,t)},Gp=[un("active",!1)].concat(jp),Xp=le(Gp.concat([je("type"),We("onAction")])),Yp=function(t){return Oe("ToggleButton",Xp,t)},qp=[an("predicate",l),rn("scope","node",["node","editor"]),rn("position","selection",["node","selection","line"])],Kp=jp.concat([tn("type","contextformbutton"),tn("primary",!1),We("onAction"),ln("original",ct)]),Jp=Gp.concat([tn("type","contextformbutton"),tn("primary",!1),We("onAction"),ln("original",ct)]),$p=jp.concat([tn("type","contextformbutton")]),Qp=Gp.concat([tn("type","contextformtogglebutton")]),Zp=Be("type",{contextformbutton:Kp,contextformtogglebutton:Jp}),th=le([tn("type","contextform"),an("initValue",function(){return""}),$e("label"),Ye("commands",Zp),Ke("launch",Be("type",{contextformbutton:$p,contextformtogglebutton:Qp}))].concat(qp)),eh=le([tn("type","contexttoolbar"),je("items")].concat(qp)),nh=function(t){var e,n,o=t.ui.registry.getAll().popups,r=Tt(o,function(t){return Oe("Autocompleter",Lp,t).fold(function(t){throw new Error(Ee(t))},function(t){return t})}),i=(e=Bt(r,function(t){return t.ch}),n={},dt(e,function(t){n[t]={}}),Ct(n)),u=At(r);return{dataset:r,triggerChars:i,lookupByChar:function(e){return H(u,function(t){return t.ch===e})}}};(xp=yp=yp||{})[xp.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",xp[xp.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var oh,rh,ih=yp,uh="tox-menu-nav__js",ah="tox-collection__item",ch="tox-swatch",sh={normal:uh,color:ch},lh="tox-collection__item--enabled",fh="tox-collection__item-label",dh="tox-collection__item-caret",mh="tox-collection__item--active",gh="tox-collection__item-container",ph="tox-collection__item-container--row",hh=function(t){return Mt(sh,t).getOr(uh)},vh=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}},bh=function(t){var e=vh(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:hh(t)}},yh=[Xg.parts.items({})],xh=function(t,e,n){var o=vh(n);return{dom:{tag:"div",classes:mt([[o.tieredMenu]])},markers:bh(n)}},wh=function(n,o){return function(t){var e=V(t,o);return R(e,function(t){return{dom:n,components:t}})}},kh=function(t,n){var o=[],r=[];return dt(t,function(t,e){n(t,e)?(0<r.length&&o.push(r),r=[],It(t.dom,"innerHtml")&&r.push(t)):r.push(t)}),0<r.length&&o.push(r),R(o,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}})},Sh=function(e,n,t){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Xg.parts.items({preprocess:function(t){return"auto"!==e&&1<e?wh({tag:"div",classes:["tox-collection__group"]},e)(t):kh(t,function(t,e){return"separator"===n[e].type})}})]}},Ch=function(t){return M(t,function(t){return"icon"in t&&t.icon!==undefined})},Oh=function(t){return console.error(Ee(t)),console.log(t),lt.none()},_h=function(t,e,n,o,r){var i,u=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xg.parts.items({preprocess:function(t){return kh(t,function(t,e){return"separator"===i[e].type})}})]});return{value:t,dom:u.dom,components:u.components,items:n}},Th=function(t,e,n,o,r){var i,u,a,c,s,l;return"color"===r?{value:t,dom:(a=(i=o,{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xg.parts.items({preprocess:"auto"!==i?wh({tag:"div",classes:["tox-swatches__row"]},i):ct})]}]})).dom,components:a.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(a=Sh(o,n)).dom,components:a.components,items:n}:"normal"===r&&1===o?{value:t,dom:(a=Sh(1,n)).dom,components:a.components,items:n}:"normal"===r?{value:t,dom:(a=Sh(o,n)).dom,components:a.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:(c=e,s=o,l=vh(r),{tag:"div",classes:mt([[l.menu,"tox-menu-"+s+"-column"],c?[l.hasIcons]:[]])}),components:yh,items:n}:{value:t,dom:(a=(u=o,{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xg.parts.items({preprocess:wh({tag:"div",classes:["tox-collection__group"]},u)})]})).dom,components:a.components,items:n}},Eh=[je("type"),je("src"),$e("alt"),cn("classes",[],Ie)],Dh=le(Eh),Bh=[je("type"),je("text"),$e("name"),cn("classes",["tox-collection__item-label"],Ie)],Fh=le(Bh),Ah=ke(function(){return De("type",{cardimage:Dh,cardtext:Fh,cardcontainer:Mh})}),Mh=le([je("type"),on("direction","horizontal"),on("align","left"),on("valign","middle"),Ye("items",Ah)]),Ih=[un("disabled",!1),$e("text"),$e("shortcut"),ve("value","value",Xt(function(){return Kr("menuitem-value")}),Fe()),tn("meta",{})],Vh=le([je("type"),$e("label"),Ye("items",Ah),an("onSetup",function(){return ut}),an("onAction",ut)].concat(Ih)),Rh=le([je("type"),un("active",!1),$e("icon")].concat(Ih)),Nh=le([je("type"),Ue("fancytype",["inserttable","colorswatch"]),an("onAction",ut)]),Hh=le([je("type"),an("onSetup",function(){return ut}),an("onAction",ut),$e("icon")].concat(Ih)),Ph=le([je("type"),We("getSubmenuItems"),an("onSetup",function(){return ut}),$e("icon")].concat(Ih)),zh=le([je("type"),$e("icon"),un("active",!1),an("onSetup",function(){return ut}),We("onAction")].concat(Ih)),Lh=function(t,o,e){var r=Os(t.element,"."+e);if(0<r.length){var n=j(r,function(t){var e=t.dom.getBoundingClientRect().top,n=r[0].dom.getBoundingClientRect().top;return Math.abs(e-n)>o}).getOr(r.length);return lt.some({numColumns:n,numRows:Math.ceil(r.length/n)})}return lt.none()},jh=function(t,e){return rc([fg(t,e)])},Uh=function(t){return jh(Kr("unnamed-events"),t)},Wh=Kr("tooltip.exclusive"),Gh=Kr("tooltip.show"),Xh=Kr("tooltip.hide"),Yh=function(t,e,n){t.getSystem().broadcastOn([Wh],{})},qh=/* */Object.freeze({__proto__:null,hideAllExclusive:Yh,setComponents:function(t,e,n,o){n.getTooltip().each(function(t){t.getSystem().isConnected()&&lg.set(t,o)})}}),Kh=/* */Object.freeze({__proto__:null,events:function(r,i){var n=function(e){i.getTooltip().each(function(t){al(t),r.onHide(e,t),i.clearTooltip()}),i.clearTimer()};return Zo(mt([[nr(Gh,function(o){i.resetTimer(function(){var e,t,n;e=o,i.isShowing()||(Yh(e),t=r.lazySink(e).getOrDie(),n=e.getSystem().build({dom:r.tooltipDom,components:r.tooltipComponents,events:Zo("normal"===r.mode?[nr(so(),function(t){Yo(e,Gh)}),nr(ao(),function(t){Yo(e,Xh)})]:[]),behaviours:rc([lg.config({})])}),i.setTooltip(n),rl(t,n),r.onShow(e,n),Zs.position(t,r.anchor(e),n))},r.delay)}),nr(Xh,function(t){i.resetTimer(function(){n(t)},r.delay)}),nr(Oo(),function(t,e){e.universal||A(e.channels,Wh)&&n(t)}),lr(function(t){n(t)})],"normal"===r.mode?[nr(lo(),function(t){Yo(t,Gh)}),nr(So(),function(t){Yo(t,Xh)}),nr(so(),function(t){Yo(t,Gh)}),nr(ao(),function(t){Yo(t,Xh)})]:[nr(Go(),function(t,e){Yo(t,Gh)}),nr(Xo(),function(t){Yo(t,Xh)})]]))}}),Jh=[ze("lazySink"),ze("tooltipDom"),tn("exclusive",!0),tn("tooltipComponents",[]),tn("delay",300),rn("mode","normal",["normal","follow-highlight"]),tn("anchor",function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:at([ja,La,Na,Pa,Ha,za]),onRtl:at([ja,La,Na,Pa,Ha,za])}}}),ma("onHide"),ma("onShow")],$h=uc({fields:Jh,name:"tooltipping",active:Kh,state:/* */Object.freeze({__proto__:null,init:function(){var n=fn(lt.none()),e=fn(lt.none()),o=function(){n.get().each(function(t){clearTimeout(t)})},t=at("not-implemented");return di({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(t){e.set(lt.some(t))},clearTooltip:function(){e.set(lt.none())},clearTimer:o,resetTimer:function(t,e){o(),n.set(lt.some(setTimeout(function(){t()},e)))},readState:t})}}),apis:qh}),Qh=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Zh=tinymce.util.Tools.resolve("tinymce.util.I18n"),tv=["input","button","textarea","select"],ev=function(t,e,n){(e.disabled()?av:cv)(t,e)},nv=function(t,e){return!0===e.useNative&&A(tv,mr(t.element))},ov=function(t){Pr(t.element,"disabled","disabled")},rv=function(t){Ur(t.element,"disabled")},iv=function(t){Pr(t.element,"aria-disabled","true")},uv=function(t){Pr(t.element,"aria-disabled","false")},av=function(e,t,n){t.disableClass.each(function(t){Ti(e.element,t)}),(nv(e,t)?ov:iv)(e),t.onDisabled(e)},cv=function(e,t,n){t.disableClass.each(function(t){Di(e.element,t)}),(nv(e,t)?rv:uv)(e),t.onEnabled(e)},sv=function(t,e){return nv(t,e)?jr(t.element,"disabled"):"true"===zr(t.element,"aria-disabled")},lv=/* */Object.freeze({__proto__:null,enable:cv,disable:av,isDisabled:sv,onLoad:ev,set:function(t,e,n,o){(o?av:cv)(t,e)}}),fv=/* */Object.freeze({__proto__:null,exhibit:function(t,e){return gi({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(n,t){return Zo([tr(_o(),function(t,e){return sv(t,n)}),Za(n,t,ev)])}}),dv=[an("disabled",l),tn("useNative",!0),qe("disableClass"),ma("onDisabled"),ma("onEnabled")],mv=uc({fields:dv,name:"disabling",active:fv,apis:lv}),gv=tinymce.util.Tools.resolve("tinymce.EditorManager"),pv=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},hv=function(t){return t.getParam("width",Qh.DOM.getStyle(t.getElement(),"width"))},vv=function(t){return lt.from(t.getParam("min_width")).filter(ft)},bv=function(t){return lt.from(t.getParam("min_height")).filter(ft)},yv=function(t){return lt.from(t.getParam("max_width")).filter(ft)},xv=function(t){return lt.from(t.getParam("max_height")).filter(ft)},wv=function(t){return!1!==t.getParam("menubar",!0,"boolean")},kv=function(t){var e=t.getParam("toolbar",!0),n=!0===e,o=C(e),r=p(e)&&0<e.length;return!Cv(t)&&(r||o||n)},Sv=function(e){var t=I(9,function(t){return e.getParam("toolbar"+(t+1),!1,"string")}),n=H(t,function(t){return"string"==typeof t});return 0<n.length?lt.some(n):lt.none()},Cv=function(t){return Sv(t).fold(function(){return 0<t.getParam("toolbar",[],"string[]").length},w)};(rh=oh=oh||{})["default"]="wrap",rh.floating="floating",rh.sliding="sliding",rh.scrolling="scrolling";var Ov,_v,Tv=function(t){return t.getParam("toolbar_mode","","string")};(_v=Ov=Ov||{}).auto="auto",_v.top="top",_v.bottom="bottom";var Ev,Dv=function(t){return t.getParam("toolbar_location",Ov.auto,"string")},Bv=function(t){return Dv(t)===Ov.bottom},Fv=function(t){var e=t.getParam("fixed_toolbar_container","","string");return 0<e.length&&t.inline?qu(Ui(),e):lt.none()},Av=function(t){return t.inline&&Fv(t).isSome()},Mv=function(t){return Fv(t).getOrThunk(function(){return Hi(Ni(mn.fromDom(t.getElement())))})},Iv=function(t){return t.inline&&!wv(t)&&!kv(t)&&!Cv(t)},Vv=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Av(t)&&!Iv(t)},Rv="silver.readonly",Nv=le([Le("readonly",Ve)]),Hv=function(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([kl()],{target:n}),t.uiMothership.broadcastOn([kl()],{target:n})),t.mothership.broadcastOn([Rv],{readonly:e}),t.uiMothership.broadcastOn([Rv],{readonly:e})},Pv=function(t,e){t.on("init",function(){t.mode.isReadOnly()&&Hv(e,!0)}),t.on("SwitchMode",function(){return Hv(e,t.mode.isReadOnly())}),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")},zv=function(){var t;return lc.config({channels:((t={})[Rv]={schema:Nv,onReceive:function(t,e){mv.set(t,e.readonly)}},t)})},Lv=function(t){return mv.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},jv=function(t){return mv.config({disabled:t})},Uv=function(t){return mv.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Wv=function(t){return mv.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Gv=function(t,e){var n=t.getApi(e);return function(t){t(n)}},Xv=function(n,o){return sr(function(t){Gv(n,t)(function(t){var e=n.onSetup(t);null!==e&&e!==undefined&&o.set(e)})})},Yv=function(e,n){return lr(function(t){return Gv(e,t)(n.get())})},qv=((Ev={})[_o()]=["disabling","alloy.base.behaviour","toggling","item-events"],Ev),Kv=function(t){return U(t,function(t){return t.toArray()})},Jv=function(t,e,n,o){var r,i,u=fn(ut);return{type:"item",dom:e.dom,components:Kv(e.optComponents),data:t.data,eventOrder:qv,hasSubmenu:t.triggersSubmenu,itemBehaviours:rc([fg("item-events",[(r=t,i=n,dr(function(t,e){Gv(r,t)(r.onAction),r.triggersSubmenu||i!==ih.CLOSE_ON_EXECUTE||(Yo(t,Bo()),e.stop())})),Xv(t,u),Yv(t,u)]),Lv(function(){return t.disabled||o.isDisabled()}),zv(),lg.config({})].concat(t.itemBehaviours))}},$v=function(t){return{value:t.value,meta:st({text:t.text.getOr("")},t.meta)}},Qv=tinymce.util.Tools.resolve("tinymce.Env"),Zv=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},tb=function(t){return{dom:{tag:"div",classes:[fh]},components:[lu(Zh.translate(t))]}},eb=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},nb=function(t,e){return{dom:{tag:"div",classes:[fh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[lu(Zh.translate(e))]}]}},ob=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=t,n=Qv.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),r=R(o,function(t){var e=t.toLowerCase().trim();return It(n,e)?n[e]:t}),Qv.mac?r.join(""):r.join("+"))}};var e,n,o,r},rb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:pp("checkmark",t)}}},ib=function(t,e){var n=e.map(function(t){return{attributes:{title:Zh.translate(t)}}}).getOr({});return st({tag:"div",classes:[uh,ah].concat(t?["tox-collection__item-icon-rtl"]:[])},n)},ub=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],ab=["list-bull-circle","list-bull-default","list-bull-square"],cb=function(t,r,e,i){void 0===i&&(i=lt.none());var n,o,u,a,c,s,l,f,d,m,g,p,h=Zh.isRtl()&&t.iconContent.exists(function(t){return A(ab,t)}),v=t.iconContent.map(function(t){return Zh.isRtl()&&A(ub,t)?t+"-rtl":t}).map(function(t){return e=t,n=r.icons,o=i,lt.from(n()[e.toLowerCase()]).or(o).getOrThunk(function(){return gp(n)});var e,n,o}),b=lt.from(t.meta).fold(function(){return tb},function(t){return It(t,"style")?y(nb,t.style):tb});return"color"===t.presets?(f=t.ariaLabel,d=t.value,m=r,{dom:(g=v.getOr(""),p={tag:"div",attributes:f.map(function(t){return{title:m.translate(t)}}).getOr({}),classes:["tox-swatch"]},st(st({},p),"custom"===d?{tag:"button",classes:S(p.classes,["tox-swatches__picker-btn"]),innerHtml:g}:"remove"===d?{classes:S(p.classes,["tox-swatch--remove"]),innerHtml:g}:{attributes:st(st({},p.attributes),{"data-mce-color":d}),styles:{"background-color":d}})),optComponents:[]}):(n=t,o=v,u=b,a=h,c=e?o.or(lt.some("")).map(Zv):lt.none(),s=n.checkMark,l=n.htmlContent.fold(function(){return n.textContent.map(u)},function(t){return lt.some(eb(t,[fh]))}),{dom:ib(a,n.ariaLabel),optComponents:[c,l,n.shortcutContent.map(ob),s,n.caret]})},sb=function(t,e){return Mt(t,"tooltipWorker").map(function(n){return[$h.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Ac}}},mode:"follow-highlight",onShow:function(e,t){n(function(t){$h.setComponents(e,[fu({element:mn.fromDom(t)})])})}})]}).getOr([])},lb=function(t,e){var n,o=Zh.translate(t),r=(n=o,Qh.DOM.encode(n));if(0<e.length){var i=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return r.replace(i,function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"})}return r},fb=function(t,s){return R(t,function(t){switch(t.type){case"cardcontainer":return u=fb((i=t).items,s),a="vertical"===i.direction?"tox-collection__item-container--column":ph,c="left"===i.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[gh,a,c,function(){switch(i.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:u};case"cardimage":return n=t.src,o=t.classes,r=t.alt,{dom:{tag:"img",classes:o,attributes:{src:n,alt:r.getOr("")}}};case"cardtext":var e=t.name.exists(function(t){return A(s.cardText.highlightOn,t)})?lt.from(s.cardText.matchText).getOr(""):"";return eb(lb(t.text,e),t.classes)}var n,o,r,i,u,a,c})},db=Of(Pg(),zg()),mb=function(t){return{value:t}},gb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,hb=function(t){return gb.test(t)||pb.test(t)},vb=function(t){var e={value:t.value.replace(gb,function(t,e,n,o){return e+e+n+n+o+o})},n=pb.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},bb=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},yb=function(t){var e=bb(t.red)+bb(t.green)+bb(t.blue);return mb(e)},xb=Math.min,wb=Math.max,kb=Math.round,Sb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Cb=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Ob=function(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}},_b=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},Tb=function(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,u=t.value/100,i=wb(0,xb(i,1)),u=wb(0,xb(u,1));if(0===i)return e=n=o=kb(255*u),Ob(e,n,o,1);var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),l=u-c;switch(Math.floor(a)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return e=kb(255*(e+l)),n=kb(255*(n+l)),o=kb(255*(o+l)),Ob(e,n,o,1)},Eb=function(t){var e=vb(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return Ob(n,o,r,1)},Db=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),u=parseInt(n,10),a=parseFloat(o);return Ob(r,i,u,a)},Bb=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Fb=Ob(255,0,0,1),Ab=function(t,e){return t.fire("ResizeContent",e)},Mb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Ib="tinymce-custom-colors";var Vb,Rb,Nb="choiceitem",Hb=[{type:Nb,text:"Light Green",value:"#BFEDD2"},{type:Nb,text:"Light Yellow",value:"#FBEEB8"},{type:Nb,text:"Light Red",value:"#F8CAC6"},{type:Nb,text:"Light Purple",value:"#ECCAFA"},{type:Nb,text:"Light Blue",value:"#C2E0F4"},{type:Nb,text:"Green",value:"#2DC26B"},{type:Nb,text:"Yellow",value:"#F1C40F"},{type:Nb,text:"Red",value:"#E03E2D"},{type:Nb,text:"Purple",value:"#B96AD9"},{type:Nb,text:"Blue",value:"#3598DB"},{type:Nb,text:"Dark Turquoise",value:"#169179"},{type:Nb,text:"Orange",value:"#E67E23"},{type:Nb,text:"Dark Red",value:"#BA372A"},{type:Nb,text:"Dark Purple",value:"#843FA1"},{type:Nb,text:"Dark Blue",value:"#236FA1"},{type:Nb,text:"Light Gray",value:"#ECF0F1"},{type:Nb,text:"Medium Gray",value:"#CED4D9"},{type:Nb,text:"Gray",value:"#95A5A6"},{type:Nb,text:"Dark Gray",value:"#7E8C8D"},{type:Nb,text:"Navy Blue",value:"#34495E"},{type:Nb,text:"Black",value:"#000000"},{type:Nb,text:"White",value:"#ffffff"}],Pb=function(n){void 0===n&&(n=10);var t,e=Mb.getItem(Ib),o=C(e)?JSON.parse(e):[],r=n-(t=o).length<0?t.slice(0,n):t,i=function(t){r.splice(t,1)};return{add:function(t){var e;(-1===(e=F(r,t))?lt.none():lt.some(e)).each(i),r.unshift(t),r.length>n&&r.pop(),Mb.setItem(Ib,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),zb=function(t){return!1!==t.getParam("custom_colors")},Lb=function(t){var e=t.getParam("color_map");return e!==undefined?function(t){var e=[],u=document.createElement("canvas");u.height=1,u.width=1;for(var a=u.getContext("2d"),c=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},n=0;n<t.length;n+=2)e.push({text:t[n+1],value:function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();a.clearRect(0,0,u.width,u.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);var e=a.getImageData(0,0,1,1).data,n=e[0],o=e[1],r=e[2],i=e[3];return"#"+c(n,i)+c(o,i)+c(r,i)}(t[n]),type:"choiceitem"});return e}(e):Hb},jb=function(t){Pb.add(t)},Ub=function(i){i.addCommand("mceApplyTextcolor",function(t,e){var n,o,r;o=t,r=e,(n=i).undoManager.transact(function(){n.focus(),n.formatter.apply(o,{value:r}),n.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(t){var e,n;n=t,(e=i).undoManager.transact(function(){e.focus(),e.formatter.remove(n,{value:null},null,!0),e.nodeChanged()})})},Wb=function(t){var e,n,o=Lb(t),r=(e=o.length,Math.max(5,Math.ceil(Math.sqrt(e))));return n=r,t.getParam("color_cols",n,"number")},Gb=function(e,n,t,o){"custom"===t?$b(e)(function(t){t.each(function(t){jb(t),e.execCommand("mceApplyTextcolor",n,t),o(t)})},"#000000"):"remove"===t?(o(""),e.execCommand("mceRemoveTextcolor",n)):(o(t),e.execCommand("mceApplyTextcolor",n,t))},Xb=function(t,e){return t.concat(R(Pb.state(),function(t){return{type:Nb,text:t,value:t}}).concat((o={type:n="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},e?[o,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var n,o},Yb=function(e,n){return function(t){t(Xb(e,n))}},qb=function(t,e,n){var o,r;o="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=n,t.setIconFill(o,r),t.setIconStroke(o,r)},Kb=function(i,n,u,t,o){i.ui.registry.addSplitButton(n,{tooltip:t,presets:"color",icon:"forecolor"===n?"text-color":"highlight-bg-color",select:function(n){var t,o,r;return lt.from((o=u,(t=i).dom.getParents(t.selection.getStart(),function(t){var e;(e=t.style["forecolor"===o?"color":"background-color"])&&(r=r||e)}),r)).bind(function(t){return function(t){if("transparent"===t)return lt.some(Ob(0,0,0,0));var e=Sb.exec(t);if(null!==e)return lt.some(Db(e[1],e[2],e[3],"1"));var n=Cb.exec(t);return null!==n?lt.some(Db(n[1],n[2],n[3],n[4])):lt.none()}(t).map(function(t){var e=yb(t).value;return wn(n.toLowerCase(),e)})}).getOr(!1)},columns:Wb(i),fetch:Yb(Lb(i),zb(i)),onAction:function(t){null!==o.get()&&Gb(i,u,o.get(),ut)},onItemAction:function(t,e){Gb(i,u,e,function(t){var e;o.set(t),e={name:n,color:t},i.fire("TextColorChange",e)})},onSetup:function(e){null!==o.get()&&qb(e,n,o.get());var t=function(t){t.name===n&&qb(e,t.name,t.color)};return i.on("TextColorChange",t),function(){i.off("TextColorChange",t)}}})},Jb=function(e,t,n,o){e.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(t){Gb(e,n,t.value,ut)}}]}})},$b=function(i){return function(t,e){var n,o={colorpicker:e},r=(n=t,function(t){var e=t.getData();n(lt.from(e.colorpicker)),t.close()});i.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:r,onClose:ut,onCancel:function(){t(lt.none())}})}},Qb=function(t,e,n,o,r,i,u,a){var c=Ch(e),s=Zb(e,n,o,"color"!==r?"normal":"color",i,u,a);return Th(t,c,s,o,r)},Zb=function(n,o,r,i,u,a,c){return qf(R(n,function(e){return"choiceitem"===e.type?Oe("choicemenuitem",Rh,e).fold(Oh,function(t){return lt.some(function(e,t,n,o,r,i,u,a){void 0===a&&(a=!0);var c=cb({presets:n,textContent:t?e.text:lt.none(),htmlContent:lt.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:lt.none(),checkMark:t?lt.some(rb(u.icons)):lt.none(),caret:lt.none(),value:e.value},u,a);return Pt(Jv({data:$v(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){Eg.set(e,t)},isActive:function(){return Eg.isOn(e)},isDisabled:function(){return mv.isDisabled(e)},setDisabled:function(t){return mv.set(e,t)}}},onAction:function(t){return o(e.value)},onSetup:function(t){return t.setActive(r),ut},triggersSubmenu:!1,itemBehaviours:[]},c,i,u),{toggling:{toggleClass:lh,toggleOnExecute:!1,selected:e.active}})}(t,1===r,i,o,a(e.value),u,c,Ch(n)))}):lt.none()}))},ty=function(t,e){var n=bh(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},ey=Kr("cell-over"),ny=Kr("cell-execute"),oy=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],u=0;u<n;u++)i.push(function(e,n,t){var o,r=function(t){return qo(t,ny,{row:e,col:n})},i=function(t,e){e.stop(),r(t)};return mu({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=t,o)},behaviours:rc([fg("insert-table-picker-cell",[nr(so(),hg.focus),nr(_o(),r),nr(vo(),i),nr(Eo(),i)]),Eg.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),hg.config({onFocus:function(t){return qo(t,ey,{row:e,col:n})}})])})}(r,u,t));o.push(i)}return o},ry={inserttable:function(o){var t=Kr("size-label"),i=oy(t,10,10),u=mp({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[lu("0x0")],behaviours:rc([lg.config({})])});return{type:"widget",data:{value:Kr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[db.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:U(i,function(t){return R(t,gu)}).concat(u.asSpec()),behaviours:rc([fg("insert-table-picker",[ur(ey,function(t,e,n){var o=n.event.row,r=n.event.col;!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var u=0;u<r;u++)Eg.set(t[i][u],i<=e&&u<=n)}(i,o,r,10,10),lg.set(u.get(t),[lu(r+1+"x"+(o+1))])}),ur(ny,function(t,e,n){o.onAction({numRows:n.event.row+1,numColumns:n.event.col+1}),Yo(t,Bo())})]),ig.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(e,t){var n=Xb(t.colorinput.getColors(),t.colorinput.hasCustomColors()),o=t.colorinput.getColorCols(),r=Qb(Kr("menu-value"),n,function(t){e.onAction({value:t})},o,"color",ih.CLOSE_ON_EXECUTE,l,t.shared.providers),i=st(st({},r),{markers:bh("color"),movement:ty(o,"color")});return{type:"widget",data:{value:Kr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[db.widget(Xg.sketch(i))]}}},iy=function(e,n,t,o,r,i,u,a){void 0===a&&(a=!0);var c=cb({presets:o,textContent:lt.none(),htmlContent:t?e.text.map(function(t){return lb(t,n)}):lt.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:lt.none(),checkMark:lt.none(),caret:lt.none(),value:e.value},u.providers,a,e.icon);return Jv({data:$v(e),disabled:e.disabled,getApi:at({}),onAction:function(t){return r(e.value,e.meta)},onSetup:at(ut),triggersSubmenu:!1,itemBehaviours:sb(e.meta,u)},c,i,u.providers)},uy=function(t){var e=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:st({tag:"div",classes:[ah,"tox-collection__group-heading"]},e),components:[]}},ay=function(t,e,n,o){void 0===o&&(o=!0);var r=cb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:lt.none(),ariaLabel:t.text,caret:lt.none(),checkMark:lt.none(),shortcutContent:t.shortcut},n,o);return Jv({data:$v(t),getApi:function(e){return{isDisabled:function(){return mv.isDisabled(e)},setDisabled:function(t){return mv.set(e,t)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},cy=function(t,e,n,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);var i,u,a=r?(u=n.icons,{dom:{tag:"div",classes:[dh],innerHtml:pp("chevron-down",u)}}):(i=n.icons,{dom:{tag:"div",classes:[dh],innerHtml:pp("chevron-right",i)}}),c=cb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:lt.none(),ariaLabel:t.text,caret:lt.some(a),checkMark:lt.none(),shortcutContent:t.shortcut},n,o);return Jv({data:$v(t),getApi:function(e){return{isDisabled:function(){return mv.isDisabled(e)},setDisabled:function(t){return mv.set(e,t)}}},disabled:t.disabled,onAction:ut,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},c,e,n)},sy=function(t,e,n,o){void 0===o&&(o=!0);var r=cb({iconContent:t.icon,textContent:t.text,htmlContent:lt.none(),ariaLabel:t.text,checkMark:lt.some(rb(n.icons)),caret:lt.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Pt(Jv({data:$v(t),disabled:t.disabled,getApi:function(e){return{setActive:function(t){Eg.set(e,t)},isActive:function(){return Eg.isOn(e)},isDisabled:function(){return mv.isDisabled(e)},setDisabled:function(t){return mv.set(e,t)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:lh,toggleOnExecute:!1,selected:t.active}})},ly=function(e,n){return t=ry,o=e.fancytype,(Object.prototype.hasOwnProperty.call(t,o)?lt.some(t[o]):lt.none()).map(function(t){return t(e,n)});var t,o},fy=function(t,e,n,o){var r={dom:ib(!1,t.label),optComponents:[lt.some({dom:{tag:"div",classes:[gh,ph]},components:fb(t.items,o)})]};return Jv({data:$v(st({text:lt.none()},t)),disabled:t.disabled,getApi:function(n){return{isDisabled:function(){return mv.isDisabled(n)},setDisabled:function(e){mv.set(n,e),dt(Os(n.element,"*"),function(t){n.getSystem().getByDom(t).each(function(t){t.hasConfigured(mv)&&mv.set(t,e)})})}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:lt.from(o.itemBehaviours).getOr([])},r,e,n.providers)};(Rb=Vb=Vb||{})[Rb.ContentFocus=0]="ContentFocus",Rb[Rb.UiFocus=1]="UiFocus";var dy,my,gy,py,hy,vy,by=function(t,e,n,o,r){var i=n.shared.providers,u=function(t){return r?st(st({},t),{shortcut:lt.none(),icon:t.text.isSome()?lt.none():t.icon}):t};switch(t.type){case"menuitem":return Oe("menuitem",Hh,t).fold(Oh,function(t){return lt.some(ay(u(t),e,i,o))});case"nestedmenuitem":return Oe("nestedmenuitem",Ph,t).fold(Oh,function(t){return lt.some(cy(u(t),e,i,o,r))});case"togglemenuitem":return Oe("togglemenuitem",zh,t).fold(Oh,function(t){return lt.some(sy(u(t),e,i,o))});case"separator":return Oe("separatormenuitem",Pp,t).fold(Oh,function(t){return lt.some(uy(t))});case"fancymenuitem":return Oe("fancymenuitem",Nh,t).fold(Oh,function(t){return ly(u(t),n)});default:return console.error("Unknown item in general menu",t),lt.none()}},yy=function(t,n,o,e,r,i,u){var a=1===e,c=!a||Ch(t);return qf(R(t,function(t){switch(t.type){case"separator":return Oe("Autocompleter.Separator",Pp,t).fold(Oh,function(t){return lt.some(uy(t))});case"cardmenuitem":return Oe("cardmenuitem",Vh,t).fold(Oh,function(e){return lt.some(fy(st(st({},e),{onAction:function(t){e.onAction(t),o(e.value,e.meta)}}),r,i,{itemBehaviours:sb(e.meta,i),cardText:{matchText:n,highlightOn:u}}))});case"autocompleteitem":default:return Oe("Autocompleter.Item",zp,t).fold(Oh,function(t){return lt.some(iy(t,n,a,"normal",o,r,i,c))})}}))},xy=function(t,e,n,o,r){var i=Ch(e),u=qf(R(e,function(t){var e=function(t){return by(t,n,o,(e=t,r?!e.hasOwnProperty("text"):i),r);var e};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(st(st({},t),{disabled:!0})):e(t)}));return(r?_h:Th)(t,i,u,1,"normal")},wy=function(t){return Qg.singleData(t.value,t)},ky=function(d,c){var n=fn(lt.none()),s=fn(!1),m=mu(Zg.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:rc([fg("dismissAutocompleter",[nr(Po(),function(){return f()})])]),lazySink:c.getSink})),o=function(){return n.get().isSome()},l=function(){o()&&Zg.hide(m)},f=function(){var t;o()&&(t=n.get().map(function(t){return t.element}),Op(t.getOr(mn.fromDom(d.selection.getNode()))).each(Vr),l(),n.set(lt.none()),s.set(!1))},r=Lt(function(){return nh(d)}),g=function(t,e,n,o){t.matchLength=e.text.length;var r,i,u,a,c,s,l,f=Q(n,function(t){return lt.from(t.columns)}).getOr(1);Zg.showAt(m,{anchor:"node",root:mn.fromDom(d.getBody()),node:lt.from(t.element)},Xg.sketch((r=Th("autocompleter-value",!0,o,f,"normal"),i=f,u=Vb.ContentFocus,a="normal",c=(u===Vb.ContentFocus?Ad:Fd)(),s=ty(i,a),l=bh(a),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:u===Vb.ContentFocus,focusManager:c,menuBehaviours:Uh("auto"!==i?[]:[sr(function(o,t){Lh(o,4,l.item).each(function(t){var e=t.numColumns,n=t.numRows;ig.setGridSize(o,n,e)})})])}))),Zg.getContent(m).each(ld.highlightFirst)},p=function(t){var e;e=t,n.get().map(function(t){return Bp(d.dom,d.selection.getRng(),t.triggerChar).bind(function(t){return Hp(d,r,t,e)})}).getOrThunk(function(){return Np(d,r)}).fold(f,function(a){var t,e;t=a.context,o()||(e=Cp(d,t.range),n.set(lt.some({triggerChar:t.triggerChar,element:e,matchLength:t.text.length})),s.set(!1)),a.lookupData.then(function(u){n.get().map(function(t){var e,n,o,r,i=a.context;t.triggerChar===i.triggerChar&&(n=i.triggerChar,r=Q(o=u,function(t){return lt.from(t.columns)}).getOr(1),0<(e=U(o,function(i){var t=i.items;return yy(t,i.matchText,function(o,r){var t=d.selection.getRng();Bp(d.dom,t,n).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var e=t.range,n={hide:function(){f()},reload:function(t){l(),p(t)}};s.set(!0),i.onAction(n,e,o,r),s.set(!1)})},r,ih.BUBBLE_TO_SANDBOX,c,i.highlightOn)})).length?g(t,i,u,e):(10<=i.text.length-t.matchLength?f:l)())})})})},t={onKeypress:wp(function(t){27!==t.which&&p()},50),cancelIfNecessary:f,isMenuOpen:function(){return Zg.isOpen(m)},isActive:o,isProcessingAction:s.get,getView:function(){return Zg.getContent(m)}};!1===d.hasPlugin("rtc")&&Fp(t,d)},Sy=w,Cy=function(t,e,n){return Eu(t,e,Sy,n,!1)},Oy=function(t,e,n){return Eu(t,e,Sy,n,!0)},_y=Tu,Ty=function(t,e,n){return Ku(t,e,n).isSome()},Ey=function(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r=setTimeout(function(){n.apply(null,t),r=null},o)}}},Dy=function(t){var e=t.raw;return e.touches===undefined||1!==e.touches.length?lt.none():lt.some(e.touches[0])},By=function(n){var u=fn(lt.none()),o=fn(!1),r=Ey(function(t){n.triggerEvent(Do(),t),o.set(!0)},400),i=$t([{key:eo(),value:function(n){return Dy(n).each(function(t){r.cancel();var e={x:t.clientX,y:t.clientY,target:n.target};r.schedule(n),o.set(!1),u.set(lt.some(e))}),lt.none()}},{key:no(),value:function(t){return r.cancel(),Dy(t).each(function(i){u.get().each(function(t){var e,n,o,r;e=i,n=t,o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y),(5<o||5<r)&&u.set(lt.none())})}),lt.none()}},{key:oo(),value:function(e){r.cancel();return u.get().filter(function(t){return Gn(t.target,e.target)}).map(function(t){return o.get()?(e.prevent(),!1):n.triggerEvent(Eo(),e)})}}]);return{fireIfReady:function(e,t){return Mt(i,t).bind(function(t){return t(e)})}}},Fy=function(){return jn().browser.isFirefox()},Ay=se([We("triggerEvent"),tn("stopBackspace",!0)]),My=function(e,t){var n,o,r,i,u=Te("Getting GUI events settings",Ay,t),a=By(u),c=R(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return Cy(e,t,function(e){a.fireIfReady(e,t).each(function(t){t&&e.kill()}),u.triggerEvent(t,e)&&e.kill()})}),s=fn(lt.none()),l=Cy(e,"paste",function(e){a.fireIfReady(e,"paste").each(function(t){t&&e.kill()}),u.triggerEvent("paste",e)&&e.kill(),s.set(lt.some(setTimeout(function(){u.triggerEvent(Co(),e)},0)))}),f=Cy(e,"keydown",function(t){var e;u.triggerEvent("keydown",t)?t.kill():!0!==u.stopBackspace||((e=t).raw.which!==fd[0]||A(["input","textarea"],mr(e.target))||Ty(e.target,'[contenteditable="true"]'))||t.prevent()}),d=(n=e,o=function(t){u.triggerEvent("focusin",t)&&t.kill()},Fy()?Oy(n,"focus",o):Cy(n,"focusin",o)),m=fn(lt.none()),g=(r=e,i=function(t){u.triggerEvent("focusout",t)&&t.kill(),m.set(lt.some(setTimeout(function(){u.triggerEvent(So(),t)},0)))},Fy()?Oy(r,"blur",i):Cy(r,"focusout",i));return{unbind:function(){dt(c,function(t){t.unbind()}),f.unbind(),d.unbind(),g.unbind(),l.unbind(),s.get().each(clearTimeout),m.get().each(clearTimeout)}}},Iy=function(t,e){var n=Mt(t,"target").getOr(e);return fn(n)},Vy=Rt([{stopped:[]},{resume:["element"]},{complete:[]}]),Ry=function(t,o,e,n,r,i){var u,a,c,s,l=t(o,n),f=(u=e,a=r,c=fn(!1),s=fn(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:u,setSource:a.set,getSource:a.get});return l.fold(function(){return i.logEventNoHandlers(o,n),Vy.complete()},function(e){var n=e.descHandler;return pi(n)(f),f.isStopped()?(i.logEventStopped(o,e.element,n.purpose),Vy.stopped()):f.isCut()?(i.logEventCut(o,e.element,n.purpose),Vy.complete()):Sr(e.element).fold(function(){return i.logNoParent(o,e.element,n.purpose),Vy.complete()},function(t){return i.logEventResponse(o,e.element,n.purpose),Vy.resume(t)})})},Ny=function(e,n,o,t,r,i){return Ry(e,n,o,t,r,i).fold(w,function(t){return Ny(e,n,o,t,r,i)},l)},Hy=function(t,e,n){var o,r,i=(o=e,r=fn(!1),{stop:function(){r.set(!0)},cut:ut,isStopped:r.get,isCut:l,event:o,setSource:u("Cannot set source of a broadcasted event"),getSource:u("Cannot get source of a broadcasted event")});return dt(t,function(t){var e=t.descHandler;pi(e)(i)}),i.isStopped()},Py=function(t,e,n,o,r){var i=Iy(n,o);return Ny(t,e,n,o,i,r)},zy=function(){var a={};return{registerId:function(i,u,t){_t(t,function(t,e){var n,o,r=a[e]!==undefined?a[e]:{};r[u]=(n=t,o=i,{cHandler:y.apply(undefined,[n.handler].concat(o)),purpose:n.purpose}),a[e]=r})},unregisterId:function(n){_t(a,function(t,e){t.hasOwnProperty(n)&&delete t[n]})},filterByType:function(t){return Mt(a,t).map(function(t){return Bt(t,function(t,e){return{id:e,descHandler:t}})}).getOr([])},find:function(t,e,n){var r=Mt(a,e);return Jn(n,function(t){return n=r,ei(o=t).fold(function(){return lt.none()},function(e){return n.bind(function(t){return Mt(t,e)}).map(function(t){return{element:o,descHandler:t}})});var n,o},t)}}},Ly=function(){var o=zy(),r={},i=function(o){var t=o.element;return ei(t).fold(function(){return t="uid-",e=o.element,n=Kr(Qr+t),ti(e,n),n;var t,e,n},function(t){return t})},u=function(t){ei(t.element).each(function(t){delete r[t],o.unregisterId(t)})};return{find:function(t,e,n){return o.find(t,e,n)},filter:function(t){return o.filterByType(t)},register:function(t){var e=i(t);Vt(r,e)&&function(t,e){var n=r[e];if(n!==t)throw new Error('The tagId "'+e+'" is already used by: '+Gr(n.element)+"\nCannot use it for: "+Gr(t.element)+"\nThe conflicting element is"+(ji(n.element)?" ":" not ")+"already in the DOM");u(t)}(t,e);var n=[t];o.registerId(n,e,t.events),r[e]=t},unregister:u,getById:function(t){return Mt(r,t)}}},jy=Xf({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=k(e,["attributes"]);return{uid:t.uid,dom:st({tag:"div",attributes:st({role:"presentation"},n)},o),components:t.components,behaviours:Ul(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[tn("components",[]),jl("containerBehaviours",[]),tn("events",{}),tn("domModification",{}),tn("eventOrder",{})]}),Uy=function(n){var o=function(e){return Sr(n.element).fold(w,function(t){return Gn(e,t)})},r=Ly(),s=function(t,e){return r.find(o,t,e)},t=My(n.element,{triggerEvent:function(o,r){return ra(o,r.target,function(t){return n=t,Py(s,o,e=r,e.target,n);var e,n})}}),i={debugInfo:at("real"),triggerEvent:function(e,n,o){ra(e,n,function(t){return Py(s,e,o,n,t)})},triggerFocus:function(a,c){ei(a).fold(function(){dc(a)},function(t){ra(ko(),a,function(t){var e,n,o,r,i,u;return e=s,n=ko(),i=t,u=Iy(o={originator:c,kill:ut,prevent:ut,target:a},r=a),Ry(e,n,o,r,u,i),!1})})},triggerEscape:function(t,e){i.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return g(t)},getByDom:function(t){return p(t)},build:mu,addToGui:function(t){a(t)},removeFromGui:function(t){c(t)},addToWorld:function(t){e(t)},removeFromWorld:function(t){u(t)},broadcast:function(t){f(t)},broadcastOn:function(t,e){d(t,e)},broadcastEvent:function(t,e){m(t,e)},isConnected:w},e=function(t){t.connect(i),hr(t.element)||(r.register(t),dt(t.components(),e),i.triggerEvent(Ao(),t.element,{target:t.element}))},u=function(t){hr(t.element)||(dt(t.components(),u),r.unregister(t)),t.disconnect()},a=function(t){rl(n,t)},c=function(t){al(t)},l=function(n){var t=r.filter(Oo());dt(t,function(t){var e=t.descHandler;pi(e)(n)})},f=function(t){l({universal:!0,data:t})},d=function(t,e){l({universal:!1,channels:t,data:e})},m=function(t,e){var n=r.filter(t);return Hy(n,e)},g=function(t){return r.getById(t).fold(function(){return gt.error(new Error('Could not find component with uid: "'+t+'" in system.'))},gt.value)},p=function(t){var e=ei(t).getOr("not found");return g(e)};return e(n),{root:n,element:n.element,destroy:function(){t.unbind(),Ir(n.element)},add:a,remove:c,getByUid:g,getByDom:p,addToWorld:e,removeFromWorld:u,broadcast:f,broadcastOn:d,broadcastEvent:m}},Wy=uc({fields:[],name:"unselecting",active:/* */Object.freeze({__proto__:null,events:function(){return Zo([tr(yo(),w)])},exhibit:function(){return gi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Gy=at([tn("prefix","form-field"),jl("fieldBehaviours",[Zf,Ll])]),Xy=at([xf({schema:[ze("dom")],name:"label"}),xf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[ze("text")],name:"aria-descriptor"}),bf({factory:{sketch:function(t){var e=Kt(t,["factory"]);return t.factory.sketch(e)}},schema:[ze("factory")],name:"field"})]),Yy=Yf({name:"FormField",configFields:Gy(),partFields:Xy(),factory:function(r,t,e,n){var o=Wl(r.fieldBehaviours,[Zf.config({find:function(t){return Af(t,r,"field")}}),Ll.config({store:{mode:"manual",getValue:function(t){return Zf.getCurrent(t).bind(Ll.getValue)},setValue:function(t,e){Zf.getCurrent(t).each(function(t){Ll.setValue(t,e)})}}})]),i=Zo([sr(function(t,e){var o=If(t,r,["label","field","aria-descriptor"]);o.field().each(function(n){var e=Kr(r.prefix);o.label().each(function(t){Pr(t.element,"for",e),Pr(n.element,"id",e)}),o["aria-descriptor"]().each(function(t){var e=Kr(r.prefix);Pr(t.element,"id",e),Pr(n.element,"aria-describedby",e)})})})]),u={getField:function(t){return Af(t,r,"field")},getLabel:function(t){return Af(t,r,"label")}};return{uid:r.uid,dom:r.dom,components:t,behaviours:o,events:i,apis:u}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),qy=at([tn("field1Name","field1"),tn("field2Name","field2"),pa("on1Change"),pa("on2Change"),Gl("authBehaviours",[Zf,Ll])]),Ky=function(t,e,n){return Af(t,e,n).bind(Zf.getCurrent)},Jy=at([(my=["field2"],bf({factory:Yy,name:"field1",overrides:function(o){return{fieldBehaviours:rc([fg("auth-behaviour",[nr(ho(),function(e){var n=[];my.forEach(function(t){return Ky(e,o,t).each(function(t){n.push(t)})}),o.on1Change(e,n)})])])}}})),(dy=["field1"],bf({factory:Yy,name:"field2",overrides:function(o){return{fieldBehaviours:rc([fg("auth-behaviour",[nr(ho(),function(e){var n=[];dy.forEach(function(t){return Ky(e,o,t).each(function(t){n.push(t)})}),o.on2Change(e,n)})])])}}}))]),$y=Yf({name:"FormAuth",configFields:qy(),partFields:Jy(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Xl(o.authBehaviours,[Zf.config({find:lt.some}),Ll.config({store:{mode:"manual",getValue:function(t){var e=Nf(t,o,["field1","field2"]),n={};return n[o.field1Name]=Ll.getValue(e.field1()),n[o.field2Name]=Ll.getValue(e.field2()),n},setValue:function(t,e){var n=Nf(t,o,["field1","field2"]);Vt(e,o.field1Name)&&Ll.setValue(n.field1(),e[o.field1Name]),Vt(e,o.field2Name)&&Ll.setValue(n.field2(),e[o.field2Name])}}})]),apis:{getField1:function(t){return Af(t,o,"field1")},getField2:function(t){return Af(t,o,"field2")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)}}}),Qy=/* */Object.freeze({__proto__:null,exhibit:function(t,e){return gi({attributes:$t([{key:e.tabAttr,value:"true"}])})}}),Zy=[tn("tabAttr","data-alloy-tabstop")],tx=uc({fields:Zy,name:"tabstopping",active:Qy}),ex=function(){return Zf.config({find:lt.some})},nx=function(t){return Zf.config({find:t.getOpt})},ox=function(t){return Zf.config({find:function(e){return Tr(e.element,t).bind(function(t){return e.getSystem().getByDom(t).toOptional()})}})},rx=Kr("form-component-change"),ix=Kr("form-close"),ux=Kr("form-cancel"),ax=Kr("form-action"),cx=Kr("form-submit"),sx=Kr("form-block"),lx=Kr("form-unblock"),fx=Kr("form-tabchange"),dx=Kr("form-resize"),mx=tinymce.util.Tools.resolve("tinymce.html.Entities"),gx=function(t,e,n,o){var r=px(t,e,n,o);return Yy.sketch(r)},px=function(t,e,n,o){return{dom:hx(n),components:t.toArray().concat([e]),fieldBehaviours:rc(o)}},hx=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},vx=function(t,e){return Yy.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},bx=function(u,a){var t,e,n,o=u.label.map(function(t){return vx(t,a)}),r=function(o){return function(e,n){Ku(n.event.target,"[data-collection-item-value]").each(function(t){o(e,n,t,zr(t,"data-collection-item-value"))})}},i=r(function(t,e,n,o){e.stop(),a.isDisabled()||qo(t,ax,{name:u.name,value:o})}),c=[nr(so(),r(function(t,e,n){dc(n)})),nr(vo(),i),nr(Eo(),i),nr(lo(),r(function(t,e,n){qu(t.element,"."+mh).each(function(t){Di(t,mh)}),Ti(n,mh)})),nr(fo(),r(function(t){qu(t.element,"."+mh).each(function(t){Di(t,mh)})})),dr(r(function(t,e,n,o){qo(t,ax,{name:u.name,value:o})}))],s=function(t,e){return R(Os(t.element,".tox-collection__item"),e)},l=Yy.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==u.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ct},behaviours:rc([mv.config({disabled:a.isDisabled,onDisabled:function(t){s(t,function(t){Ti(t,"tox-collection__item--state-disabled"),Pr(t,"aria-disabled",!0)})},onEnabled:function(t){s(t,function(t){Di(t,"tox-collection__item--state-disabled"),Ur(t,"aria-disabled")})}}),zv(),lg.config({}),Ll.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,t){var e,n,r,i;e=o,n=R(t,function(t){var e=Zh.translate(t.text),n=1===u.columns?'<div class="tox-collection__item-label">'+e+"</div>":"",o='<div class="tox-collection__item-icon">'+t.icon+"</div>",r={_:" "," - ":" ","-":" "},i=e.replace(/\_| \- |\-/g,function(t){return r[t]});return'<div class="tox-collection__item'+(a.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+mx.encodeAllRaw(t.value)+'" title="'+i+'" aria-label="'+i+'">'+o+n+"</div>"}),r="auto"!==u.columns&&1<u.columns?V(n,u.columns):[n],i=R(r,function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}),Nr(e.element,i.join("")),"auto"===u.columns&&Lh(o,5,"tox-collection__item").each(function(t){var e=t.numRows,n=t.numColumns;ig.setGridSize(o,e,n)}),Yo(o,dx)}}),tx.config({}),ig.config((e=u.columns,n="normal",1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===n?".tox-swatches__row":".tox-collection__group",cell:"color"===n?"."+ch:"."+ah}})),fg("collection-events",c)]),eventOrder:((t={})[_o()]=["disabling","alloy.base.behaviour","collection-events"],t)});return gx(o,l,["tox-form__group--collection"],[])},yx=at([qe("data"),tn("inputAttributes",{}),tn("inputStyles",{}),tn("tag","input"),tn("inputClasses",[]),ma("onSetValue"),tn("styles",{}),tn("eventOrder",{}),jl("inputBehaviours",[Ll,hg]),tn("selectOnFocus",!0)]),xx=function(t){return rc([hg.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=nu(e);e.dom.setSelectionRange(0,n.length)}:ut})])},wx=function(t){return{tag:t.tag,attributes:st({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},kx=Xf({name:"Input",configFields:yx(),factory:function(t,e){return{uid:t.uid,dom:wx(t),components:[],behaviours:st(st({},xx(n=t)),Wl(n.inputBehaviours,[Ll.config({store:st(st({mode:"manual"},n.data.map(function(t){return{initialValue:t}}).getOr({})),{getValue:function(t){return nu(t.element)},setValue:function(t,e){nu(t.element)!==e&&ou(t.element,e)}}),onSetValue:n.onSetValue})])),eventOrder:t.eventOrder};var n}}),Sx={},Cx={exports:Sx};gy=undefined,py=Sx,hy=Cx,vy=undefined,function(t){"object"==typeof py&&void 0!==hy?hy.exports=t():"function"==typeof gy&&gy.amd?gy([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=t()}(function(){return function l(i,u,a){function c(e,t){if(!u[e]){if(!i[e]){var n="function"==typeof vy&&vy;if(!t&&n)return n(e,!0);if(s)return s(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var r=u[e]={exports:{}};i[e][0].call(r.exports,function(t){return c(i[e][1][t]||t)},r,r.exports,l,i,u,a)}return u[e].exports}for(var s="function"==typeof vy&&vy,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,n){var o,r,i=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===u||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:u}catch(t){o=u}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,l=[],f=!1,d=-1;function m(){f&&s&&(f=!1,s.length?l=s.concat(l):d=-1,l.length&&g())}function g(){if(!f){var t=c(m);f=!0;for(var e=l.length;e;){for(s=l,l=[];++d<e;)s&&s[d].run();d=-1,e=l.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||f||c(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,f,e){(function(e){function o(){}function u(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],l(t,this)}function r(o,r){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,u._immediateFn(function(){var t,e=1===o._state?r.onFulfilled:r.onRejected;if(null!==e){try{t=e(o._value)}catch(n){return void a(r.promise,n)}i(r.promise,t)}else(1===o._state?i:a)(r.promise,o._value)})):o._deferreds.push(r)}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((o=n,r=e,function(){o.apply(r,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(i){a(t,i)}var o,r}function a(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&u._immediateFn(function(){t._handled||u._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)r(t,t._deferreds[e]);t._deferreds=null}function s(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,a(e,t))})}catch(o){if(n)return;n=!0,a(e,o)}}var t,n;t=this,n=setTimeout,u.prototype["catch"]=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(o);return r(this,new s(t,e,n)),n},u.all=function(t){var c=Array.prototype.slice.call(t);return new u(function(r,i){if(0===c.length)return r([]);var u=c.length;for(var t=0;t<c.length;t++)!function a(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){a(e,t)},i)}c[e]=t,0==--u&&r(c)}catch(o){i(o)}}(t,c[t])})},u.resolve=function(e){return e&&"object"==typeof e&&e.constructor===u?e:new u(function(t){t(e)})},u.reject=function(n){return new u(function(t,e){e(n)})},u.race=function(r){return new u(function(t,e){for(var n=0,o=r.length;n<o;n++)r[n].then(t,e)})},u._immediateFn="function"==typeof e?function(t){e(t)}:function(t){n(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},u._setImmediateFn=function(t){u._immediateFn=t},u._setUnhandledRejectionFn=function(t){u._unhandledRejectionFn=t},void 0!==f&&f.exports?f.exports=u:t.Promise||(t.Promise=u)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(c,t,s){(function(t,e){var o=c("process/browser.js").nextTick,n=Function.prototype.apply,r=Array.prototype.slice,i={},u=0;function a(t,e){this._id=t,this._clearFn=e}s.setTimeout=function(){return new a(n.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new a(n.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},s.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},s._unrefActive=s.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s.setImmediate="function"==typeof t?t:function(t){var e=u++,n=!(arguments.length<2)&&r.call(arguments,1);return i[e]=!0,o(function(){i[e]&&(n?t.apply(null,n):t.call(null),s.clearImmediate(e))}),e},s.clearImmediate="function"==typeof e?e:function(t){delete i[t]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)});var Ox,_x,Tx=Cx.exports.boltExport,Ex=function(t){var n=lt.none(),e=[],o=function(t){r()?u(t):e.push(t)},r=function(){return n.isSome()},i=function(t){dt(t,u)},u=function(e){n.each(function(t){setTimeout(function(){e(t)},0)})};return t(function(t){r()||(n=lt.some(t),i(e),e=[])}),{get:o,map:function(n){return Ex(function(e){o(function(t){e(n(t))})})},isReady:r}},Dx={nu:Ex,pure:function(e){return Ex(function(t){t(e)})}},Bx=function(t){setTimeout(function(){throw t},0)},Fx=function(n){var t=function(t){n().then(t,Bx)};return{map:function(t){return Fx(function(){return n().then(t)})},bind:function(e){return Fx(function(){return n().then(function(t){return e(t).toPromise()})})},anonBind:function(t){return Fx(function(){return n().then(function(){return t.toPromise()})})},toLazy:function(){return Dx.nu(t)},toCached:function(){var t=null;return Fx(function(){return null===t&&(t=n()),t})},toPromise:n,get:t}},Ax=function(t){return Fx(function(){return new Tx(t)})},Mx=function(t){return Fx(function(){return Tx.resolve(t)})},Ix=["input","textarea"],Vx=function(t){var e=mr(t);return A(Ix,e)},Rx=function(t,e){var n=e.getRoot(t).getOr(t.element);Di(n,e.invalidClass),e.notify.each(function(e){Vx(t.element)&&Pr(t.element,"aria-invalid",!1),e.getContainer(t).each(function(t){Nr(t,e.validHtml)}),e.onValid(t)})},Nx=function(e,t,n,o){var r=t.getRoot(e).getOr(e.element);Ti(r,t.invalidClass),t.notify.each(function(t){Vx(e.element)&&Pr(e.element,"aria-invalid",!0),t.getContainer(e).each(function(t){Nr(t,o)}),t.onInvalid(e,o)})},Hx=function(e,t,n){return t.validator.fold(function(){return Mx(gt.value(!0))},function(t){return t.validate(e)})},Px=function(e,n,t){return n.notify.each(function(t){t.onValidate(e)}),Hx(e,n).map(function(t){return e.getSystem().isConnected()?t.fold(function(t){return Nx(e,n,0,t),gt.error(t)},function(t){return Rx(e,n),gt.value(t)}):gt.error("No longer in system")})},zx=/* */Object.freeze({__proto__:null,markValid:Rx,markInvalid:Nx,query:Hx,run:Px,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element);return Bi(n,e.invalidClass)}}),Lx=/* */Object.freeze({__proto__:null,events:function(e,t){return e.validator.map(function(t){return Zo([nr(t.onEvent,function(t){Px(t,e).get(ct)})].concat(t.validateOnLoad?[sr(function(t){Px(t,e).get(ut)})]:[]))}).getOr({})}}),jx=[ze("invalidClass"),tn("getRoot",lt.none),Ze("notify",[tn("aria","alert"),tn("getContainer",lt.none),tn("validHtml",""),ma("onValid"),ma("onInvalid"),ma("onValidate")]),Ze("validator",[ze("validate"),tn("onEvent","input"),tn("validateOnLoad",!0)])],Ux=uc({fields:jx,name:"invalidating",active:Lx,apis:zx,extra:{validation:function(n){return function(t){var e=Ll.getValue(t);return Mx(n(e))}}}}),Wx=/* */Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Gx=[Le("others",Ce(gt.value,Fe()))],Xx=uc({fields:Gx,name:"coupling",apis:Wx,state:/* */Object.freeze({__proto__:null,init:function(){var i={},t=at({});return di({readState:t,getOrCreate:function(n,o,r){var t=Ct(o.others);if(t)return Mt(i,r).getOrThunk(function(){var t=Mt(o.others,r).getOrDie("No information found for coupled component: "+r)(n),e=n.getSystem().build(t);return i[r]=e});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(t,null,2))}})}})}),Yx=at("sink"),qx=at(xf({name:Yx(),overrides:at({dom:{tag:"div"},behaviours:rc([Zs.config({useFixed:w})]),events:Zo([ar(mo()),ar(io()),ar(vo())])})}));(_x=Ox=Ox||{})[_x.HighlightFirst=0]="HighlightFirst",_x[_x.HighlightNone=1]="HighlightNone";var Kx,Jx,$x,Qx,Zx,tw,ew,nw,ow=function(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold(function(){return{anchor:"hotspot",hotspot:n,overrides:o}},function(t){return{anchor:"hotspot",hotspot:n,overrides:o,layouts:t}})},rw=function(t,e,n,o,r,i,u){var a,c,s,l,f,d,m,g,p,h,v=ow(t,n);return(c=v,l=o,f=r,d=u,m=e,g=s=n,p=(0,(a=t).fetch)(g).map(m),h=cw(s,a),p.map(function(t){return t.bind(function(t){return lt.from(Qg.sketch(st(st({},f.menu()),{uid:ni(""),data:t,highlightImmediately:d===Ox.HighlightFirst,onOpenMenu:function(t,e){var n=h().getOrDie();Zs.position(n,c,e),wl.decloak(l)},onOpenSubmenu:function(t,e,n){var o=h().getOrDie();Zs.position(o,{anchor:"submenu",item:e},n),wl.decloak(l)},onRepositionMenu:function(t,e,n){var o=h().getOrDie();Zs.position(o,c,e),dt(n,function(t){Zs.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)})},onEscape:function(){return hg.focus(s),wl.close(l),lt.some(!0)}})))})})).map(function(t){return t.fold(function(){wl.isOpen(o)&&wl.close(o)},function(t){wl.cloak(o),wl.open(o,t),i(o)}),o})},iw=function(t,e,n,o,r,i,u){return wl.close(o),Mx(o)},uw=function(t,e,n,o,r,i){var u=Xx.getCoupled(n,"sandbox");return(wl.isOpen(u)?iw:rw)(t,e,n,u,o,r,i)},aw=function(t,e,n){var o,r,i=Zf.getCurrent(e).getOr(e),u=Ou(t.element);n?Yi(i.element,"min-width",u+"px"):(o=i.element,r=u,Cu.set(o,r))},cw=function(e,t){return e.getSystem().getByUid(t.uid+"-"+Yx()).map(function(t){return function(){return gt.value(t)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return gt.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(e)}})})},sw=function(t){wl.getState(t).each(function(t){Qg.repositionMenus(t)})},lw=function(o,r,i){var u=Ju(),t=cw(r,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:u.id,role:"listbox"}},behaviours:Xl(o.sandboxBehaviours,[Ll.config({store:{mode:"memory",initialValue:r}}),wl.config({onOpen:function(t,e){var n=ow(o,r);u.link(r.element),o.matchWidth&&aw(n.hotspot,e,o.useMinWidth),o.onOpen(n,t,e),i!==undefined&&i.onOpen!==undefined&&i.onOpen(t,e)},onClose:function(t,e){u.unlink(r.element),i!==undefined&&i.onClose!==undefined&&i.onClose(t,e)},isPartOf:function(t,e,n){return Qu(e,n)||Qu(r,n)},getAttachPoint:function(){return t().getOrDie()}}),Zf.config({find:function(t){return wl.getState(t).bind(function(t){return Zf.getCurrent(t)})}}),lc.config({channels:st(st({},_l({isExtraPart:l})),El({doReposition:sw}))})])}},fw=function(t){var e=Xx.getCoupled(t,"sandbox");sw(e)},dw=function(){return[tn("sandboxClasses",[]),Gl("sandboxBehaviours",[Zf,lc,wl,Ll])]},mw=at([ze("dom"),ze("fetch"),ma("onOpen"),ga("onExecute"),tn("getHotspot",lt.some),tn("getAnchorOverrides",at({})),qc(),jl("dropdownBehaviours",[Eg,Xx,ig,hg]),ze("toggleClass"),tn("eventOrder",{}),qe("lazySink"),tn("matchWidth",!1),tn("useMinWidth",!1),qe("role")].concat(dw())),gw=at([yf({schema:[la()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),qx()]),pw=Yf({name:"Dropdown",configFields:mw(),partFields:gw(),factory:function(e,t,n,o){var r,i,u=function(t){wl.getState(t).each(function(t){Qg.highlightPrimary(t)})},a={expand:function(t){Eg.isOn(t)||uw(e,function(t){return t},t,o,ut,Ox.HighlightNone).get(ut)},open:function(t){Eg.isOn(t)||uw(e,function(t){return t},t,o,ut,Ox.HighlightFirst).get(ut)},isOpen:Eg.isOn,close:function(t){Eg.isOn(t)&&uw(e,function(t){return t},t,o,ut,Ox.HighlightFirst).get(ut)},repositionMenus:function(t){Eg.isOn(t)&&fw(t)}},c=function(t,e){return Ko(t),lt.some(!0)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Wl(e.dropdownBehaviours,[Eg.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),Xx.config({others:{sandbox:function(t){return lw(e,t,{onOpen:function(){return Eg.on(t)},onClose:function(){return Eg.off(t)}})}}}),ig.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t,e){var n;return pw.isOpen(t)?(n=Xx.getCoupled(t,"sandbox"),u(n)):pw.open(t),lt.some(!0)},onEscape:function(t,e){return pw.isOpen(t)?(pw.close(t),lt.some(!0)):lt.none()}}),hg.config({})]),events:Bg(lt.some(function(t){uw(e,function(t){return t},t,o,u,Ox.HighlightFirst).get(ut)})),eventOrder:st(st({},e.eventOrder),((r={})[_o()]=["disabling","toggling","alloy.base.behaviour"],r)),apis:a,domModification:{attributes:st(st({"aria-haspopup":"true"},e.role.fold(function(){return{}},function(t){return{role:t}})),"button"===e.dom.tag?{type:(i="type",Mt(e.dom,"attributes").bind(function(t){return Mt(t,i)}).getOr("button"))}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),hw=Kr("color-input-change"),vw=Kr("color-swatch-change"),bw=Kr("color-picker-cancel"),yw=function(n,e,o){var r,i,t=Yy.parts.field({factory:kx,inputClasses:["tox-textfield"],onSetValue:function(t){return Ux.run(t).get(ut)},inputBehaviours:rc([mv.config({disabled:e.providers.isDisabled}),zv(),tx.config({}),Ux.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return Sr(t.element)},notify:{onValid:function(t){var e=Ll.getValue(t);qo(t,hw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Ll.getValue(t);if(0===e.length)return Mx(gt.value(!0));var n=mn.fromTag("span");Yi(n,"background-color",e);var o=Qi(n,"background-color").fold(function(){return gt.error("blah")},function(t){return gt.value(e)});return Mx(o)}}})]),selectOnFocus:!1}),u=n.label.map(function(t){return vx(t,e.providers)}),a=function(t,e){qo(t,vw,{value:e})},c=mp((r={dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Ha,Na,ja]},onLtr:function(){return[Na,Ha,ja]}},components:[],fetch:Yb(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,n){c.getOpt(t).each(function(e){"custom"===n?o.colorPicker(function(t){t.fold(function(){return Yo(e,bw)},function(t){a(e,t),jb(t)})},"#ffffff"):a(e,"remove"===n?"":n)})}},i=e,pw.sketch({dom:r.dom,components:r.components,toggleClass:"mce-active",dropdownBehaviours:rc([jv(i.providers.isDisabled),zv(),Wy.config({}),tx.config({})]),layouts:r.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:i.getSink,fetch:function(e){return Ax(function(t){return r.fetch(t)}).map(function(t){return lt.from(wy(Pt(Qb(Kr("menu-value"),t,function(t){r.onItemAction(e,t)},r.columns,r.presets,ih.CLOSE_ON_EXECUTE,l,i.providers),{movement:ty(r.columns,r.presets)})))})},parts:{menu:xh(0,0,r.presets)}})));return Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:u.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[t,c.asSpec()]}]),fieldBehaviours:rc([fg("form-field-events",[nr(hw,function(t,e){c.getOpt(t).each(function(t){Yi(t.element,"background-color",e.event.color)}),qo(t,rx,{name:n.name})}),nr(vw,function(e,n){Yy.getField(e).each(function(t){Ll.setValue(t,n.event.value),Zf.getCurrent(e).each(hg.focus)})}),nr(bw,function(e,t){Yy.getField(e).each(function(t){Zf.getCurrent(e).each(hg.focus)})})])])})},xw=function(t,e,n){return{hue:t,saturation:e,value:n}},ww=Kr("rgb-hex-update"),kw=Kr("slider-update"),Sw=Kr("palette-update"),Cw=xf({schema:[ze("dom")],name:"label"}),Ow=function(e){return xf({name:e+"-edge",overrides:function(t){return t.model.manager.edgeActions[e].fold(function(){return{}},function(o){return{events:Zo([or(eo(),function(t,e,n){return o(t,n)},[t]),or(io(),function(t,e,n){return o(t,n)},[t]),or(uo(),function(t,e,n){n.mouseIsDown.get()&&o(t,n)},[t])])}})}})},_w=Ow("top-left"),Tw=Ow("top"),Ew=Ow("top-right"),Dw=Ow("right"),Bw=Ow("bottom-right"),Fw=Ow("bottom"),Aw=Ow("bottom-left"),Mw=[Cw,Ow("left"),Dw,Tw,Fw,_w,Ew,Aw,Bw,bf({name:"thumb",defaults:at({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:Zo([ir(eo(),t,"spectrum"),ir(no(),t,"spectrum"),ir(oo(),t,"spectrum"),ir(io(),t,"spectrum"),ir(uo(),t,"spectrum"),ir(co(),t,"spectrum")])}}}),bf({schema:[ln("mouseIsDown",function(){return fn(!1)})],name:"spectrum",overrides:function(n){var o=n.model.manager,r=function(e,t){return o.getValueFromEvent(t).map(function(t){return o.setValueFrom(e,n,t)})};return{behaviours:rc([ig.config({mode:"special",onLeft:function(t){return o.onLeft(t,n)},onRight:function(t){return o.onRight(t,n)},onUp:function(t){return o.onUp(t,n)},onDown:function(t){return o.onDown(t,n)}}),hg.config({})]),events:Zo([nr(eo(),r),nr(no(),r),nr(io(),r),nr(uo(),function(t,e){n.mouseIsDown.get()&&r(t,e)})])}}})],Iw=at("slider.change.value"),Vw=function(t){var e=t.event.raw;return-1===e.type.indexOf("touch")?e.clientX!==undefined?lt.some(e).map(function(t){return xu(t.clientX,t.clientY)}):lt.none():e.touches!==undefined&&1===e.touches.length?lt.some(e.touches[0]).map(function(t){return xu(t.clientX,t.clientY)}):lt.none()},Rw=function(t){return t.model.minX},Nw=function(t){return t.model.minY},Hw=function(t){return t.model.minX-1},Pw=function(t){return t.model.minY-1},zw=function(t){return t.model.maxX},Lw=function(t){return t.model.maxY},jw=function(t){return t.model.maxX+1},Uw=function(t){return t.model.maxY+1},Ww=function(t,e,n){return e(t)-n(t)},Gw=function(t){return Ww(t,zw,Rw)},Xw=function(t){return Ww(t,Lw,Nw)},Yw=function(t){return Gw(t)/2},qw=function(t){return Xw(t)/2},Kw=function(t){return t.stepSize},Jw=function(t){return t.snapToGrid},$w=function(t){return t.snapStart},Qw=function(t){return t.rounded},Zw=function(t,e){return t[e+"-edge"]!==undefined},tk=function(t){return Zw(t,"left")},ek=function(t){return Zw(t,"right")},nk=function(t){return Zw(t,"top")},ok=function(t){return Zw(t,"bottom")},rk=function(t){return t.model.value.get()},ik=function(t){return{x:t}},uk=function(t){return{y:t}},ak=function(t,e){return{x:t,y:e}},ck=function(t,e){qo(t,Iw(),{value:e})},sk=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},lk=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},fk=function(t,e,n){return Math.max(e,Math.min(n,t))},dk=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?e-1:e,p=l?n+1:n;if(r<f)return g;if(d<r)return p;var h,v,b,y,x,w,k,S=(x=r,w=f,k=d,Math.min(k,Math.max(x,w))-w),C=fk(S/m*o+e,g,p);return u&&e<=C&&C<=n?(h=C,v=e,b=n,y=i,a.fold(function(){var t=h-v,e=Math.round(t/y)*y;return fk(v+e,v-1,b+1)},function(t){var e=(h-t)%y,n=Math.round(e/y),o=Math.floor((h-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)})):c?Math.round(C):C},mk=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?u?a:l:(r-e)/o*c},gk="left",pk=function(t){return t.element.dom.getBoundingClientRect()},hk=function(t,e){return t[e]},vk=function(t){var e=pk(t);return hk(e,gk)},bk=function(t){var e=pk(t);return hk(e,"right")},yk=function(t){var e=pk(t);return hk(e,"top")},xk=function(t){var e=pk(t);return hk(e,"bottom")},wk=function(t){var e=pk(t);return hk(e,"width")},kk=function(t){var e=pk(t);return hk(e,"height")},Sk=function(t,e,n){return(t+e)/2-n},Ck=function(t,e){var n=pk(t),o=pk(e),r=hk(n,gk),i=hk(n,"right"),u=hk(o,gk);return Sk(r,i,u)},Ok=function(t,e){var n=pk(t),o=pk(e),r=hk(n,"top"),i=hk(n,"bottom"),u=hk(o,"top");return Sk(r,i,u)},_k=function(t,e){qo(t,Iw(),{value:e})},Tk=function(t){return{x:t}},Ek=function(t,e,n){var o={min:Rw(e),max:zw(e),range:Gw(e),value:n,step:Kw(e),snap:Jw(e),snapStart:$w(e),rounded:Qw(e),hasMinEdge:tk(e),hasMaxEdge:ek(e),minBound:vk(t),maxBound:bk(t),screenRange:wk(t)};return dk(o)},Dk=function(i){return function(t,e){return n=t,r=(0<i?lk:sk)(rk(o=e).x,Rw(o),zw(o),Kw(o)),_k(n,Tk(r)),lt.some(r).map(w);var n,o,r}},Bk=function(t,e,n,o,r,i){var u,a,c,s,l,f,d,m,g,p=(a=i,c=n,s=o,l=r,f=wk(u=e),d=s.bind(function(t){return lt.some(Ck(t,u))}).getOr(0),m=l.bind(function(t){return lt.some(Ck(t,u))}).getOr(f),g={min:Rw(a),max:zw(a),range:Gw(a),value:c,hasMinEdge:tk(a),hasMaxEdge:ek(a),minBound:vk(u),minOffset:0,maxBound:bk(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},mk(g));return vk(e)-vk(t)+p},Fk=Dk(-1),Ak=Dk(1),Mk=lt.none,Ik=lt.none,Vk={"top-left":lt.none(),top:lt.none(),"top-right":lt.none(),right:lt.some(function(t,e){ck(t,ik(jw(e)))}),"bottom-right":lt.none(),bottom:lt.none(),"bottom-left":lt.none(),left:lt.some(function(t,e){ck(t,ik(Hw(e)))})},Rk=/* */Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Ek(t,e,n),r=Tk(o);return _k(t,r),o},setToMin:function(t,e){var n=Rw(e);_k(t,Tk(n))},setToMax:function(t,e){var n=zw(e);_k(t,Tk(n))},findValueOfOffset:Ek,getValueFromEvent:function(t){return Vw(t).map(function(t){return t.left})},findPositionOfValue:Bk,setPositionFromValue:function(t,e,n,o){var r=rk(n),i=Bk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),u=Ou(e.element)/2;Yi(e.element,"left",i-u+"px")},onLeft:Fk,onRight:Ak,onUp:Mk,onDown:Ik,edgeActions:Vk}),Nk=function(t,e){qo(t,Iw(),{value:e})},Hk=function(t){return{y:t}},Pk=function(t,e,n){var o={min:Nw(e),max:Lw(e),range:Xw(e),value:n,step:Kw(e),snap:Jw(e),snapStart:$w(e),rounded:Qw(e),hasMinEdge:nk(e),hasMaxEdge:ok(e),minBound:yk(t),maxBound:xk(t),screenRange:kk(t)};return dk(o)},zk=function(i){return function(t,e){return n=t,r=(0<i?lk:sk)(rk(o=e).y,Nw(o),Lw(o),Kw(o)),Nk(n,Hk(r)),lt.some(r).map(w);var n,o,r}},Lk=function(t,e,n,o,r,i){var u,a,c,s,l,f,d,m,g,p=(a=i,c=n,s=o,l=r,f=kk(u=e),d=s.bind(function(t){return lt.some(Ok(t,u))}).getOr(0),m=l.bind(function(t){return lt.some(Ok(t,u))}).getOr(f),g={min:Nw(a),max:Lw(a),range:Xw(a),value:c,hasMinEdge:nk(a),hasMaxEdge:ok(a),minBound:yk(u),minOffset:0,maxBound:xk(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},mk(g));return yk(e)-yk(t)+p},jk=lt.none,Uk=lt.none,Wk=zk(-1),Gk=zk(1),Xk={"top-left":lt.none(),top:lt.some(function(t,e){ck(t,uk(Pw(e)))}),"top-right":lt.none(),right:lt.none(),"bottom-right":lt.none(),bottom:lt.some(function(t,e){ck(t,uk(Uw(e)))}),"bottom-left":lt.none(),left:lt.none()},Yk=/* */Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Pk(t,e,n),r=Hk(o);return Nk(t,r),o},setToMin:function(t,e){var n=Nw(e);Nk(t,Hk(n))},setToMax:function(t,e){var n=Lw(e);Nk(t,Hk(n))},findValueOfOffset:Pk,getValueFromEvent:function(t){return Vw(t).map(function(t){return t.top})},findPositionOfValue:Lk,setPositionFromValue:function(t,e,n,o){var r=rk(n),i=Lk(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=vu(e.element)/2;Yi(e.element,"top",i-u+"px")},onLeft:jk,onRight:Uk,onUp:Wk,onDown:Gk,edgeActions:Xk}),qk=function(t,e){qo(t,Iw(),{value:e})},Kk=function(t,e){return{x:t,y:e}},Jk=function(c,s){return function(t,e){return o=t,r=e,i=0<c?lk:sk,u=(n=s)?rk(r).x:i(rk(r).x,Rw(r),zw(r),Kw(r)),a=n?i(rk(r).y,Nw(r),Lw(r),Kw(r)):rk(r).y,qk(o,Kk(u,a)),lt.some(u).map(w);var n,o,r,i,u,a}},$k=Vw,Qk=Jk(-1,!1),Zk=Jk(1,!1),tS=Jk(-1,!0),eS=Jk(1,!0),nS={"top-left":lt.some(function(t,e){ck(t,ak(Hw(e),Pw(e)))}),top:lt.some(function(t,e){ck(t,ak(Yw(e),Pw(e)))}),"top-right":lt.some(function(t,e){ck(t,ak(jw(e),Pw(e)))}),right:lt.some(function(t,e){ck(t,ak(jw(e),qw(e)))}),"bottom-right":lt.some(function(t,e){ck(t,ak(jw(e),Uw(e)))}),bottom:lt.some(function(t,e){ck(t,ak(Yw(e),Uw(e)))}),"bottom-left":lt.some(function(t,e){ck(t,ak(Hw(e),Uw(e)))}),left:lt.some(function(t,e){ck(t,ak(Hw(e),qw(e)))})},oS=/* */Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Ek(t,e,n.left),r=Pk(t,e,n.top),i=Kk(o,r);return qk(t,i),i},setToMin:function(t,e){var n=Rw(e),o=Nw(e);qk(t,Kk(n,o))},setToMax:function(t,e){var n=zw(e),o=Lw(e);qk(t,Kk(n,o))},getValueFromEvent:$k,setPositionFromValue:function(t,e,n,o){var r=rk(n),i=Bk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),u=Lk(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=Ou(e.element)/2,c=vu(e.element)/2;Yi(e.element,"left",i-a+"px"),Yi(e.element,"top",u-c+"px")},onLeft:Qk,onRight:Zk,onUp:tS,onDown:eS,edgeActions:nS}),rS=Yf({name:"Slider",configFields:[tn("stepSize",1),tn("onChange",ut),tn("onChoose",ut),tn("onInit",ut),tn("onDragStart",ut),tn("onDragEnd",ut),tn("snapToGrid",!1),tn("rounded",!0),qe("snapStart"),Le("model",Be("mode",{x:[tn("minX",0),tn("maxX",100),ln("value",function(t){return fn(t.mode.minX)}),ze("getInitialValue"),va("manager",Rk)],y:[tn("minY",0),tn("maxY",100),ln("value",function(t){return fn(t.mode.minY)}),ze("getInitialValue"),va("manager",Yk)],xy:[tn("minX",0),tn("maxX",100),tn("minY",0),tn("maxY",100),ln("value",function(t){return fn({x:t.mode.minX,y:t.mode.minY})}),ze("getInitialValue"),va("manager",oS)]})),jl("sliderBehaviours",[ig,Ll]),ln("mouseIsDown",function(){return fn(!1)})],partFields:Mw,factory:function(i,t,e,n){var o,u=function(t){return Mf(t,i,"thumb")},a=function(t){return Mf(t,i,"spectrum")},r=function(t){return Af(t,i,"left-edge")},c=function(t){return Af(t,i,"right-edge")},s=function(t){return Af(t,i,"top-edge")},l=function(t){return Af(t,i,"bottom-edge")},f=i.model,d=f.manager,m=function(t,e){d.setPositionFromValue(t,e,i,{getLeftEdge:r,getRightEdge:c,getTopEdge:s,getBottomEdge:l,getSpectrum:a})},g=function(t,e){f.value.set(e);var n=u(t);return m(t,n),i.onChange(t,n,e),lt.some(!0)},p=function(n){var t=i.mouseIsDown.get();i.mouseIsDown.set(!1),t&&Af(n,i,"thumb").each(function(t){var e=f.value.get();i.onChoose(n,t,e)})},h=function(t,e){e.stop(),i.mouseIsDown.set(!0),i.onDragStart(t,u(t))},v=function(t,e){e.stop(),i.onDragEnd(t,u(t)),p(t)};return{uid:i.uid,dom:i.dom,components:t,behaviours:Wl(i.sliderBehaviours,[ig.config({mode:"special",focusIn:function(t){return Af(t,i,"spectrum").map(ig.focusIn).map(w)}}),Ll.config({store:{mode:"manual",getValue:function(t){return f.value.get()}}}),lc.config({channels:((o={})[Cl()]={onReceive:p},o)})]),events:Zo([nr(Iw(),function(t,e){g(t,e.event.value)}),sr(function(t,e){var n=f.getInitialValue();f.value.set(n);var o=u(t);m(t,o);var r=a(t);i.onInit(t,o,r,f.value.get())}),nr(eo(),h),nr(oo(),v),nr(io(),h),nr(co(),v)]),apis:{resetToMin:function(t){d.setToMin(t,i)},resetToMax:function(t){d.setToMax(t,i)},changeValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),iS=[jl("formBehaviours",[Ll])],uS=function(t){return"<alloy.field."+t+">"},aS=function(o,t){return{uid:o.uid,dom:o.dom,components:t,behaviours:Wl(o.formBehaviours,[Ll.config({store:{mode:"manual",getValue:function(t){var e=Vf(t,o);return Tt(e,function(t,r){return t().bind(function(t){var e,n,o=Zf.getCurrent(t);return e=o,n=new Error("Cannot find a current component to extract the value from for form part '"+r+"': "+Gr(t.element)),e.fold(function(){return gt.error(n)},gt.value)}).map(Ll.getValue)})},setValue:function(n,t){_t(t,function(e,t){Af(n,o,t).each(function(t){Zf.getCurrent(t).each(function(t){Ll.setValue(t,e)})})})}}})]),apis:{getField:function(t,e){return Af(t,o,e).bind(Zf.getCurrent)}}}},cS={getField:li(function(t,e,n){return t.getField(e,n)}),sketch:function(t){var n,e=(n=[],{field:function(t,e){return n.push(t),Tf("form",uS(t),e)},record:function(){return n}}),o=t(e),r=e.record(),i=R(r,function(t){return bf({name:t,pname:uS(t)})});return jf("form",iS,i,aS,o)}},sS=Kr("valid-input"),lS=Kr("invalid-input"),fS=Kr("validating-input"),dS="colorcustom.rgb.",mS=function(d,m,g,p){var h=function(t,e,n,o,r){var i,u,a=d(dS+"range"),c=[Yy.parts.label({dom:{tag:"label",innerHtml:n,attributes:{"aria-label":o}}}),Yy.parts.field({data:r,factory:kx,inputAttributes:st({type:"text"},"hex"===e?{"aria-live":"polite"}:{}),inputClasses:[m("textfield")],inputBehaviours:rc([(i=e,u=t,Ux.config({invalidClass:m("invalid"),notify:{onValidate:function(t){qo(t,fS,{type:i})},onValid:function(t){qo(t,sS,{type:i,value:Ll.getValue(t)})},onInvalid:function(t){qo(t,lS,{type:i,value:Ll.getValue(t)})}},validator:{validate:function(t){var e=Ll.getValue(t),n=u(e)?gt.value(!0):gt.error(d("aria.input.invalid"));return Mx(n)},validateOnLoad:!1}})),tx.config({})]),onSetValue:function(t){Ux.isInvalid(t)&&Ux.run(t).get(ut)}})],s="hex"!==e?[Yy.parts["aria-descriptor"]({text:a})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}},v=function(t,e){var n=e.red,o=e.green,r=e.blue;Ll.setValue(t,{red:n,green:o,blue:r})},b=mp({dom:{tag:"div",classes:[m("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),y=function(t,e){b.getOpt(t).each(function(t){Yi(t.element,"background-color","#"+e.value)})};return Xf({factory:function(){var n={red:fn(lt.some(255)),green:fn(lt.some(255)),blue:fn(lt.some(255)),hex:fn(lt.some("ffffff"))},o=function(t){return n[t].get()},i=function(t,e){n[t].set(e)},r=function(t){var e=t.red,n=t.green,o=t.blue;i("red",lt.some(e)),i("green",lt.some(n)),i("blue",lt.some(o))},e=function(t,e){var n=e.event;"hex"!==n.type?i(n.type,lt.none()):p(t)},u=function(r,t,e){var n=parseInt(e,10);i(t,lt.some(n)),o("red").bind(function(n){return o("green").bind(function(e){return o("blue").map(function(t){return Ob(n,e,t,1)})})}).each(function(t){var e,n,o=(e=r,n=yb(t),cS.getField(e,"hex").each(function(t){hg.isFocused(t)||Ll.setValue(e,{hex:n.value})}),n);y(r,o)})},a=function(t,e){var n=e.event;"hex"===n.type?function(t,e){g(t);var n=mb(e);i("hex",lt.some(e));var o=Eb(n);v(t,o),r(o),qo(t,ww,{hex:n}),y(t,n)}(t,n.value):u(t,n.type,n.value)},t=function(t){return{label:d(dS+t+".label"),description:d(dS+t+".description")}},c=t("red"),s=t("green"),l=t("blue"),f=t("hex");return Pt(cS.sketch(function(t){return{dom:{tag:"form",classes:[m("rgb-form")],attributes:{"aria-label":d("aria.color.picker")}},components:[t.field("red",Yy.sketch(h(_b,"red",c.label,c.description,255))),t.field("green",Yy.sketch(h(_b,"green",s.label,s.description,255))),t.field("blue",Yy.sketch(h(_b,"blue",l.label,l.description,255))),t.field("hex",Yy.sketch(h(hb,"hex",f.label,f.description,"ffffff"))),b.asSpec()],formBehaviours:rc([Ux.config({invalidClass:m("form-invalid")}),fg("rgb-form-events",[nr(sS,a),nr(lS,e),nr(fS,e)])])}}),{apis:{updateHex:function(t,e){var n,o;Ll.setValue(t,{hex:e.value}),n=t,o=Eb(e),v(n,o),r(o),y(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},gS=function(t,o){var r=rS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[o("sv-palette-spectrum")]}}),i=rS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette-thumb")],innerHtml:"<div class="+o("sv-palette-inner-thumb")+' role="presentation"></div>'}}),u=function(t,e){var n,o,r=t.width,i=t.height,u=t.getContext("2d");null!==u&&(u.fillStyle=e,u.fillRect(0,0,r,i),(n=u.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),u.fillStyle=n,u.fillRect(0,0,r,i),(o=u.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),u.fillStyle=o,u.fillRect(0,0,r,i))};return Xf({factory:function(t){var e=at({x:0,y:0}),n=rc([Zf.config({find:lt.some}),hg.config({})]);return rS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette")]},model:{mode:"xy",getInitialValue:e},rounded:!1,components:[r,i],onChange:function(t,e,n){qo(t,Sw,{value:n})},onInit:function(t,e,n,o){u(n.element.dom,Bb(Fb))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element.dom,u(r,Bb(o))}},extraApis:{}})},pS=function(f,d){return Xf({name:"ColourPicker",configFields:[ze("dom"),tn("onValidHex",ut),tn("onInvalidHex",ut)],factory:function(t){var a,v,e,n,o,r=mS(f,d,t.onValidHex,t.onInvalidHex),i=gS(0,d),b={paletteRgba:fn(Fb)},u=mp(i.sketch({})),c=mp(r.sketch({})),s=function(t,n){u.getOpt(t).each(function(t){var e=Eb(n);b.paletteRgba.set(e),i.setRgba(t,e)})},l=function(t,e){c.getOpt(t).each(function(t){r.updateHex(t,e)})},y=function(e,n,t){dt(t,function(t){t(e,n)})};return{uid:t.uid,dom:t.dom,components:[u.asSpec(),(e=d,n=rS.parts.spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=rS.parts.thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}}),rS.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:at({y:0})},components:[n,o],sliderBehaviours:rc([hg.config({})]),onChange:function(t,e,n){qo(t,kw,{value:n})}})),c.asSpec()],behaviours:rc([fg("colour-picker-events",[nr(Sw,(v=[l],function(t,e){var n,o,r,i,u,a,c,s,l,f=e.event.value,d=b.paletteRgba.get(),m=(i=r=0,u=(n=d).red/255,a=n.green/255,c=n.blue/255,s=Math.min(u,Math.min(a,c)),l=Math.max(u,Math.max(a,c)),s===l?xw(0,0,100*(i=s)):(r=60*((r=u===s?3:c===s?1:5)-(u===s?a-c:c===s?u-a:c-u)/(l-s)),o=(l-s)/l,i=l,xw(Math.round(r),Math.round(100*o),Math.round(100*i)))),g=xw(m.hue,f.x,100-f.y),p=Tb(g),h=yb(p);y(t,h,v)})),nr(kw,(a=[s,l],function(t,e){var n,o,r,i=e.event.value,u=(n=i.y,o=xw((100-n)/100*360,100,100),r=Tb(o),yb(r));y(t,u,a)}))]),Zf.config({find:function(t){return c.getOpt(t)}}),ig.config({mode:"acyclic"})])}}})},hS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},vS=function(t){return hS[t]},bS=tinymce.util.Tools.resolve("tinymce.Resource"),yS=at([tn("field1Name","field1"),tn("field2Name","field2"),tn("field3Name","field3"),pa("onOptionChange"),Gl("defaultValueBehaviours",[Zf,Ll])]),xS=function(t){return bf({factory:Yy,name:t})},wS=at([xS("field1"),(Kx=["field1"],bf({factory:Yy,name:"field2",overrides:function(o){return{fieldBehaviours:rc([fg("field-multi-behaviour",[nr(ho(),function(e){var n=[];Kx.forEach(function(t){return Af(e,o,t).bind(Zf.getCurrent).each(function(t){n.push(t)})}),o.onOptionChange(e,n)})])])}}})),xS("field3")]),kS=Yf({name:"FormDefaultValue",configFields:yS(),partFields:wS(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Xl(o.defaultValueBehaviours,[Zf.config({find:lt.some}),Ll.config({store:{mode:"manual",getValue:function(t){var e=Nf(t,o,["field1","field2","field3"]),n={};return n[o.field1Name]=Ll.getValue(e.field1()),n[o.field2Name]=Ll.getValue(e.field2()),n[o.field3Name]=Ll.getValue(e.field3()),n},setValue:function(t,e){var n=Nf(t,o,["field1","field2","field3"]);Vt(e,o.field1Name)&&Ll.setValue(n.field1(),e[o.field1Name]),Vt(e,o.field2Name)&&Ll.setValue(n.field2(),e[o.field2Name]),Vt(e,o.field3Name)&&Ll.setValue(n.field3(),e[o.field3Name])}}})]),apis:{getField1:function(t){return Af(t,o,"field1")},getField2:function(t){return Af(t,o,"field2")},getField3:function(t){return Af(t,o,"field3")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getField3:function(t,e){return t.getField3(e)}}}),SS=Xf({name:"HtmlSelect",configFields:[ze("options"),jl("selectBehaviours",[hg,Ll]),tn("selectClasses",[]),tn("selectAttributes",{}),qe("data")],factory:function(n,t){var e=R(n.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text,attributes:{selected:t.selected?"selected":""}}}}),o=n.data.map(function(t){return Jt("initialValue",t)}).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:e,behaviours:Wl(n.selectBehaviours,[hg.config({}),Ll.config({store:st({mode:"manual",getValue:function(t){return nu(t.element)},setValue:function(t,e){L(n.options,function(t){return t.value===e}).isSome()&&ou(t.element,e)}},o)}),lg.config({})])}}}),CS=tinymce.util.Tools.resolve("tinymce.util.Tools"),OS=le([tn("preprocess",ct),tn("postprocess",ct)]),_S=function(t,e,n){return Ll.config(Pt({store:{mode:"manual",getValue:e,setValue:n}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))},TS=function(t,e,n){return _S(t,function(t){return e(t.element)},function(t,e){return n(t.element,e)})},ES=function(r,t){var i=Te("RepresentingConfigs.memento processors",OS,t);return Ll.config({store:{mode:"manual",getValue:function(t){var e=r.get(t),n=Ll.getValue(e);return i.postprocess(n)},setValue:function(t,e){var n=i.preprocess(e),o=r.get(t);Ll.setValue(o,n)}}})},DS=_S,BS=function(t){return TS(t,Rr,Nr)},FS=function(t){return Ll.config({store:{mode:"memory",initialValue:t}})},AS=function(i,u){var e=function(t,e){e.stop()},n=function(t){return function(e,n){dt(t,function(t){t(e,n)})}},o=function(t,e){var n;mv.isDisabled(t)||(n=e.event.raw,a(t,n.dataTransfer.files))},r=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(t,e){var n,o,r;Ll.setValue(t,(n=e,o=u,r=CS.explode(o.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),H($(n),function(e){return M(r,function(t){return kn(e.name,"."+t)})}))),qo(t,rx,{name:i.name})},c=mp({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:rc([fg("input-file-events",[ar(vo()),ar(Eo())])])}),t=i.label.map(function(t){return vx(t,u)}),s=Yy.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:rc([FS([]),ex(),mv.config({}),Eg.config({toggleClass:"dragenter",toggleOnExecute:!1}),fg("dropzone-events",[nr("dragenter",n([e,Eg.toggle])),nr("dragleave",n([e,Eg.toggle])),nr("dragover",e),nr("drop",n([e,o])),nr(ho(),r)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:u.translate("Drop an image here")}},dp.sketch({dom:{tag:"button",innerHtml:u.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(t){c.get(t).element.dom.click()},buttonBehaviours:rc([tx.config({}),jv(u.isDisabled),zv()])})]}]}}}});return gx(t,s,["tox-form__group--stretched"],[])},MS=at([tn("field1Name","field1"),tn("field2Name","field2"),pa("onTypeChange"),Gl("fieldTypeBehaviours",[Zf,Ll])]),IS=at([(Jx=["field2"],bf({factory:Yy,name:"field1",overrides:function(o){return{fieldBehaviours:rc([fg("field-type-behaviour",[nr(ho(),function(e){var n=[];Jx.forEach(function(t){return Af(e,o,t).bind(Zf.getCurrent).each(function(t){n.push(t)})}),o.onTypeChange(e,n)})])])}}})),bf({factory:Yy,name:"field2"})]),VS=Yf({name:"FormFieldType",configFields:MS(),partFields:IS(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Xl(o.fieldTypeBehaviours,[Zf.config({find:lt.some}),Ll.config({store:{mode:"manual",getValue:function(t){var e=Nf(t,o,["field1","field2"]),n={};return n[o.field1Name]=Ll.getValue(e.field1()),n[o.field2Name]=Ll.getValue(e.field2()),n},setValue:function(t,e){var n=Nf(t,o,["field1","field2"]);Vt(e,o.field1Name)&&Ll.setValue(n.field1(),e[o.field1Name]),Vt(e,o.field2Name)&&Ll.setValue(n.field2(),e[o.field2Name])}}})]),apis:{getField1:function(t){return Af(t,o,"field1")},getField2:function(t){return Af(t,o,"field2")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)}}}),RS=Kr("alloy-fake-before-tabstop"),NS=Kr("alloy-fake-after-tabstop"),HS=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:rc([hg.config({ignore:!0}),tx.config({})])}},PS=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[HS([RS]),t,HS([NS])],behaviours:rc([ox(1)])}},zS=function(t,e){qo(t,mo(),{raw:{which:9,shiftKey:e}})},LS=function(t,e){var n=e.element;Bi(n,RS)?zS(t,!0):Bi(n,NS)&&zS(t,!1)},jS=function(t){return Ty(t,["."+RS,"."+NS].join(","),l)},US=!(jn().browser.isIE()||jn().browser.isEdge()),WS=function(t,e){var o,r,n=US&&t.sandboxed,i=st(st({},t.label.map(function(t){return{title:t}}).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),u=(o=n,r=fn(""),{getValue:function(t){return r.get()},setValue:function(t,e){var n;o?Pr(t.element,"srcdoc",e):(Pr(t.element,"src","javascript:''"),(n=t.element.dom.contentWindow.document).open(),n.write(e),n.close()),r.set(e)}}),a=t.label.map(function(t){return vx(t,e)}),c=Yy.parts.field({factory:{sketch:function(t){return PS({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:rc([tx.config({}),hg.config({}),DS(lt.none(),u.getValue,u.setValue)])})}}});return gx(a,c,["tox-form__group--stretched"],[])},GS=function(t,e){return qS(document.createElement("canvas"),t,e)},XS=function(t){var e=GS(t.width,t.height);return YS(e).drawImage(t,0,0),e},YS=function(t){return t.getContext("2d")},qS=function(t,e,n){return t.width=e,t.height=n,t},KS=function(t){return t.naturalWidth||t.width},JS=function(t){return t.naturalHeight||t.height},$S=window.Promise?window.Promise:($x=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],nw(t,tw(ZS,this),tw(tC,this))},Qx=window,Zx=$x.immediateFn||"function"==typeof Qx.setImmediate&&Qx.setImmediate||function(t){return setTimeout(t,1)},tw=function(n,o){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(o,t)}},ew=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},nw=function(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(r){if(o)return;o=!0,n(r)}},$x.prototype["catch"]=function(t){return this.then(null,t)},$x.prototype.then=function(n,o){var r=this;return new $x(function(t,e){QS.call(r,new nC(n,o,t,e))})},$x.all=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var c=Array.prototype.slice.call(1===t.length&&ew(t[0])?t[0]:t);return new $x(function(r,i){if(0===c.length)return r([]);for(var u=c.length,a=function(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){a(e,t)},i)}c[e]=t,0==--u&&r(c)}catch(o){i(o)}},t=0;t<c.length;t++)a(t,c[t])})},$x.resolve=function(e){return e&&"object"==typeof e&&e.constructor===$x?e:new $x(function(t){t(e)})},$x.reject=function(n){return new $x(function(t,e){e(n)})},$x.race=function(r){return new $x(function(t,e){for(var n=0,o=r;n<o.length;n++)o[n].then(t,e)})},$x);function QS(o){var r=this;null!==this._state?Zx(function(){var t,e=r._state?o.onFulfilled:o.onRejected;if(null!==e){try{t=e(r._value)}catch(n){return void o.reject(n)}o.resolve(t)}else(r._state?o.resolve:o.reject)(r._value)}):this._deferreds.push(o)}function ZS(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void nw(tw(e,t),tw(ZS,this),tw(tC,this))}this._state=!0,this._value=t,eC.call(this)}catch(n){tC.call(this,n)}}function tC(t){this._state=!1,this._value=t,eC.call(this)}function eC(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];QS.call(this,n)}this._deferreds=[]}function nC(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}var oC,rC,iC,uC,aC=function(n){return new $S(function(t,e){(function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return lt.none();for(var o=n[1],r=e[1],i=atob(r),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var l=1024*s,f=Math.min(1024+l,u),d=new Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return lt.some(new Blob(c,{type:o}))})(n).fold(function(){e("uri is not base64: "+n)},t)})},cC=function(t,o,r){return o=o||"image/png",T(HTMLCanvasElement.prototype.toBlob)?new $S(function(e,n){t.toBlob(function(t){t?e(t):n()},o,r)}):aC(t.toDataURL(o,r))},sC=function(t){return a=t,new $S(function(t,e){var n=URL.createObjectURL(a),o=new Image,r=function(){o.removeEventListener("load",i),o.removeEventListener("error",u)},i=function(){r(),t(o)},u=function(){r(),e("Unable to load data of type "+a.type+": "+n)};o.addEventListener("load",i),o.addEventListener("error",u),o.src=n,o.complete&&setTimeout(i,0)}).then(function(t){lC(t);var e=GS(KS(t),JS(t));return YS(e).drawImage(t,0,0),e});var a},lC=function(t){URL.revokeObjectURL(t.src)},fC=function(t,e,n){var o=e.type,r=at(o),i=at(n),u=function(o,r){return t.then(function(t){return n=r,e=(e=o)||"image/png",t.toDataURL(e,n);var e,n})};return{getType:r,toBlob:function(){return $S.resolve(e)},toDataURL:i,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then(function(t){return cC(t,e,n)})},toAdjustedDataURL:u,toAdjustedBase64:function(t,e){return u(t,e).then(function(t){return t.split(",")[1]})},toCanvas:function(){return t.then(XS)}}},dC=function(e,t){return cC(e,t).then(function(t){return fC($S.resolve(e),t,e.toDataURL())})},mC=function(e){return n=e,new $S(function(t){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)}).then(function(t){return fC(sC(e),e,t)});var n},gC=function(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o},pC=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},hC=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],vC=function(t,e){for(var n,o=[],r=new Array(25),i=0;i<5;i++){for(var u=0;u<5;u++)o[u]=e[u+5*i];for(u=0;u<5;u++){for(var a=n=0;a<5;a++)n+=t[u+5*a]*o[a];r[u+5*i]=n}}return r},bC=function(e,n){return e.toCanvas().then(function(t){return yC(t,e.getType(),n)})},yC=function(t,e,n){var o=YS(t),r=function(t,e){for(var n,o,r,i,u=t.data,a=e[0],c=e[1],s=e[2],l=e[3],f=e[4],d=e[5],m=e[6],g=e[7],p=e[8],h=e[9],v=e[10],b=e[11],y=e[12],x=e[13],w=e[14],k=e[15],S=e[16],C=e[17],O=e[18],_=e[19],T=0;T<u.length;T+=4)n=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=n*a+o*c+r*s+i*l+f,u[T+1]=n*d+o*m+r*g+i*p+h,u[T+2]=n*v+o*b+r*y+i*x+w,u[T+3]=n*k+o*S+r*C+i*O+_;return t}(o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),dC(t,e)},xC=function(t,e,n){var o=YS(t),r=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),u=t.data,a=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+p-i,0,s-1)*c+v),y=n[p*r+h];d+=u[b]*y,m+=u[1+b]*y,g+=u[2+b]*y}var x=4*(l*c+f);a[x]=o(d,0,255),a[1+x]=o(m,0,255),a[2+x]=o(g,0,255)}return e}(o.getImageData(0,0,t.width,t.height),r=o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),dC(t,e)},wC=function(n){return function(t,e){return bC(t,n(pC(),e))}},kC=(oC=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return bC(t,oC)}),SC=wC(function(t,e){return e=gC(255*e,-255,255),vC(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])}),CC=wC(function(t,e){var n;return e=gC(e,-1,1),n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?hC[e]:hC[Math.floor(e)]*(1-n)+hC[Math.floor(e)+1]*n)+127,vC(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}),OC=(rC=[0,-1,0,-1,5,-1,0,-1,0],function(t){return n=rC,(e=t).toCanvas().then(function(t){return xC(t,e.getType(),n)});var e,n}),_C=(iC=function(t,e){return 255*Math.pow(t/255,1-e)},function(e,n){return e.toCanvas().then(function(t){return function(t,e,n){for(var o=YS(t),r=new Array(256),i=0;i<r.length;i++)r[i]=iC(i,n);var u=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(u,0,0),dC(t,e)}(t,e.getType(),n)})}),TC=function(t,e,n){var o=KS(t),r=JS(t),i=e/o,u=n/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0);var c=EC(t,i,u);return a?c.then(function(t){return TC(t,e,n)}):c},EC=function(u,a,c){return new $S(function(t){var e=KS(u),n=JS(u),o=Math.floor(e*a),r=Math.floor(n*c),i=GS(o,r);YS(i).drawImage(u,0,0,e,n,0,0,o,r),t(i)})},DC=function(t,e,n){var o=GS(t.width,t.height),r=YS(o),i=0,u=0;return 90!==(n=n<0?360+n:n)&&270!==n||qS(o,o.height,o.width),90!==n&&180!==n||(i=o.width),270!==n&&180!==n||(u=o.height),r.translate(i,u),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),dC(o,e)},BC=function(t,e,n){var o=GS(t.width,t.height),r=YS(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),dC(o,e)},FC=function(t,e,n,o,r,i){var u=GS(r,i);return YS(u).drawImage(t,-n,-o),dC(u,e)},AC=function(t){return kC(t)},MC=function(t){return OC(t)},IC=function(t,e){return _C(t,e)},VC=function(t,e,n,o){return bC(t,(r=pC(),u=n,a=o,i=gC(i=e,0,2),u=gC(u,0,2),a=gC(a,0,2),vC(r,[i,0,0,0,0,0,u,0,0,0,0,0,a,0,0,0,0,0,1,0,0,0,0,0,1])));var r,i,u,a},RC=function(t,e){return SC(t,e)},NC=function(t,e){return CC(t,e)},HC=function(t,e){return o=e,(n=t).toCanvas().then(function(t){return BC(t,n.getType(),o)});var n,o},PC=function(t,e,n,o,r){return u=e,a=n,c=o,s=r,(i=t).toCanvas().then(function(t){return FC(t,i.getType(),u,a,c,s)});var i,u,a,c,s},zC=function(t,e,n){return r=e,i=n,(o=t).toCanvas().then(function(t){return TC(t,r,i).then(function(t){return dC(t,o.getType())})});var o,r,i},LC=function(t,e){return o=e,(n=t).toCanvas().then(function(t){return DC(t,n.getType(),o)});var n,o},jC=function(t,e){return st({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},UC=function(t,e){return jC(pp(t,e),{})},WC=function(t,e){return jC(pp(t,e),{behaviours:rc([lg.config({})])})},GC=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:rc([lg.config({})])}},XC=Kr("toolbar.button.execute"),YC=((uC={})[_o()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],uC),qC=Kr("update-menu-text"),KC=Kr("update-menu-icon"),JC=function(e,n,o){var t=fn(ut),r=e.text.map(function(t){return mp(GC(t,n,o.providers))}),i=e.icon.map(function(t){return mp(WC(t,o.providers.icons))}),u=function(t,e){var n=Ll.getValue(t);return hg.focus(n),qo(n,"keydown",{raw:e.event.raw}),pw.close(n),lt.some(!0)},a=e.role.fold(function(){return{}},function(t){return{role:t}}),c=e.tooltip.fold(function(){return{}},function(t){var e=o.providers.translate(t);return{title:e,"aria-label":e}});return mp(pw.sketch(st(st(st({},e.uid?{uid:e.uid}:{}),a),{dom:{tag:"button",classes:[n,n+"--select"].concat(R(e.classes,function(t){return n+"--"+t})),attributes:st({},c)},components:Kv([i.map(function(t){return t.asSpec()}),r.map(function(t){return t.asSpec()}),lt.some({dom:{tag:"div",classes:[n+"__select-chevron"],innerHtml:pp("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:rc(S(e.dropdownBehaviours,[jv(function(){return e.disabled||o.providers.isDisabled()}),zv(),Wy.config({}),lg.config({}),fg("dropdown-events",[Xv(e,t),Yv(e,t)]),fg("menubutton-update-display-text",[nr(qC,function(e,n){r.bind(function(t){return t.getOpt(e)}).each(function(t){lg.set(t,[lu(o.providers.translate(n.event.text))])})}),nr(KC,function(e,n){i.bind(function(t){return t.getOpt(e)}).each(function(t){lg.set(t,[WC(n.event.icon,o.providers.icons)])})})])])),eventOrder:Pt(YC,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:rc([ig.config({mode:"special",onLeft:u,onRight:u})]),lazySink:o.getSink,toggleClass:n+"--active",parts:{menu:xh(0,e.columns,e.presets)},fetch:function(t){return Ax(y(e.fetch,t))}}))).asSpec()},$C=function(t){return"separator"===t.type},QC={type:"separator"},ZC=function(t,n){var e=z(t,function(t,e){return C(e)?""===e?t:"|"===e?0<t.length&&!$C(t[t.length-1])?t.concat([QC]):t:It(n,e.toLowerCase())?t.concat([n[e.toLowerCase()]]):t:t.concat([e])},[]);return 0<e.length&&$C(e[e.length-1])&&e.pop(),e},tO=function(t,e){return It(t,"getSubmenuItems")?(o=e,r=(n=t).getSubmenuItems(),i=eO(r,o),{item:n,menus:Pt(i.menus,Jt(n.value,i.items)),expansions:Pt(i.expansions,Jt(n.value,n.value))}):{item:t,menus:{},expansions:{}};var n,o,r,i},eO=function(t,r){var e=ZC(C(t)?t.split(" "):t,r);return P(e,function(t,e){var n=function(t){if($C(t))return t;var e=Mt(t,"value").getOrThunk(function(){return Kr("generated-menu-item")});return Pt({value:e},t)}(e),o=tO(n,r);return{menus:Pt(t.menus,o.menus),items:[o.item].concat(t.items),expansions:Pt(t.expansions,o.expansions)}},{menus:{},expansions:{},items:[]})},nO=function(t,n,o,e){var r=Kr("primary-menu"),i=eO(t,o.shared.providers.menuItems());if(0===i.items.length)return lt.none();var u=xy(r,i.items,n,o,e),a=Tt(i.menus,function(t,e){return xy(e,t,n,o,!1)}),c=Pt(a,Jt(r,u));return lt.from(Qg.tieredData(r,c,i.expansions))},oO=function(n){return{isDisabled:function(){return mv.isDisabled(n)},setDisabled:function(t){return mv.set(n,t)},setActive:function(t){var e=n.element;t?(Ti(e,"tox-tbtn--enabled"),Pr(e,"aria-pressed",!0)):(Di(e,"tox-tbtn--enabled"),Ur(e,"aria-pressed"))},isActive:function(){return Bi(n.element,"tox-tbtn--enabled")}}},rO=function(n,t,o,e){return JC({text:n.text,icon:n.icon,tooltip:n.tooltip,role:e,fetch:function(t,e){n.fetch(function(t){e(nO(t,ih.CLOSE_ON_EXECUTE,o,!1))})},onSetup:n.onSetup,getApi:oO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[tx.config({})]},t,o.shared)},iO=function(e,r,i){return function(t){t(R(e,function(t){var e,n,o=t.text.fold(function(){return{}},function(t){return{text:t}});return st(st({type:t.type,active:!1},o),{onAction:function(t){var e=!t.isActive();t.setActive(e),n.storage.set(e),i.shared.getSink().each(function(t){r().getOpt(t).each(function(t){dc(t.element),qo(t,ax,{name:n.name,value:n.storage.get()})})})},onSetup:(e=n=t,function(t){t.setActive(e.storage.get())})})}))}},uO=function(t,e,n,o,r,i){void 0===n&&(n=[]);var u=e.fold(function(){return{}},function(t){return{action:t}}),a=st({buttonBehaviours:rc([jv(function(){return t.disabled||i.isDisabled()}),zv(),tx.config({}),fg("button press",[er("click"),er("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),c=Pt(a,{dom:o});return Pt(c,{components:r})},aO=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})},i=t.icon.map(function(t){return UC(t,n.icons)}),u=Kv([i]);return uO(t,e,o,r,u,n)},cO=function(t,e,n,o){void 0===o&&(o=[]);var r=aO(t,lt.some(e),n,o);return dp.sketch(r)},sO=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),u=t.icon?t.icon.map(function(t){return UC(t,n.icons)}):lt.none(),a=u.isSome()?Kv([u]):[],c=u.isSome()?{}:{innerHtml:i},s=S(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],u.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),l=st(st({tag:"button",classes:s},c),{attributes:{title:i}});return uO(t,e,o,l,a,n)},lO=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=sO(t,lt.some(e),n,o,r);return dp.sketch(i)},fO=function(e,n){return function(t){"custom"===n?qo(t,ax,{name:e,value:{}}):"submit"===n?Yo(t,cx):"cancel"===n?Yo(t,ux):console.error("Unknown button type: ",n)}},dO=function(e,t,n){if("menu"===t){var o=e,r=st(st({},e),{onSetup:function(t){return t.setDisabled(e.disabled),ut},fetch:iO(o.items,function(){return i},n)}),i=mp(rO(r,"tox-tbtn",n,lt.none()));return i.asSpec()}if("custom"===(c=t)||"cancel"===c||"submit"===c){var u=fO(e.name,t),a=st(st({},e),{borderless:!1});return lO(a,u,n.shared.providers,[])}var c;console.error("Unknown footer button type: ",t)},mO=function(t,e){var n,o,r=fO(t.name,"custom");return n=lt.none(),o=Yy.parts.field(st({factory:dp},sO(t,lt.some(r),e,[FS(""),ex()]))),gx(n,o,[],[])},gO=at([tn("field1Name","field1"),tn("field2Name","field2"),pa("onLockedChange"),fa(["lockClass"]),tn("locked",!1),Gl("coupledFieldBehaviours",[Zf,Ll])]),pO=function(t,e){return bf({factory:Yy,name:t,overrides:function(o){return{fieldBehaviours:rc([fg("coupled-input-behaviour",[nr(po(),function(n){Af(n,o,e).bind(Zf.getCurrent).each(function(e){Af(n,o,"lock").each(function(t){Eg.isOn(t)&&o.onLockedChange(n,e,t)})})})])])}}})},hO=at([pO("field1","field2"),pO("field2","field1"),bf({factory:dp,schema:[ze("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:rc([Eg.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),vO=Yf({name:"FormCoupledInputs",configFields:gO(),partFields:hO(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Xl(o.coupledFieldBehaviours,[Zf.config({find:lt.some}),Ll.config({store:{mode:"manual",getValue:function(t){var e=Nf(t,o,["field1","field2"]),n={};return n[o.field1Name]=Ll.getValue(e.field1()),n[o.field2Name]=Ll.getValue(e.field2()),n},setValue:function(t,e){var n=Nf(t,o,["field1","field2"]);Vt(e,o.field1Name)&&Ll.setValue(n.field1(),e[o.field1Name]),Vt(e,o.field2Name)&&Ll.setValue(n.field2(),e[o.field2Name])}}})]),apis:{getField1:function(t){return Af(t,o,"field1")},getField2:function(t){return Af(t,o,"field2")},getLock:function(t){return Af(t,o,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),bO=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return gt.error(t);var n=parseFloat(e[1]),o=e[2];return gt.value({value:n,unit:o})},yO=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?lt.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?lt.some(t.value):lt.some(t.value/n[t.unit]*n[e]):lt.none()},xO=function(t){return lt.none()},wO=function(t,e){var n,o,r,i=bO(t).toOptional(),u=bO(e).toOptional();return o=u,r=function(t,o){return yO(t,o.unit).map(function(t){return o.value/t}).map(function(t){return e=t,n=o.unit,function(t){return yO(t,n).map(function(t){return{value:t*e,unit:n}})};var e,n}).getOr(xO)},((n=i).isSome()&&o.isSome()?lt.some(r(n.getOrDie(),o.getOrDie())):lt.none()).getOr(xO)},kO=function(o,e){var a=xO,r=Kr("ratio-event"),t=vO.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(o.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:pp("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:pp("unlock",e.icons)}}],buttonBehaviours:rc([mv.config({disabled:function(){return o.disabled||e.isDisabled()}}),zv(),tx.config({})])}),n=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},i=function(n){return Yy.parts.field({factory:kx,inputClasses:["tox-textfield"],inputBehaviours:rc([mv.config({disabled:function(){return o.disabled||e.isDisabled()}}),zv(),tx.config({}),fg("size-input-events",[nr(lo(),function(t,e){qo(t,r,{isField1:n})}),nr(ho(),function(t,e){qo(t,rx,{name:o.name})})])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},c=vO.parts.field1(n([Yy.parts.label(u("Width")),i(!0)])),s=vO.parts.field2(n([Yy.parts.label(u("Height")),i(!1)]));return vO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,n([u("&nbsp;"),t])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,i,e){bO(Ll.getValue(t)).each(function(t){a(t).each(function(t){var e,n,o,r;Ll.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(e=t).value.toFixed((n=e.unit)in o?o[n]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+e.unit))})})},coupledFieldBehaviours:rc([mv.config({disabled:function(){return o.disabled||e.isDisabled()},onDisabled:function(t){vO.getField1(t).bind(Yy.getField).each(mv.disable),vO.getField2(t).bind(Yy.getField).each(mv.disable),vO.getLock(t).each(mv.disable)},onEnabled:function(t){vO.getField1(t).bind(Yy.getField).each(mv.enable),vO.getField2(t).bind(Yy.getField).each(mv.enable),vO.getLock(t).each(mv.enable)}}),zv(),fg("size-input-events2",[nr(r,function(t,e){var n=e.event.isField1,o=n?vO.getField1(t):vO.getField2(t),r=n?vO.getField2(t):vO.getField1(t),i=o.map(Ll.getValue).getOr(""),u=r.map(Ll.getValue).getOr("");a=wO(i,u)})])])})},SO={undo:at(Kr("undo")),redo:at(Kr("redo")),zoom:at(Kr("zoom")),back:at(Kr("back")),apply:at(Kr("apply")),swap:at(Kr("swap")),transform:at(Kr("transform")),tempTransform:at(Kr("temp-transform")),transformApply:at(Kr("transform-apply"))},CO=at("save-state"),OO=at("disable"),_O=at("enable"),TO={formActionEvent:ax,saveState:CO,disable:OO,enable:_O},EO=function(r,c){var t=function(t,e,n,o){return mp(lO({name:t,text:t,disabled:n,primary:o,icon:lt.none(),borderless:!1},e,c))},e=function(t,e,n,o){return mp(cO({name:t,icon:lt.some(t),tooltip:lt.some(e),disabled:o,primary:!1,borderless:!1},n,c))},u=function(t,n){t.map(function(t){var e=t.get(n);e.hasConfigured(mv)&&mv.disable(e)})},a=function(t,n){t.map(function(t){var e=t.get(n);e.hasConfigured(mv)&&mv.enable(e)})},s={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},n=ut,i=function(t,e,n){qo(t,e,n)},l=function(t){return Yo(t,TO.disable())},f=function(t){return Yo(t,TO.enable())},d=function(t,e){l(t),i(t,SO.transform(),{transform:e}),f(t)},o=function(t){return function(){J.getOpt(t).each(function(t){lg.set(t,[q])})}},m=function(t,e){l(t),i(t,SO.transformApply(),{transform:e,swap:o(t)}),f(t)},g=function(){return t("Back",function(t){return i(t,SO.back(),{swap:o(t)})},!1,!1)},p=function(){return mp({dom:{tag:"div",classes:["tox-spacer"]},behaviours:rc([mv.config({})])})},h=function(){return t("Apply",function(t){return i(t,SO.apply(),{swap:o(t)})},!0,!0)},v=[g(),p(),t("Apply",function(t){m(t,function(t){var e=r.getRect();return PC(t,e.x,e.y,e.w,e.h)}),r.hideCrop()},!1,!0)],b=jy.sketch({dom:s,components:v.map(function(t){return t.asSpec()}),containerBehaviours:rc([fg("image-tools-crop-buttons-events",[nr(TO.disable(),function(t,e){u(v,t)}),nr(TO.enable(),function(t,e){a(v,t)})])])}),y=mp(kO({name:"size",label:lt.none(),constrain:!0,disabled:!1},c)),x=[g(),p(),y,p(),t("Apply",function(a){y.getOpt(a).each(function(t){var e,n,o=Ll.getValue(t),r=parseInt(o.width,10),i=parseInt(o.height,10),u=(e=r,n=i,function(t){return zC(t,e,n)});m(a,u)})},!1,!0)],w=jy.sketch({dom:s,components:x.map(function(t){return t.asSpec()}),containerBehaviours:rc([fg("image-tools-resize-buttons-events",[nr(TO.disable(),function(t,e){u(x,t)}),nr(TO.enable(),function(t,e){a(x,t)})])])}),k=function(e,n){return function(t){return e(t,n)}},S=k(HC,"h"),C=k(HC,"v"),O=k(LC,-90),_=k(LC,90),T=function(t,e){var n,o;o=e,l(n=t),i(n,SO.tempTransform(),{transform:o}),f(n)},E=[g(),p(),e("flip-horizontally","Flip horizontally",function(t){T(t,S)},!1),e("flip-vertically","Flip vertically",function(t){T(t,C)},!1),e("rotate-left","Rotate counterclockwise",function(t){T(t,O)},!1),e("rotate-right","Rotate clockwise",function(t){T(t,_)},!1),p(),h()],D=jy.sketch({dom:s,components:E.map(function(t){return t.asSpec()}),containerBehaviours:rc([fg("image-tools-fliprotate-buttons-events",[nr(TO.disable(),function(t,e){u(E,t)}),nr(TO.enable(),function(t,e){a(E,t)})])])}),B=function(t,e,n,o,r){var i=rS.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:c.translate(t)}}),u=rS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=rS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return mp(rS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n,maxX:r,getInitialValue:at({x:o})},components:[i,u,a],sliderBehaviours:rc([hg.config({})]),onChoose:e}))},F=function(t,e,n,o,r){return[g(),(i=e,B(t,function(t,e,n){var o=k(i,n.x/100);d(t,o)},n,o,r)),h()];var i},A=function(t,e,n,o,r){var i=F(t,e,n,o,r);return jy.sketch({dom:s,components:i.map(function(t){return t.asSpec()}),containerBehaviours:rc([fg("image-tools-filter-panel-buttons-events",[nr(TO.disable(),function(t,e){u(i,t)}),nr(TO.enable(),function(t,e){a(i,t)})])])})},M=[g(),p(),h()],I=jy.sketch({dom:s,components:M.map(function(t){return t.asSpec()})}),V=A("Brightness",RC,-100,0,100),R=A("Contrast",NC,-100,0,100),N=A("Gamma",IC,-100,0,100),H=function(t){return B(t,function(l,t,e){var n=P.getOpt(l),o=L.getOpt(l),r=z.getOpt(l);n.each(function(s){o.each(function(c){r.each(function(t){var e,n,o,r=Ll.getValue(s).x/100,i=Ll.getValue(t).x/100,u=Ll.getValue(c).x/100,a=(e=r,n=i,o=u,function(t){return VC(t,e,n,o)});d(l,a)})})})},0,100,200)},P=H("R"),z=H("G"),L=H("B"),j=[g(),P,z,L,h()],U=jy.sketch({dom:s,components:j.map(function(t){return t.asSpec()})}),W=function(e,n,o){return function(t){i(t,SO.swap(),{transform:n,swap:function(){J.getOpt(t).each(function(t){lg.set(t,[e]),o(t)})}})}},G=lt.some(MC),X=lt.some(AC),Y=[e("crop","Crop",W(b,lt.none(),function(t){r.showCrop()}),!1),e("resize","Resize",W(w,lt.none(),function(t){y.getOpt(t).each(function(t){var e=r.getMeasurements(),n=e.width,o=e.height;Ll.setValue(t,{width:n,height:o})})}),!1),e("orientation","Orientation",W(D,lt.none(),n),!1),e("brightness","Brightness",W(V,lt.none(),n),!1),e("sharpen","Sharpen",W(I,G,n),!1),e("contrast","Contrast",W(R,lt.none(),n),!1),e("color-levels","Color levels",W(U,lt.none(),n),!1),e("gamma","Gamma",W(N,lt.none(),n),!1),e("invert","Invert",W(I,X,n),!1)],q=jy.sketch({dom:s,components:Y.map(function(t){return t.asSpec()})}),K=jy.sketch({dom:{tag:"div"},components:[q],containerBehaviours:rc([lg.config({})])}),J=mp(K);return{memContainer:J,getApplyButton:function(t){return J.getOpt(t).map(function(t){var e=t.components()[0];return e.components()[e.components().length-1]})}}},DO=tinymce.util.Tools.resolve("tinymce.geom.Rect"),BO=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),FO=tinymce.util.Tools.resolve("tinymce.util.Observable"),AO=tinymce.util.Tools.resolve("tinymce.util.VK"),MO=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function IO(t,m){var g,p,h,v,b=m.document||document,y=b.getElementById(m.handle||t),x=function(t){if(MO(t),t.button!==p)return w(t);t.deltaX=t.screenX-h,t.deltaY=t.screenY-v,t.preventDefault(),m.drag(t)},w=function(t){MO(t),BO(b).off("mousemove touchmove",x).off("mouseup touchend",w),g.remove(),m.stop&&m.stop(t)};return BO(y).on("mousedown touchstart",function(t){var e,n,o,r,i,u,a,c,s,l,f=(e=b,n=Math.max,o=e.documentElement,r=e.body,i=n(o.scrollWidth,r.scrollWidth),u=n(o.clientWidth,r.clientWidth),a=n(o.offsetWidth,r.offsetWidth),c=n(o.scrollHeight,r.scrollHeight),s=n(o.clientHeight,r.clientHeight),{width:i<a?u:i,height:c<n(o.offsetHeight,r.offsetHeight)?s:c});MO(t),t.preventDefault(),p=t.button;var d=y;h=t.screenX,v=t.screenY,l=window.getComputedStyle?window.getComputedStyle(d,null).getPropertyValue("cursor"):d.runtimeStyle.cursor,g=BO("<div></div>").css({position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:l}).appendTo(b.body),BO(b).on("mousemove touchmove",x).on("mouseup touchend",w),m.start(t)}),{destroy:function(){BO(y).off()}}}var VO=0,RO=function(s,n,l,o,r){var t,e="tox-",u="tox-crid-"+VO++,a=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],i=["top","right","bottom","left"],f=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},c=function(t,e,n,o){var r,i=e.x,u=e.y,a=e.w,c=e.h;i+=n*t.deltaX,u+=o*t.deltaY,(a+=n*t.deltaW)<20&&(a=20),(c+=o*t.deltaH)<20&&(c=20),r=s=DO.clamp({x:i,y:u,w:a,h:c},l,"move"===t.name),r=f(l,r),p.fire("updateRect",{rect:r}),g(r)},d=function(e){var t=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),BO("#"+u+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})};CS.each(a,function(t){BO("#"+u+"-"+t.name,o).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),t("top",{x:n.x,y:n.y,w:n.w,h:e.y-n.y}),t("right",{x:e.x+e.w,y:e.y,w:n.w-e.x-e.w+n.x,h:e.h}),t("bottom",{x:n.x,y:e.y+e.h,w:n.w,h:n.h-e.y-e.h+n.y}),t("left",{x:n.x,y:e.y,w:e.x-n.x,h:e.h}),t("move",e)},m=function(t){d(s=t)},g=function(t){var e,n;m((e=l,{x:(n=t).x+e.x,y:n.y+e.y,w:n.w,h:n.h}))};BO('<div id="'+u+'" class="'+e+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),CS.each(i,function(t){BO("#"+u,o).append('<div id="'+u+"-"+t+'"class="'+e+'croprect-block" style="display: none" data-mce-bogus="all">')}),CS.each(a,function(t){BO("#"+u,o).append('<div id="'+u+"-"+t.name+'" class="'+e+"croprect-handle "+e+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')}),t=CS.map(a,function(e){var n;return IO(u,{document:o.ownerDocument,handle:u+"-"+e.name,start:function(){n=s},drag:function(t){c(e,n,t.deltaX,t.deltaY)}})}),d(s),BO(o).on("focusin focusout",function(t){BO(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")}),BO(o).on("keydown",function(e){var i;CS.each(a,function(t){if(e.target.id===u+"-"+t.name)return i=t,!1});var t=function(t,e,n,o,r){t.stopPropagation(),t.preventDefault(),c(i,n,o,r)};switch(e.keyCode){case AO.LEFT:t(e,0,s,-10,0);break;case AO.RIGHT:t(e,0,s,10,0);break;case AO.UP:t(e,0,s,0,-10);break;case AO.DOWN:t(e,0,s,0,10);break;case AO.ENTER:case AO.SPACEBAR:e.preventDefault(),r()}});var p=CS.extend({toggleVisibility:function(t){var e=CS.map(a,function(t){return"#"+u+"-"+t.name}).concat(CS.map(i,function(t){return"#"+u+"-"+t})).join(",");t?BO(e,o).show():BO(e,o).hide()},setClampRect:function(t){l=t,d(s)},setRect:m,getInnerRect:function(){return f(l,s)},setInnerRect:g,setViewPortRect:function(t){n=t,d(s)},destroy:function(){CS.each(t,function(t){t.destroy()}),t=[]}},FO);return p},NO=function(e){var l=mp({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=fn(1),d=fn(lt.none()),m=fn({x:0,y:0,w:1,h:1}),c=fn({x:0,y:0,w:1,h:1}),s=function(t,s){g.getOpt(t).each(function(t){var n=f.get(),o=Ou(t.element),r=vu(t.element),i=s.dom.naturalWidth*n,u=s.dom.naturalHeight*n,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),e={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};qi(s,e),l.getOpt(t).each(function(t){qi(t.element,e)}),d.get().each(function(t){var e=m.get();t.setRect({x:e.x*n+a,y:e.y*n+c,w:e.w*n,h:e.h*n}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})},n=function(t,e){var n,a=mn.fromTag("img");return Pr(a,"src",e),n=a.dom,new Ap(function(t){var e=function(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)}).then(function(){return g.getOpt(t).map(function(t){var e=fu({element:a});lg.replaceAt(t,1,lt.some(e));var n=c.get(),o={x:0,y:0,w:a.dom.naturalWidth,h:a.dom.naturalHeight};c.set(o);var r,u,i=DO.inflate(o,-20,-20);return m.set(i),n.w===o.w&&n.h===o.h||(r=t,u=a,g.getOpt(r).each(function(t){var e=Ou(t.element),n=vu(t.element),o=u.dom.naturalWidth,r=u.dom.naturalHeight,i=Math.min(e/o,n/r);1<=i?f.set(1):f.set(i)})),s(t,a),a})})},t=jy.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:rc([fg("image-panel-crop-events",[sr(function(t){g.getOpt(t).each(function(t){var e=t.element.dom,n=RO({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,ut);n.toggleVisibility(!1),n.on("updateRect",function(t){var e=t.rect,n=f.get(),o={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};m.set(o)}),d.set(lt.some(n))})})])])}],containerBehaviours:rc([lg.config({}),fg("image-panel-events",[sr(function(t){n(t,e)})])])}),g=mp(t);return{memContainer:g,updateSrc:n,zoom:function(t,e){var n=f.get(),o=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);f.set(o),g.getOpt(t).each(function(t){var e=t.components()[1].element;s(t,e)})},showCrop:function(){d.get().each(function(t){t.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(t){t.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var t=c.get();return{width:t.w,height:t.h}}}},HO=function(t,e,n,o,r){return cO({name:t,icon:lt.some(e),disabled:n,tooltip:lt.some(t),primary:!1,borderless:!1},o,r)},PO=function(t,e){e?mv.enable(t):mv.disable(t)};var zO,LO,jO,UO,WO,GO=function(t){var n,o,e,r,i=fn(t),u=fn(lt.none()),a=(o=-1,{data:n=[],add:function(t){var e=n.splice(++o);return n.push(t),{state:t,removed:e}},undo:function(){if(e())return n[--o]},redo:function(){if(r())return n[++o]},canUndo:e=function(){return 0<o},canRedo:r=function(){return-1!==o&&o<n.length-1}});a.add(t);var c=function(t){i.set(t)},s=function(t){return{blob:t,url:URL.createObjectURL(t)}},l=function(t){URL.revokeObjectURL(t.url)},f=function(){u.get().each(l),u.set(lt.none())},d=function(t){var e=s(t);c(e);var n,o=a.add(e).removed;return n=o,CS.each(n,l),e.url};return{getBlobState:function(){return i.get()},setBlobState:c,addBlobState:d,getTempState:function(){return u.get().fold(function(){return i.get()},function(t){return t})},updateTempState:function(t){var e=s(t);return f(),u.set(lt.some(e)),e.url},addTempState:function(t){var e=s(t);return u.set(lt.some(e)),e.url},applyTempState:function(e){return u.get().fold(ut,function(t){d(t.blob),e()})},destroyTempState:f,undo:function(){var t=a.undo();return c(t),t.url},redo:function(){var t=a.redo();return c(t),t.url},getHistoryStates:function(){return{undoEnabled:a.canUndo(),redoEnabled:a.canRedo()}}}},XO=function(t,e){var n,o,r,u=GO(t.currentState),i=function(t){var e=u.getHistoryStates();p.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),qo(t,TO.formActionEvent,{name:TO.saveState(),value:e.undoEnabled})},a=function(t){return t.toBlob()},c=function(t){qo(t,TO.formActionEvent,{name:TO.disable(),value:{}})},s=function(t){h.getApplyButton(t).each(function(t){mv.enable(t)}),qo(t,TO.formActionEvent,{name:TO.enable(),value:{}})},l=function(t,e){return c(t),g.updateSrc(t,e)},f=function(e,t,n,o,r){return c(e),mC(t).then(n).then(a).then(o).then(function(t){return l(e,t).then(function(t){return i(e),r(),s(e),t})})["catch"](function(t){return console.log(t),s(e),t})},d=function(t,e,n){var o=u.getBlobState().blob;f(t,o,e,function(t){return u.updateTempState(t)},n)},m=function(t){var e=u.getBlobState().url;return u.destroyTempState(),i(t),e},g=NO(t.currentState.url),p=(o=mp(HO("Undo","undo",!0,function(t){qo(t,SO.undo(),{direction:1})},n=e)),r=mp(HO("Redo","redo",!0,function(t){qo(t,SO.redo(),{direction:1})},n)),{container:jy.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),r.asSpec(),HO("Zoom in","zoom-in",!1,function(t){qo(t,SO.zoom(),{direction:1})},n),HO("Zoom out","zoom-out",!1,function(t){qo(t,SO.zoom(),{direction:-1})},n)]}),updateButtonUndoStates:function(t,e,n){o.getOpt(t).each(function(t){PO(t,e)}),r.getOpt(t).each(function(t){PO(t,n)})}}),h=EO(g,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[h.memContainer.asSpec(),g.memContainer.asSpec(),p.container],behaviours:rc([Ll.config({store:{mode:"manual",getValue:function(){return u.getBlobState()}}}),fg("image-tools-events",[nr(SO.undo(),function(e,t){var n=u.undo();l(e,n).then(function(t){s(e),i(e)})}),nr(SO.redo(),function(e,t){var n=u.redo();l(e,n).then(function(t){s(e),i(e)})}),nr(SO.zoom(),function(t,e){var n=e.event.direction;g.zoom(t,n)}),nr(SO.back(),function(t,e){var n,o;o=m(n=t),l(n,o).then(function(t){s(n)}),(0,e.event.swap)(),g.hideCrop()}),nr(SO.apply(),function(t,e){u.applyTempState(function(){m(t),(0,e.event.swap)()})}),nr(SO.transform(),function(t,e){return d(t,e.event.transform,ut)}),nr(SO.tempTransform(),function(t,e){return n=t,o=e.event.transform,r=u.getTempState().blob,void f(n,r,o,function(t){return u.addTempState(t)},ut);var n,o,r}),nr(SO.transformApply(),function(t,e){return n=t,o=e.event.transform,r=e.event.swap,i=u.getBlobState().blob,void f(n,i,o,function(t){var e=u.addBlobState(t);return m(n),e},r);var n,o,r,i}),nr(SO.swap(),function(e,t){var n;n=e,p.updateButtonUndoStates(n,!1,!1);var o=t.event.transform,r=t.event.swap;o.fold(function(){r()},function(t){d(e,t,r)})})]),ex()])}},YO=function(t){return!It(t,"items")},qO="data-value",KO=function(e,n,t,o){return R(t,function(t){return YO(t)?{type:"togglemenuitem",text:t.text,value:t.value,active:t.value===o,onAction:function(){Ll.setValue(e,t.value),qo(e,rx,{name:n}),hg.focus(e)}}:{type:"nestedmenuitem",text:t.text,getSubmenuItems:function(){return KO(e,n,t.items,o)}}})},JO=function(t,e){return Q(t,function(t){return YO(t)?Kf(t.value===e,t):JO(t.items,e)})},$O=at([tn("field1Name","field1"),tn("field2Name","field2"),tn("field3Name","field3"),tn("field4Name","field4"),tn("field5Name","field5"),pa("onTbChange"),Gl("fieldMultiBehaviours",[Zf,Ll])]),QO=function(t){return bf({factory:Yy,name:t})},ZO=at([(zO=["field2","field3","field4","field5"],bf({factory:Yy,name:"field1",overrides:function(o){return{fieldBehaviours:rc([fg("field-multi-behaviour",[nr(ho(),function(e){var n=[];zO.forEach(function(t){return Af(e,o,t).bind(Zf.getCurrent).each(function(t){n.push(t)})}),o.onTbChange(e,n)})])])}}})),QO("field2"),QO("field3"),QO("field4"),QO("field5")]),t_=Yf({name:"FormFieldMulti",configFields:$O(),partFields:ZO(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Xl(o.fieldMultiBehaviours,[Zf.config({find:lt.some}),Ll.config({store:{mode:"manual",getValue:function(t){var e=Nf(t,o,["field1","field2","field3","field4","field5"]),n={};return n[o.field1Name]=Ll.getValue(e.field1()),n[o.field2Name]=Ll.getValue(e.field2()),n[o.field3Name]=Ll.getValue(e.field3()),n[o.field4Name]=Ll.getValue(e.field4()),n[o.field5Name]=Ll.getValue(e.field5()),n},setValue:function(t,e){var n=Nf(t,o,["field1","field2","field3","field4","field5"]);Vt(e,o.field1Name)&&Ll.setValue(n.field1(),e[o.field1Name]),Vt(e,o.field2Name)&&Ll.setValue(n.field2(),e[o.field2Name]),Vt(e,o.field3Name)&&Ll.setValue(n.field3(),e[o.field3Name]),Vt(e,o.field4Name)&&Ll.setValue(n.field4(),e[o.field4Name]),Vt(e,o.field5Name)&&Ll.setValue(n.field5(),e[o.field5Name])}}})]),apis:{getField1:function(t){return Af(t,o,"field1")},getField2:function(t){return Af(t,o,"field2")},getField3:function(t){return Af(t,o,"field3")},getField4:function(t){return Af(t,o,"field4")},getField5:function(t){return Af(t,o,"field5")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getField3:function(t,e){return t.getField3(e)},getField4:function(t,e){return t.getField4(e)},getField5:function(t,e){return t.getField5(e)}}}),e_=tinymce.util.Tools.resolve("tinymce.util.XHR"),n_=function(r,i){var u=[];r.items.forEach(function(n){var t=R(n.items,function(t){return{text:i.translate(t.text),value:t.value,selected:t.selected}}),e=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:t,factory:SS,selectBehaviours:rc([mv.config({disabled:function(){return n.disabled||i.isDisabled()}}),tx.config({}),fg("selectmulti-change",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),o=1<n.size?lt.none():lt.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:pp("chevron-down",i.icons)}});u.push({dom:{tag:"div",classes:["tox-selectfield"]},components:mt([[e],o.toArray()])})});var t=function(t){return{dom:{tag:"div",classes:["tox-form__group--stretched"]},components:t}},e=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:i.translate(t)}}},n=t_.parts.field1(t([Yy.parts.label(e("lkTb")),u[0]])),o=t_.parts.field2(t([Yy.parts.label(e("lkCol")),u[1]])),a=t_.parts.field3(t([Yy.parts.label(e("lkLnk")),u[2]])),c=t_.parts.field4(t([Yy.parts.label(e("lkExeObs")),u[3]])),s=t_.parts.field5(t([Yy.parts.label(e("lkExeTime")),u[4]]));return t_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[n,o]},{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[a,c,s]}],field1Name:"tb",field2Name:"col",field3Name:"lnk",field4Name:"exeObs",field5Name:"exeTime",onTbChange:function(t,n){var o,e=Ll.getValue(t);"none"===e?(n.forEach(function(t){return mv.disable(t)}),r.items[1].disabled=!0,r.items[2].disabled=!0,r.items[3].disabled=!0,r.items[4].disabled=!0):(n.forEach(function(t){return mv.enable(t)}),o=e,new Ap(function(e,n){e_.send({url:"/hrms.dll/colD?op="+o,success:function(t){e(t)},error:function(t){n(t)}})}).then(function(t){var e=JSON.parse(t).data;lg.set(n[0],e),r.items[1].items=e.map(function(t){return{text:t.dom.innerHtml,value:t.dom.attributes.value}})})["catch"](),r.items[1].disabled=!1,r.items[2].disabled=!1,r.items[3].disabled=!1,r.items[4].disabled=!1)},fieldMultiBehaviours:rc([mv.config({disabled:function(){return r.disabled||i.isDisabled()},onDisabled:function(t){t_.getField1(t).bind(Yy.getField).each(mv.disable)},onEnabled:function(t){t_.getField1(t).bind(Yy.getField).each(mv.enable)}}),zv()])})},o_=at([tn("field1Name","field1"),tn("field2Name","field2"),pa("onTbChange"),Gl("tbColBehaviours",[Zf,Ll])]),r_=at([(LO="field2",bf({factory:Yy,name:"field1",overrides:function(n){return{fieldBehaviours:rc([fg("field-multi-behaviour",[nr(ho(),function(t){var e=[];Af(t,n,LO).bind(Zf.getCurrent).each(function(t){e.push(t)}),n.onTbChange(t,e)})])])}}})),bf({factory:Yy,name:"field2"})]),i_=Yf({name:"FormTbCol",configFields:o_(),partFields:r_(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Xl(o.tbColBehaviours,[Zf.config({find:lt.some}),Ll.config({store:{mode:"manual",getValue:function(t){var e=Nf(t,o,["field1","field2"]),n={};return n[o.field1Name]=Ll.getValue(e.field1()),n[o.field2Name]=Ll.getValue(e.field2()),n},setValue:function(t,e){var n=Nf(t,o,["field1","field2"]);Vt(e,o.field1Name)&&Ll.setValue(n.field1(),e[o.field1Name]),Vt(e,o.field2Name)&&Ll.setValue(n.field2(),e[o.field2Name])}}})]),apis:{getField1:function(t){return Af(t,o,"field1")},getField2:function(t){return Af(t,o,"field2")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)}}}),u_=function(r,i){var u=[];r.items.forEach(function(n){var t=R(n.items,function(t){return{text:i.translate(t.text),value:t.value,selected:t.selected}}),e=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:t,factory:SS,selectBehaviours:rc([mv.config({disabled:function(){return n.disabled||i.isDisabled()}}),tx.config({}),fg("tbcol-change",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),o=1<n.size?lt.none():lt.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:pp("chevron-down",i.icons)}});u.push({dom:{tag:"div",classes:["tox-selectfield"]},components:mt([[e],o.toArray()])})});var t=function(t){return{dom:{tag:"div",classes:["tox-form__group--stretched"]},components:t}},e=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:i.translate(t)}}},n=i_.parts.field1(t([Yy.parts.label(e("Tb")),u[0]])),o=i_.parts.field2(t([Yy.parts.label(e("Col")),u[1]]));return i_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[n,o]}],field1Name:"tb",field2Name:"col",onTbChange:function(t,n){var o,e=Ll.getValue(t);"none"===e?(n.forEach(function(t){return mv.disable(t)}),r.items[1].disabled=!0):(n.forEach(function(t){return mv.enable(t)}),o=e,new Ap(function(e,n){e_.send({url:"/hrms.dll/cellD?op="+o,success:function(t){e(t)},error:function(t){n(t)}})}).then(function(t){var e=JSON.parse(t).data;lg.set(n[0],e),r.items[1].items=e.map(function(t){return{text:t.dom.innerHtml,value:t.dom.attributes.value}})})["catch"](),r.items[1].disabled=!1)},tbColBehaviours:rc([mv.config({disabled:function(){return r.disabled||i.isDisabled()},onDisabled:function(t){i_.getField1(t).bind(Yy.getField).each(mv.disable)},onEnabled:function(t){i_.getField1(t).bind(Yy.getField).each(mv.enable)}}),zv()])})},a_=function(n,e){var t=n.label.map(function(t){return vx(t,e)}),o=[mv.config({disabled:function(){return n.disabled||e.isDisabled()}}),zv(),ig.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(t){return Yo(t,cx),lt.some(!0)}}),fg("textfield-change",[nr(po(),function(t,e){qo(t,rx,{name:n.name})}),nr(Co(),function(t,e){qo(t,rx,{name:n.name})})]),tx.config({})],r=n.validation.map(function(o){return Ux.config({getRoot:function(t){return Sr(t.element)},invalidClass:"tox-invalid",validator:{validate:function(t){var e=Ll.getValue(t),n=o.validator(e);return Mx(!0===n?gt.value(e):gt.error(n))},validateOnLoad:o.validateOnLoad}})}).toArray(),i=n.placeholder.fold(at({}),function(t){return{placeholder:e.translate(t)}}),u=n.value.fold(at({}),function(t){return{value:e.translate(t)}}),a=n.inputMode.fold(at({}),function(t){return{inputmode:t}}),c=st(st(st({},i),u),a),s=Yy.parts.field({tag:!0===n.multiline?"textarea":"input",inputAttributes:c,inputClasses:[n.classname],inputBehaviours:rc(mt([o,r])),selectOnFocus:!1,factory:kx}),l=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),f=[mv.config({disabled:function(){return n.disabled||e.isDisabled()},onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}}),zv()];return gx(t,s,l,f)},c_=/* */Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return Zo([nr(t.event,n),lr(function(){return e.cancel()})].concat(t.cancelEvent.map(function(t){return[nr(t,function(){return e.cancel()})]}).getOr([])))}}),s_=function(t){var e=fn(null);return di({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},l_=/* */Object.freeze({__proto__:null,throttle:s_,init:function(t){return t.stream.streams.state(t)}}),f_=[Le("stream",Be("mode",{throttle:[ze("delay"),tn("stopEvent",!0),va("streams",{setup:function(t,e){var n=t.stream,o=wp(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:s_})]})),tn("event","input"),qe("cancelEvent"),pa("onStream")],d_=uc({fields:f_,name:"streaming",active:c_,state:l_}),m_=function(t,e,n){var o=Ll.getValue(n);Ll.setValue(e,o),p_(e)},g_=function(t,e){var n=t.element,o=nu(n),r=n.dom;"number"!==zr(n,"type")&&e(r,o)},p_=function(t){g_(t,function(t,e){return t.setSelectionRange(e.length,e.length)})},h_=function(t,e,o){if(t.selectsOver){var n=Ll.getValue(e),r=t.getDisplayText(n),i=Ll.getValue(o);return 0===t.getDisplayText(i).indexOf(r)?lt.some(function(){var t,n;m_(0,e,o),t=e,n=r.length,g_(t,function(t,e){return t.setSelectionRange(n,e.length)})}):lt.none()}return lt.none()},v_=at("alloy.typeahead.itemexecute"),b_=at([qe("lazySink"),ze("fetch"),tn("minChars",5),tn("responseTime",1e3),ma("onOpen"),tn("getHotspot",lt.some),tn("getAnchorOverrides",at({})),tn("layouts",lt.none()),tn("eventOrder",{}),sn("model",{},[tn("getDisplayText",function(t){return t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.value}),tn("selectsOver",!0),tn("populateFromBrowse",!0)]),ma("onSetValue"),ga("onExecute"),ma("onItemExecute"),tn("inputClasses",[]),tn("inputAttributes",{}),tn("inputStyles",{}),tn("matchWidth",!0),tn("useMinWidth",!1),tn("dismissOnBlur",!0),fa(["openClass"]),qe("initialData"),jl("typeaheadBehaviours",[hg,Ll,d_,ig,Eg,Xx]),ln("previewing",function(){return fn(!0)})].concat(yx()).concat(dw())),y_=at([yf({schema:[la()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(e,n){o.previewing.get()?e.getSystem().getByUid(o.uid).each(function(t){h_(o.model,t,n).fold(function(){return ld.dehighlight(e,n)},function(t){return t()})}):e.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&m_(o.model,t,n)}),o.previewing.set(!1)},onExecute:function(t,e){return t.getSystem().getByUid(o.uid).toOptional().map(function(t){return qo(t,v_(),{item:e}),!0})},onHover:function(t,e){o.previewing.set(!1),t.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&m_(o.model,t,e)})}}}})]),x_=Yf({name:"Typeahead",configFields:b_(),partFields:y_(),factory:function(r,t,e,i){var n=function(t,e,n){r.previewing.set(!1);var o=Xx.getCoupled(t,"sandbox");wl.isOpen(o)?Zf.getCurrent(o).each(function(t){ld.getHighlighted(t).fold(function(){n(t)},function(){Qo(o,t.element,"keydown",e)})}):rw(r,u(t),t,o,i,function(t){Zf.getCurrent(t).each(n)},Ox.HighlightFirst).get(ut)},o=xx(r),u=function(o){return function(t){return t.map(function(t){var e=At(t.menus),n=U(e,function(t){return H(t.items,function(t){return"item"===t.type})});return Ll.getState(o).update(R(n,function(t){return t.data})),t})}},a=[hg.config({}),Ll.config({onSetValue:r.onSetValue,store:st({mode:"dataset",getDataKey:function(t){return nu(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(t,e){ou(t.element,r.model.getDisplayText(e))}},r.initialData.map(function(t){return Jt("initialValue",t)}).getOr({}))}),d_.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:function(t,e){var n,o=Xx.getCoupled(t,"sandbox");hg.isFocused(t)&&nu(t.element).length>=r.minChars&&(n=Zf.getCurrent(o).bind(function(t){return ld.getHighlighted(t).map(Ll.getValue)}),r.previewing.set(!0),rw(r,u(t),t,o,i,function(t){Zf.getCurrent(o).each(function(t){n.fold(function(){r.model.selectsOver&&ld.highlightFirst(t)},function(e){ld.highlightBy(t,function(t){return Ll.getValue(t).value===e.value}),ld.getHighlighted(t).orThunk(function(){return ld.highlightFirst(t),lt.none()})})})},Ox.HighlightFirst).get(ut))},cancelEvent:Fo()}),ig.config({mode:"special",onDown:function(t,e){return n(t,e,ld.highlightFirst),lt.some(!0)},onEscape:function(t){var e=Xx.getCoupled(t,"sandbox");return wl.isOpen(e)?(wl.close(e),lt.some(!0)):lt.none()},onUp:function(t,e){return n(t,e,ld.highlightLast),lt.some(!0)},onEnter:function(e){var t=Xx.getCoupled(e,"sandbox"),n=wl.isOpen(t);if(n&&!r.previewing.get())return Zf.getCurrent(t).bind(function(t){return ld.getHighlighted(t)}).map(function(t){return qo(e,v_(),{item:t}),!0});var o=Ll.getValue(e);return Yo(e,Fo()),r.onExecute(t,e,o),n&&wl.close(t),lt.some(!0)}}),Eg.config({toggleClass:r.markers.openClass,aria:{mode:"expanded"}}),Xx.config({others:{sandbox:function(t){return lw(r,t,{onOpen:function(){return Eg.on(t)},onClose:function(){return Eg.off(t)}})}}}),fg("typeaheadevents",[dr(function(t){var e=ut;uw(r,u(t),t,i,e,Ox.HighlightFirst).get(ut)}),nr(v_(),function(t,e){var n=Xx.getCoupled(t,"sandbox");m_(r.model,t,e.event.item),Yo(t,Fo()),r.onItemExecute(t,n,e.event.item,Ll.getValue(t)),wl.close(n),p_(t)})].concat(r.dismissOnBlur?[nr(So(),function(t){var e=Xx.getCoupled(t,"sandbox");gc(e.element).isNone()&&wl.close(e)})]:[]))];return{uid:r.uid,dom:wx(Pt(r,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:st(st({},o),Wl(r.typeaheadBehaviours,a)),eventOrder:r.eventOrder}}}),w_=function(i){return st(st({},i),{toCached:function(){return w_(i.toCached())},bindFuture:function(e){return w_(i.bind(function(t){return t.fold(function(t){return Mx(gt.error(t))},function(t){return e(t)})}))},bindResult:function(e){return w_(i.map(function(t){return t.bind(e)}))},mapResult:function(e){return w_(i.map(function(t){return t.map(e)}))},mapError:function(e){return w_(i.map(function(t){return t.mapError(e)}))},foldResult:function(e,n){return i.map(function(t){return t.fold(e,n)})},withTimeout:function(t,r){return w_(Ax(function(e){var n=!1,o=setTimeout(function(){n=!0,e(gt.error(r()))},t);i.get(function(t){n||(clearTimeout(o),e(t))})}))}})},k_=function(t){return w_(Ax(t))},S_=k_,C_={type:"separator"},O_=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ut}},__=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:undefined},onAction:ut}},T_=function(t,e){return o=t,n=H(e,function(t){return t.type===o}),R(n,O_);var n,o},E_=function(t,e){var n=t.toLowerCase();return H(e,function(t){var e=t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.text;return wn(e.toLowerCase(),n)||wn(t.value.toLowerCase(),n)})},D_=function(u,t,a){var e=Ll.getValue(t),c=e.meta.text!==undefined?e.meta.text:e.value;return a.getLinkInformation().fold(function(){return[]},function(t){var e,n,o,r,i=E_(c,(e=a.getHistory(u),R(e,function(t){return __(t,t)})));return"file"===u?(n=[i,E_(c,T_("header",t.targets)),E_(c,mt([(r=t,lt.from(r.anchorTop).map(function(t){return __("<top>",t)}).toArray()),T_("anchor",t.targets),(o=t,lt.from(o.anchorBottom).map(function(t){return __("<bottom>",t)}).toArray())]))],z(n,function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(C_,e)},[])):i})},B_=Kr("aria-invalid"),F_=function(r,o,i){var t,e,n,u,a,c=o.shared.providers,s=function(t){var e=Ll.getValue(t);i.addToHistory(e.value,r.filetype)},l=Yy.parts.field({factory:x_,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":B_,type:"url"},minChars:0,responseTime:0,fetch:function(t){var e=D_(r.filetype,t,i),n=nO(e,ih.BUBBLE_TO_SANDBOX,o,!1);return Mx(n)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Ux)&&Ux.run(t).get(ut)},typeaheadBehaviours:rc(mt([i.getValidationHandler().map(function(n){return Ux.config({getRoot:function(t){return Sr(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){d.getOpt(t).each(function(t){Pr(t.element,"title",c.translate(e))})}},validator:{validate:function(t){var e=Ll.getValue(t);return S_(function(o){n({type:r.filetype,url:e.value},function(t){var e,n;"invalid"===t.status?(e=gt.error(t.message),o(e)):(n=gt.value(t.message),o(n))})})},validateOnLoad:!1}})}).toArray(),[mv.config({disabled:function(){return r.disabled||c.isDisabled()}}),tx.config({}),fg("urlinput-events",mt(["file"===r.filetype?[nr(po(),function(t){qo(t,rx,{name:r.name})})]:[],[nr(ho(),function(t){qo(t,rx,{name:r.name}),s(t)}),nr(Co(),function(t){qo(t,rx,{name:r.name}),s(t)})]]))]])),eventOrder:((t={})[po()]=["streaming","urlinput-events","invalidating"],t),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:o.shared.getSink,parts:{menu:xh(0,0,"normal")},onExecute:function(t,e,n){qo(e,cx,{})},onItemExecute:function(t,e,n,o){s(t),qo(t,rx,{name:r.name})}}),f=r.label.map(function(t){return vx(t,c)}),d=mp((e="invalid",n=lt.some(B_),void 0===(u="warning")&&(u=e),void 0===a&&(a=e),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],innerHtml:pp(u,c.icons),attributes:st({title:c.translate(a),"aria-live":"polite"},n.fold(function(){return{}},function(t){return{id:t}}))}})),m=mp({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),g=i.getUrlPicker(r.filetype),p=Kr("browser.url.event"),h=mp({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()],behaviours:rc([mv.config({disabled:function(){return r.disabled||c.isDisabled()}})])}),v=mp(lO({name:r.name,icon:lt.some("browse"),text:r.label.getOr(""),disabled:r.disabled,primary:!1,borderless:!0},function(t){return Yo(t,p)},c,[],["tox-browse-url"]));return Yy.sketch({dom:hx([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:mt([[h.asSpec()],g.map(function(){return v.asSpec()}).toArray()])}]),fieldBehaviours:rc([mv.config({disabled:function(){return r.disabled||c.isDisabled()},onDisabled:function(t){Yy.getField(t).each(mv.disable),v.getOpt(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable),v.getOpt(t).each(mv.enable)}}),zv(),fg("url-input-events",[nr(p,function(o){Zf.getCurrent(o).each(function(e){var t=Ll.getValue(e),n=st({fieldname:r.name},t);g.each(function(t){t(n).get(function(t){Ll.setValue(e,t),qo(o,rx,{name:r.name})})})})})])])})},A_=function(r){return function(e,n,o){return Mt(n,"name").fold(function(){return r(n,o)},function(t){return e.field(t,r(n,o))})}},M_={bar:A_(function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:R(n.items,o.interpreter)};var n,o}),collection:A_(function(t,e){return bx(t,e.shared.providers)}),alertbanner:A_(function(t,e){return n=t,o=e.shared.providers,jy.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[dp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:pp(n.icon,o.icons),attributes:{title:o.translate(n.iconTooltip)}},action:function(t){qo(t,ax,{name:"alert-banner",value:n.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}}]});var n,o}),input:A_(function(t,e){return n=t,o=e.shared.providers,a_({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,value:n.value,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:lt.none(),maximized:n.maximized},o);var n,o}),textarea:A_(function(t,e){return n=t,o=e.shared.providers,a_({name:n.name,multiline:!0,label:n.label,inputMode:lt.none(),placeholder:n.placeholder,value:n.value,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:lt.none(),maximized:n.maximized},o);var n,o}),label:A_(function(t,e){return n=t,o=e.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(n.label),classes:["tox-label"]}},i=R(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:rc([ex(),lg.config({}),BS(lt.none()),ig.config({mode:"acyclic"})])};var n,o,r,i}),iframe:(jO=function(t,e){return WS(t,e.shared.providers)},function(t,e,n){var o=Pt(e,{source:"dynamic"});return A_(jO)(t,o,n)}),auth:A_(function(t,e){return n=t,o=e.shared.providers,r=Ll.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),i=function(t){return t.element.dom.click(),lt.some(!0)},u=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:pp("checked"===t?"selected":"unselected",o.icons)}}},a=Yy.parts.field({factory:{sketch:ct},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox",checked:n.checked0?"checked":""}},behaviours:rc([ex(),mv.config({disabled:function(){return n.disabled||o.isDisabled()}}),tx.config({}),hg.config({}),r,ig.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),fg("checkbox-events",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),c=Yy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate("Browse")},behaviours:rc([Wy.config({})])}),s=mp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[u("checked"),u("unchecked")]}),l=$y.parts.field1({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,s.asSpec(),c],fieldBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}}),zv()])}),f=Yy.parts.field({factory:{sketch:ct},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox",checked:n.checked1?"checked":""}},behaviours:rc([ex(),mv.config({disabled:function(){return n.disabled||o.isDisabled()}}),tx.config({}),hg.config({}),r,ig.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),fg("checkbox-events",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),d=Yy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate("Modify")},behaviours:rc([Wy.config({})])}),m=mp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[u("checked"),u("unchecked")]}),g=$y.parts.field2({dom:{tag:"label",classes:["tox-checkbox"]},components:[f,m.asSpec(),d],fieldBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}}),zv()])}),$y.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[{dom:{tag:"label",classes:["tox-form__group--stretched"],innerHtml:o.translate(n.label)}},l,g]}],field1Name:"browse",field2Name:"modify",on1Change:function(t,e){!1===Ll.getValue(t)&&e.forEach(function(t){Ll.getValue(t)&&Ll.setValue(t,!1)})},on2Change:function(t,e){!0===Ll.getValue(t)&&e.forEach(function(t){!1===Ll.getValue(t)&&Ll.setValue(t,!0)})},authBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){$y.getField1(t).bind(Yy.getField).each(mv.disable)},onEnabled:function(t){$y.getField1(t).bind(Yy.getField).each(mv.enable)}}),zv()])});var n,o,r,i,u,a,c,s,l,f,d,m,g}),button:A_(function(t,e){return mO(t,e.shared.providers)}),checkbox:A_(function(t,e){return n=t,o=e.shared.providers,r=Ll.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),i=function(t){return t.element.dom.click(),lt.some(!0)},u=Yy.parts.field({factory:{sketch:ct},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox",checked:n.checked?"checked":""}},behaviours:rc([ex(),mv.config({disabled:function(){return n.disabled||o.isDisabled()}}),tx.config({}),hg.config({}),r,ig.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),fg("checkbox-events",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),a=Yy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:rc([Wy.config({})])}),s=mp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(c=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:pp("checked"===t?"selected":"unselected",o.icons)}}})("checked"),c("unchecked")]}),Yy.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,s.asSpec(),a],fieldBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}}),zv()])});var n,o,r,i,u,a,c,s}),colorinput:A_(function(t,e){return yw(t,e.shared,e.colorinput)}),colorpicker:A_(function(t){var e=function(t){return"tox-"+t},n=pS(vS,e),r=mp(n.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){qo(t,ax,{name:"hex-valid",value:!0})},onInvalidHex:function(t){qo(t,ax,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:rc([Ll.config({store:{mode:"manual",getValue:function(t){var e=r.get(t);return Zf.getCurrent(e).bind(function(t){return Ll.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),o=r.get(t);Zf.getCurrent(o).fold(function(){console.log("Can not find form")},function(t){Ll.setValue(t,{hex:lt.from(n[1]).getOr("")}),cS.getField(t,"hex").each(function(t){Yo(t,po())})})}}}),ex()])}}),defaultvalue:A_(function(t,e){return function(t,r){var i=[];t.items.forEach(function(n){var t=R(n.items,function(t){return{text:r.translate(t.text),value:t.value,selected:t.selected}}),e=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:t,factory:SS,selectBehaviours:rc([mv.config({disabled:function(){return n.disabled||r.isDisabled()}}),tx.config({}),fg("defaultvalue-change",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),o=1<n.size?lt.none():lt.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:pp("chevron-down",r.icons)}});i.push({dom:{tag:"div",classes:["tox-selectfield"]},components:mt([[e],o.toArray()])})});var e=function(t){return{dom:{tag:"div",classes:["tox-form__group--stretched"]},components:t}},n=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(t)}}},o=Yy.parts.field({factory:kx,inputClasses:["tox-textfield"],inputBehaviours:rc([mv.config({disabled:function(){return t.disabled||r.isDisabled()}}),zv(),tx.config({})]),selectOnFocus:!1}),u=kS.parts.field1(e([Yy.parts.label(n("Default value")),o])),a=kS.parts.field2(e([i[0]])),c=kS.parts.field3(e([Yy.parts.label(n("defOb")),i[1]]));return kS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[u,c]},{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[a]}],field1Name:"dv",field2Name:"dvOption",field3Name:"vcDefOb",onOptionChange:function(e,t){t.forEach(function(t){return Ll.setValue(t,Ll.getValue(e))})},defaultValueBehaviours:rc([mv.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(t){kS.getField1(t).bind(Yy.getField).each(mv.disable)},onEnabled:function(t){kS.getField1(t).bind(Yy.getField).each(mv.enable)}}),zv()])})}(t,e.shared.providers)}),dropzone:A_(function(t,e){return AS(t,e.shared.providers)}),fieldtype:A_(function(t,e){return n=t,o=e.shared.providers,r=R(n.items,function(t){return{text:o.translate(t.text),value:t.value,selected:t.selected}}),i=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:SS,selectBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()}}),tx.config({}),fg("fieldtype-change",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),u=1<n.size?lt.none():lt.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:pp("chevron-down",o.icons)}}),a={dom:{tag:"div",classes:["tox-selectfield"]},components:mt([[i],u.toArray()])},c=VS.parts.field1({dom:{tag:"div",classes:["tox-form__group--stretched"]},components:[Yy.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:o.translate("Type")}}),a]}),s=Ll.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),l=function(t){return t.element.dom.click(),lt.some(!0)},f=Yy.parts.field({factory:{sketch:ct},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox",checked:n.checked?"checked":""}},behaviours:rc([ex(),mv.config({disabled:function(){return n.disabled||o.isDisabled()}}),tx.config({}),hg.config({}),s,ig.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),fg("checkbox-events",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),d=Yy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate("Date select")},behaviours:rc([Wy.config({})])}),g=mp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(m=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:pp("checked"===t?"selected":"unselected",o.icons)}}})("checked"),m("unchecked")]}),p=VS.parts.field2({dom:{tag:"label",classes:[n.hidden?"tox-checkbox--hidden":"tox-checkbox-b"]},components:[f,g.asSpec(),d],fieldBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}}),zv()])}),VS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,p]}],field1Name:"type",field2Name:"dateSelect",onTypeChange:function(t,e){"\u65f6\u95f4"===Ll.getValue(t)?(n.hidden=!1,e.forEach(function(t){return t.element.dom.parentElement.className="tox-checkbox-b"})):(n.hidden=!0,e.forEach(function(t){return t.element.dom.parentElement.className="tox-checkbox--hidden"}))},fieldTypeBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){VS.getField1(t).bind(Yy.getField).each(mv.disable)},onEnabled:function(t){VS.getField1(t).bind(Yy.getField).each(mv.enable)}}),zv()])});var n,o,r,i,u,a,c,s,l,f,d,m,g,p}),grid:A_(function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:R(n.items,o.interpreter)};var n,o}),listbox:A_(function(t,e){return o=t,n=(r=e).shared.providers,i=K(o.items).filter(YO),u=o.label.map(function(t){return vx(t,n)}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Yy.parts.field({dom:{},factory:{sketch:function(t){return JC({uid:t.uid,text:i.map(function(t){return t.text}),icon:lt.none(),tooltip:o.label,role:lt.none(),fetch:function(t,e){var n=KO(t,o.name,o.items,Ll.getValue(t));e(nO(n,ih.CLOSE_ON_EXECUTE,r,!1))},onSetup:at(ut),getApi:at({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[tx.config({}),Ll.config({store:{mode:"manual",initialValue:i.map(function(t){return t.value}).getOr(""),getValue:function(t){return zr(t.element,qO)},setValue:function(e,t){JO(o.items,t).each(function(t){Pr(e.element,qO,t.value),qo(e,qC,{text:t.text})})}}})]},"tox-listbox",r.shared)}}})]},Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:mt([u.toArray(),[a]]),fieldBehaviours:rc([mv.config({disabled:at(o.disabled),onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}})])});var o,r,n,i,u,a}),selectbox:A_(function(t,e){return n=t,o=e.shared.providers,r=R(n.items,function(t){return{text:o.translate(t.text),value:t.value,selected:t.selected}}),i=n.label.map(function(t){return vx(t,o)}),u=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:SS,selectBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()}}),tx.config({}),fg("selectbox-change",[nr(ho(),function(t,e){qo(t,rx,{name:n.name})})])])}),a=1<n.size?lt.none():lt.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:pp("chevron-down",o.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:mt([[u],a.toArray()])},Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:mt([i.toArray(),[c]]),fieldBehaviours:rc([mv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){Yy.getField(t).each(mv.disable)},onEnabled:function(t){Yy.getField(t).each(mv.enable)}}),zv()])});var n,o,r,i,u,a,c}),selectmulti:A_(function(t,e){return n_(t,e.shared.providers)}),sizeinput:A_(function(t,e){return kO(t,e.shared.providers)}),tbcol:A_(function(t,e){return u_(t,e.shared.providers)}),urlinput:A_(function(t,e){return F_(t,e,e.urlinput)}),customeditor:A_(function(n){var o=fn(lt.none()),e=mp({dom:{tag:n.tag}}),r=fn(lt.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:rc([fg("custom-editor-events",[sr(function(t){e.getOpt(t).each(function(e){var t;t=n,(Object.prototype.hasOwnProperty.call(t,"init")?n.init(e.element.dom):bS.load(n.scriptId,n.scriptUrl).then(function(t){return t(e.element.dom,n.settings)})).then(function(e){r.get().each(function(t){e.setValue(t)}),r.set(lt.none()),o.set(lt.some(e))})})})]),Ll.config({store:{mode:"manual",getValue:function(){return o.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,e){o.get().fold(function(){r.set(lt.some(e))},function(t){return t.setValue(e)})}}}),ex()]),components:[e.asSpec()]}}),htmlpanel:A_(function(t){return"presentation"===t.presets?jy.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):jy.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:rc([tx.config({}),hg.config({})])})}),imagetools:A_(function(t,e){return XO(t,e.shared.providers)}),table:A_(function(t,e){return n=t,o=e.shared.providers,u=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},a=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:R(t,a)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:R(i,u)}]}),(r=n.cells,{dom:{tag:"tbody"},components:R(r,c)})],behaviours:rc([tx.config({}),hg.config({})])};var n,o,r,i,u,a,c}),panel:A_(function(t,e){return o=e,{dom:{tag:"div",classes:(n=t).classes},components:R(n.items,o.shared.interpreter)};var n,o})},I_={field:function(t,e){return e}},V_=function(e,t,n){var o=Pt(n,{shared:{interpreter:function(t){return R_(e,t,o)}}});return R_(e,t,o)},R_=function(e,n,o){return Mt(M_,n.type).fold(function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(t){return t(e,n,o)})},N_={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},H_=function(t,e,n){var o=Nc(-12,12,N_),r={maxHeightFunction:Ac()};return function(){return n()?{anchor:"node",root:Hi(t()),node:lt.from(t()),bubble:o,layouts:{onRtl:function(){return[cp]},onLtr:function(){return[ap]}},overrides:r}:{anchor:"hotspot",hotspot:e(),bubble:o,layouts:{onRtl:function(){return[Na]},onLtr:function(){return[Ha]}},overrides:r}}},P_=function(t,e,n){return function(){return n()?{anchor:"node",root:Hi(t()),node:lt.from(t()),layouts:{onRtl:function(){return[sp]},onLtr:function(){return[sp]}}}:{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[ja]},onLtr:function(){return[ja]}}}}},z_=function(t,e,n){var o,r,i,u=Av(t),a=function(){return mn.fromDom(t.getBody())},c=function(){return mn.fromDom(t.getContentAreaContainer())},s=function(){return u||!n()};return{inlineDialog:H_(c,e,s),banner:P_(c,e,s),cursor:(r=t,function(){return{anchor:"selection",root:i(),getSelection:function(){var t=r.selection.getRng();return lt.some(ms.range(mn.fromDom(t.startContainer),t.startOffset,mn.fromDom(t.endContainer),t.endOffset))}}}),node:(o=i=a,function(t){return{anchor:"node",root:o(),node:t}})}},L_=function(t){return{colorPicker:function(t,e){$b(r)(t,e)},hasCustomColors:function(){return zb(o)},getColors:function(){return Lb(n)},getColorCols:(e=n=o=r=t,function(){return Wb(e)})};var e,n,o,r},j_=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],U_=function(t){return z(t,function(t,e){if(It(e,"items")){var n=U_(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(It(e,"inline")||It(e,"block")||It(e,"selector")){var o="custom-"+(C(e.name)?e.name:e.title.toLowerCase());return{customFormats:t.customFormats.concat([{name:o,format:e}]),formats:t.formats.concat([{title:e.title,format:o,icon:e.icon}])}}return st(st({},t),{formats:t.formats.concat(e)})},{customFormats:[],formats:[]})},W_=function(i){return t=i,lt.from(t.getParam("style_formats")).filter(p).map(function(t){var e,n,o,r=(e=i,n=U_(t),o=function(t){dt(t,function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})},e.formatter?o(n.customFormats):e.on("init",function(){o(n.customFormats)}),n.formats);return i.getParam("style_formats_merge",!1,"boolean")?j_.concat(r):r}).getOr(j_);var t},G_=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Pt(t,o)},X_=function(c,t,s,l){var f=function(t){return R(t,function(t){var e,n,o,r,i,u=Ct(t);if(Vt(t,"items")){var a=f(t.items);return Pt(Pt(t,{type:"submenu"}),{getStyleItems:function(){return a}})}return Vt(t,"format")?G_(t,s,l):1===u.length&&A(u,"title")?Pt(t,{type:"separator"}):(n=C((e=t).name)?e.name:Kr(e.title),r={type:"formatter",format:o="custom-"+n,isSelected:s(o),getStylePreview:l(o)},i=Pt(e,r),c.formatter.register(n,i),i)})};return f(t)},Y_=CS.trim,q_=function(n){return function(t){if(v(e=t)&&1===e.nodeType){if(t.contentEditable===n)return!0;if(t.getAttribute("data-mce-contenteditable")===n)return!0}var e;return!1}},K_=q_("true"),J_=q_("false"),$_=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},Q_=function(t){return t.innerText||t.textContent},Z_=function(t){return(e=t)&&"A"===e.nodeName&&(e.id||e.name)!==undefined&&eT(t);var e},tT=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},eT=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return K_(t)}return!1}(t)&&!J_(t)},nT=function(t){return tT(t)&&eT(t)},oT=function(t){var e,n,o=(e=t).id?e.id:Kr("h");return $_("header",Q_(t),"#"+o,tT(n=t)?parseInt(n.nodeName.substr(1),10):0,function(){t.id=o})},rT=function(t){var e=t.id||t.name,n=Q_(t);return $_("anchor",n||"#"+e,"#"+e,0,ut)},iT=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,R(Os(mn.fromDom(n),e),function(t){return t.dom})},uT=function(t){return 0<Y_(t.title).length},aT=function(t){var e=iT(t);return H(R(H(e,nT),oT).concat(R(H(e,Z_),rT)),uT)},cT="tinymce-url-history",sT=function(t){return C(t)&&/^https?/.test(t)},lT=function(t){return O(t)&&Ft(t,function(t){return!(p(e=t)&&e.length<=5&&W(e,sT));var e}).isNone()},fT=function(){var t,e=Mb.getItem(cT);if(null===e)return{};try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+cT+" was not valid JSON",n),{};throw n}return lT(t)?t:(console.log("Local storage "+cT+" was not valid format",t),{})},dT=function(t){var e=fT();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},mT=function(e,t){var n,o,r;sT(e)&&(n=fT(),o=Object.prototype.hasOwnProperty.call(n,t)?n[t]:[],r=H(o,function(t){return t!==e}),n[t]=[e].concat(r).slice(0,5),function(t){if(!lT(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));Mb.setItem(cT,JSON.stringify(t))}(n))},gT=function(t){return!!t},pT=function(t){return Tt(CS.makeMap(t,/[, ]/),gT)},hT=function(t){return lt.from(t.getParam("file_picker_callback")).filter(T)},vT=function(t,e){var n,o,r,i,u=(n=t,o=lt.some(n.getParam("file_picker_types")).filter(gT),r=lt.some(n.getParam("file_browser_callback_types")).filter(gT),i=o.or(r).map(pT),hT(n).fold(l,function(t){return i.fold(w,function(t){return 0<Ct(t).length&&t})}));return _(u)?u?hT(t):lt.none():u[e]?hT(t):lt.none()},bT=function(t){return lt.from(t).filter(C).getOrUndefined()},yT=function(t){return lt.from((n=(e=t).getParam("file_picker_validator_handler",undefined,"function"))===undefined?e.getParam("filepicker_validator_handler",undefined,"function"):n);var e,n},xT=function(e){return{getHistory:dT,addToHistory:mT,getLinkInformation:function(){return!1===(t=e).getParam("typeahead_urls")?lt.none():lt.some({targets:aT(t.getBody()),anchorTop:bT(t.getParam("anchor_top","#top")),anchorBottom:bT(t.getParam("anchor_bottom","#bottom"))});var t},getValidationHandler:function(){return yT(e)},getUrlPicker:function(t){return vT(r=e,i=t).map(function(o){return function(e){return Ax(function(n){var t=st({filetype:i,fieldname:e.fieldname},lt.from(e.meta).getOr({}));o.call(r,function(t,e){if(!C(t))throw new Error("Expected value to be string");if(e!==undefined&&!O(e))throw new Error("Expected meta to be a object");n({value:t,meta:e})},e.value,t)})}});var r,i}}},wT=function(t,e,n){var o,r,i=fn(!1),u={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=fn(Bv(e)?"bottom":"top")).get,setDockingMode:o.set},a={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:Zh.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return R_(I_,t,a)},anchors:z_(e,n,u.isPositionedAtTop),header:u,getSink:function(){return gt.value(t)}},urlinput:xT(e),styleselect:function(o){var r=function(t){return function(){return o.formatter.match(t)}},i=function(e){return function(){var t=o.formatter.get(e);return t!==undefined?lt.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(e))}):lt.none()}},u=function(t){var e=t.items;return e!==undefined&&0<e.length?U(e,u):[t.format]},a=fn([]),c=fn([]),n=fn([]),s=fn([]),l=fn(!1);o.on("PreInit",function(t){var e=W_(o),n=X_(o,e,r,i);a.set(n),c.set(U(n,u))}),o.on("addStyleModifications",function(t){var e=X_(o,t.items,r,i);n.set(e),l.set(t.replace),s.set(U(e,u))});return{getData:function(){var t=l.get()?[]:a.get(),e=n.get();return t.concat(e)},getFlattenedKeys:function(){var t=l.get()?[]:c.get(),e=s.get();return t.concat(e)}}}(e),colorinput:L_(e),dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!0,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return a},kT=at(function(t,e){var n,o,r;n=t,o=Math.floor(e),r=Cu.max(n,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),Yi(n,"max-width",r+"px")}),ST="contexttoolbar-hide",CT=at([ze("dom"),tn("shell",!0),jl("toolbarBehaviours",[lg])]),OT=at([xf({name:"groups",overrides:function(){return{behaviours:rc([lg.config({})])}}})]),_T=Yf({name:"Toolbar",configFields:CT(),partFields:OT(),factory:function(e,t,n,o){var r=function(t){return e.shell?lt.some(t):Af(t,e,"groups")},i=e.shell?{behaviours:[lg.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:Wl(e.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){lg.set(t,e)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),TT=function(t,e,n){return{within:t,extra:e,withinWidth:n}},ET=function(t,e,o){var n,r=(n=function(t,e){var n=o(t);return lt.some({element:t,start:e,finish:e+n,width:n})},z(t,function(e,t){return n(t,e.len).fold(at(e),function(t){return{len:t.finish,list:e.list.concat([t])}})},{len:0,list:[]}).list),i=H(r,function(t){return t.finish<=e}),u=P(i,function(t,e){return t+e.width},0);return{within:i,extra:r.slice(i.length),withinWidth:u}},DT=function(t){return R(t,function(t){return t.element})},BT=function(t,e,n,o){var r,i,u,a,c,s,l,f,d,m=(0===(r=ET(e,t,n)).extra.length?lt.some(r):lt.none()).getOrThunk(function(){return ET(e,t-n(o),n)}),g=m.within,p=m.extra,h=m.withinWidth;return 1===p.length&&p[0].width<=n(o)?(l=p,f=h,d=DT(g.concat(l)),TT(d,[],f)):1<=p.length?(u=p,a=o,c=h,s=DT(g).concat([a]),TT(s,DT(u),c)):(i=h,TT(DT(g),[],i))},FT=function(t,e){var n=R(e,function(t){return gu(t)});_T.setGroups(t,n)},AT=function(t,e,n){var o=Mf(t,e,"primary"),r=Xx.getCoupled(t,"overflowGroup");Yi(o.element,"visibility","hidden");var i=e.builtGroups.get().concat([r]),u=Q(i,function(e){return gc(e.element).bind(function(t){return e.getSystem().getByDom(t).toOptional()})});n([]),FT(o,i);var a=Ou(o.element),c=BT(a,e.builtGroups.get(),function(t){return Ou(t.element)},r);0===c.extra.length?(lg.remove(o,r),n([])):(FT(o,c.within),n(c.extra)),tu(o.element,"visibility"),eu(o.element),u.each(hg.focus)},MT=at([jl("splitToolbarBehaviours",[Xx]),ln("builtGroups",function(){return fn([])})]),IT=at([fa(["overflowToggledClass"]),Qe("getOverflowBounds"),ze("lazySink"),ln("overflowGroups",function(){return fn([])})].concat(MT())),VT=at([bf({factory:_T,schema:CT(),name:"primary"}),yf({schema:CT(),name:"overflow"}),yf({name:"overflow-button"}),yf({name:"overflow-group"})]),RT=at([fa(["toggledClass"]),ze("lazySink"),We("fetch"),Qe("getBounds"),Ze("fireDismissalEventInstead",[tn("event",Po())]),qc()]),NT=at([yf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:rc([Eg.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),yf({factory:_T,schema:CT(),name:"toolbar",overrides:function(e){return{toolbarBehaviours:rc([ig.config({mode:"cyclic",onEscape:function(t){return Af(t,e,"button").each(hg.focus),lt.none()}})])}}})]),HT=function(t,e){var n=Xx.getCoupled(t,"toolbarSandbox");wl.isOpen(n)?wl.close(n):wl.open(n,e.toolbar())},PT=function(t,e,n,o){var r=n.getBounds.map(function(t){return t()}),i=n.lazySink(t).getOrDie();Zs.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:kT()}},e,r)},zT=function(t,e,n,o,r){_T.setGroups(e,r),PT(t,e,n,o),Eg.on(t)},LT=Yf({name:"FloatingToolbarButton",factory:function(u,t,a,e){return st(st({},dp.sketch(st(st({},e.button()),{action:function(t){HT(t,e)},buttonBehaviours:Xl({dump:e.button().buttonBehaviours},[Xx.config({others:{toolbarSandbox:function(t){return o=t,n=a,r=u,{dom:{tag:"div",attributes:{id:(i=Ju()).id}},behaviours:rc([ig.config({mode:"special",onEscape:function(t){return wl.close(t),lt.some(!0)}}),wl.config({onOpen:function(t,e){r.fetch().get(function(t){zT(o,e,r,n.layouts,t),i.link(o.element),ig.focusIn(e)})},onClose:function(){Eg.off(o),hg.focus(o),i.unlink(o.element)},isPartOf:function(t,e,n){return Qu(e,n)||Qu(o,n)},getAttachPoint:function(){return r.lazySink(o).getOrDie()}}),lc.config({channels:st(st({},_l(st({isExtraPart:l},r.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),El({doReposition:function(){wl.getState(Xx.getCoupled(o,"toolbarSandbox")).each(function(t){PT(o,t,r,n.layouts)})}}))})])};var o,n,r,i}}})])}))),{apis:{setGroups:function(e,n){wl.getState(Xx.getCoupled(e,"toolbarSandbox")).each(function(t){zT(e,t,u,a.layouts,n)})},reposition:function(e){wl.getState(Xx.getCoupled(e,"toolbarSandbox")).each(function(t){PT(e,t,u,a.layouts)})},toggle:function(t){HT(t,e)},getToolbar:function(t){return wl.getState(Xx.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return wl.isOpen(Xx.getCoupled(t,"toolbarSandbox"))}}})},configFields:RT(),partFields:NT(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),jT=at([ze("items"),fa(["itemSelector"]),jl("tgroupBehaviours",[ig])]),UT=at([wf({name:"items",unit:"item"})]),WT=Yf({name:"ToolbarGroup",configFields:jT(),partFields:UT(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.tgroupBehaviours,[ig.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),GT=function(t){return R(t,function(t){return gu(t)})},XT=function(t,n,o){AT(t,o,function(e){o.overflowGroups.set(e),n.getOpt(t).each(function(t){LT.setGroups(t,GT(e))})})},YT=Yf({name:"SplitFloatingToolbar",configFields:IT(),partFields:VT(),factory:function(n,t,e,o){var r=mp(LT.sketch({fetch:function(){return Ax(function(t){t(GT(n.overflowGroups.get()))})},layouts:{onLtr:function(){return[Ha,Na]},onRtl:function(){return[Na,Ha]},onBottomLtr:function(){return[za,Pa]},onBottomRtl:function(){return[Pa,za]}},getBounds:e.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:n.uid,dom:n.dom,components:t,behaviours:Wl(n.splitToolbarBehaviours,[Xx.config({others:{overflowGroup:function(){return WT.sketch(st(st({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(t,e){n.builtGroups.set(R(e,t.getSystem().build)),XT(t,r,n)},refresh:function(t){return XT(t,r,n)},toggle:function(t){r.getOpt(t).each(function(t){LT.toggle(t)})},isOpen:function(t){return r.getOpt(t).map(LT.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each(function(t){LT.reposition(t)})},getOverflow:function(t){return r.getOpt(t).bind(LT.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),qT=function(e,t){return t.getAnimationRoot.fold(function(){return e.element},function(t){return t(e)})},KT=function(t){return t.dimension.property},JT=function(t,e){return t.dimension.getDimension(e)},$T=function(t,e){var n=qT(t,e);Ai(n,[e.shrinkingClass,e.growingClass])},QT=function(t,e){Di(t.element,e.openClass),Ti(t.element,e.closedClass),Yi(t.element,KT(e),"0px"),eu(t.element)},ZT=function(t,e){Di(t.element,e.closedClass),Ti(t.element,e.openClass),tu(t.element,KT(e))},tE=function(t,e,n,o){n.setCollapsed(),Yi(t.element,KT(e),JT(e,t.element)),eu(t.element),$T(t,e),QT(t,e),e.onStartShrink(t),e.onShrunk(t)},eE=function(t,e,n,o){var r=o.getOrThunk(function(){return JT(e,t.element)});n.setCollapsed(),Yi(t.element,KT(e),r),eu(t.element);var i=qT(t,e);Di(i,e.growingClass),Ti(i,e.shrinkingClass),QT(t,e),e.onStartShrink(t)},nE=function(t,e,n){var o=JT(e,t.element);("0px"===o?tE:eE)(t,e,n,lt.some(o))},oE=function(t,e,n){var o=qT(t,e),r=Bi(o,e.shrinkingClass),i=JT(e,t.element);ZT(t,e);var u=JT(e,t.element);(r?function(){Yi(t.element,KT(e),i),eu(t.element)}:function(){QT(t,e)})(),Di(o,e.shrinkingClass),Ti(o,e.growingClass),ZT(t,e),Yi(t.element,KT(e),u),n.setExpanded(),e.onStartGrow(t)},rE=function(t,e,n){var o=qT(t,e);return!0===Bi(o,e.growingClass)},iE=function(t,e,n){var o=qT(t,e);return!0===Bi(o,e.shrinkingClass)},uE=/* */Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(tu(t.element,KT(e)),o=JT(e,t.element),Yi(t.element,KT(e),o))},grow:function(t,e,n){n.isExpanded()||oE(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&nE(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&tE(t,e,n,lt.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:rE,isShrinking:iE,isTransitioning:function(t,e,n){return rE(t,e)||iE(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?nE:oE)(t,e,n)},disableTransitions:$T}),aE=/* */Object.freeze({__proto__:null,exhibit:function(t,e,n){var o=e.expanded;return gi(o?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:Jt(e.dimension.property,"0px")})},events:function(n,o){return Zo([cr(bo(),function(t,e){e.event.raw.propertyName===n.dimension.property&&($T(t,n),o.isExpanded()&&tu(t.element,n.dimension.property),(o.isExpanded()?n.onGrown:n.onShrunk)(t))})])}}),cE=[ze("closedClass"),ze("openClass"),ze("shrinkingClass"),ze("growingClass"),qe("getAnimationRoot"),ma("onShrunk"),ma("onStartShrink"),ma("onGrown"),ma("onStartGrow"),tn("expanded",!1),Le("dimension",Be("property",{width:[va("property","width"),va("getDimension",function(t){return Ou(t)+"px"})],height:[va("property","height"),va("getDimension",function(t){return vu(t)+"px"})]}))],sE=uc({fields:cE,name:"sliding",active:aE,apis:uE,state:/* */Object.freeze({__proto__:null,init:function(t){var e=fn(t.expanded);return di({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:y(e.set,!1),setExpanded:y(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),lE=at([fa(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ma("onOpened"),ma("onClosed")].concat(MT())),fE=at([bf({factory:_T,schema:CT(),name:"primary"}),bf({factory:_T,schema:CT(),name:"overflow",overrides:function(e){return{toolbarBehaviours:rc([sE.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:function(t){Af(t,e,"overflow-button").each(function(t){Eg.off(t),hg.focus(t)}),e.onClosed(t)},onGrown:function(t){ig.focusIn(t),e.onOpened(t)},onStartGrow:function(t){Af(t,e,"overflow-button").each(Eg.on)}}),ig.config({mode:"acyclic",onEscape:function(t){return Af(t,e,"overflow-button").each(hg.focus),lt.some(!0)}})])}}}),yf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:rc([Eg.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),yf({name:"overflow-group"})]),dE=function(e,n){Af(e,n,"overflow-button").bind(function(){return Af(e,n,"overflow")}).each(function(t){mE(e,n),sE.toggleGrow(t)})},mE=function(t,e){Af(t,e,"overflow").each(function(n){AT(t,e,function(t){var e=R(t,function(t){return gu(t)});_T.setGroups(n,e)}),Af(t,e,"overflow-button").each(function(t){sE.hasGrown(n)&&Eg.on(t)}),sE.refresh(n)})},gE=Yf({name:"SplitSlidingToolbar",configFields:lE(),partFields:fE(),factory:function(o,t,e,n){var r="alloy.toolbar.toggle";return{uid:o.uid,dom:o.dom,components:t,behaviours:Wl(o.splitToolbarBehaviours,[Xx.config({others:{overflowGroup:function(e){return WT.sketch(st(st({},n["overflow-group"]()),{items:[dp.sketch(st(st({},n["overflow-button"]()),{action:function(t){Yo(e,r)}}))]}))}}}),fg("toolbar-toggle-events",[nr(r,function(t){dE(t,o)})])]),apis:{setGroups:function(t,e){var n;n=R(e,t.getSystem().build),o.builtGroups.set(n),mE(t,o)},refresh:function(t){return mE(t,o)},toggle:function(t){return dE(t,o)},isOpen:function(t){return Af(t,o,"overflow").map(sE.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),pE=at(Kr("toolbar-height-change")),hE=function(t){var e=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:st({tag:"div",classes:["tox-toolbar__group"]},e),components:[WT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:rc([tx.config({}),hg.config({})])}},vE=function(t){return WT.sketch(hE(t))},bE=function(n,t){var e=sr(function(t){var e=R(n.initGroups,vE);_T.setGroups(t,e)});return rc([Wv(n.providers.isDisabled),zv(),ig.config({mode:t,onEscape:n.onEscape,selector:".tox-toolbar__group"}),fg("toolbar-events",[e])])},yE=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":hE({title:lt.none(),items:[]}),"overflow-button":aO({name:"more",icon:lt.some("more-drawer"),disabled:!1,tooltip:lt.some("More..."),primary:!1,borderless:!1},lt.none(),t.providers)},splitToolbarBehaviours:bE(t,e)}},xE=function(i){var t=yE(i),e=YT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return YT.sketch(st(st({},t),{lazySink:i.getSink,getOverflowBounds:function(){var t=i.moreDrawerData.lazyHeader().element,e=Pu(t),n=wr(t),o=Pu(n),r=Math.max(n.dom.scrollHeight,o.height);return Nu(e.x+4,o.y,e.width-8,r)},parts:st(st({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i.attributes}}}),components:[e],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},wE=function(t){var e=gE.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=gE.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=yE(t);return gE.sketch(st(st({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([pE()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([pE()],{type:"closed"})}}))},kE=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return _T.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===oh.scrolling?["tox-toolbar--scrolling"]:[])},components:[_T.parts.groups({})],toolbarBehaviours:bE(t,e)})},SE=le([je("type"),Le("items",de([we([je("name"),Ye("items",Ie)]),Ie]))].concat(jp)),CE=[$e("text"),$e("tooltip"),$e("icon"),We("fetch"),an("onSetup",function(){return ut})],OE=le(S([je("type")],CE)),_E=function(t){return Oe("menubutton",OE,t)},TE=le([je("type"),$e("tooltip"),$e("icon"),$e("text"),Qe("select"),We("fetch"),an("onSetup",function(){return ut}),rn("presets","normal",["normal","color","listpreview"]),tn("columns",1),We("onAction"),We("onItemAction")]),EE=/* */Object.freeze({__proto__:null,events:function(i,u){var r=function(o,r){i.updateState.each(function(t){var e=t(o,r);u.set(e)}),i.renderComponents.each(function(t){var e=t(r,u.get()),n=R(e,o.getSystem().build);ol(o,n)})};return Zo([nr(Oo(),function(t,e){var n,o=e;o.universal||(n=i.channel,A(o.channels,n)&&r(t,o.data))}),sr(function(e,t){i.initialData.each(function(t){r(e,t)})})])}}),DE=/* */Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),BE=[ze("channel"),qe("renderComponents"),qe("updateState"),qe("initialData")],FE=uc({fields:BE,name:"reflecting",active:EE,apis:DE,state:/* */Object.freeze({__proto__:null,init:function(){var e=fn(lt.none());return{readState:function(){return e.get().fold(function(){return"none"},function(t){return t})},get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(lt.none())}}}})}),AE=at([ze("toggleClass"),ze("fetch"),pa("onExecute"),tn("getHotspot",lt.some),tn("getAnchorOverrides",at({})),qc(),pa("onItemExecute"),qe("lazySink"),ze("dom"),ma("onOpen"),jl("splitDropdownBehaviours",[Xx,ig,hg]),tn("matchWidth",!1),tn("useMinWidth",!1),tn("eventOrder",{}),qe("role")].concat(dw())),ME=bf({factory:dp,schema:[ze("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:rc([hg.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(Ko)},buttonBehaviours:rc([Eg.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),IE=bf({factory:dp,schema:[ze("dom")],name:"button",defaults:function(){return{buttonBehaviours:rc([hg.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(n.uid).each(function(t){n.onExecute(t,e)})}}}}),VE=at([ME,IE,xf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[ze("text")],name:"aria-descriptor"}),yf({schema:[la()],name:"menu",defaults:function(o){return{onExecute:function(e,n){e.getSystem().getByUid(o.uid).each(function(t){o.onItemExecute(t,e,n)})}}}}),qx()]),RE=Yf({name:"SplitDropdown",configFields:AE(),partFields:VE(),factory:function(o,t,e,n){var r,i=function(t){Zf.getCurrent(t).each(function(t){ld.highlightFirst(t),ig.focusIn(t)})},u=function(t){uw(o,function(t){return t},t,n,i,Ox.HighlightFirst).get(ut)},a=function(t){var e=Mf(t,o,"button");return Ko(e),lt.some(!0)},c=st(st({},Zo([sr(function(n,t){Af(n,o,"aria-descriptor").each(function(t){var e=Kr("aria");Pr(t.element,"id",e),Pr(n.element,"aria-describedby",e)})})])),Bg(lt.some(u))),s={repositionMenus:function(t){Eg.isOn(t)&&fw(t)}};return{uid:o.uid,dom:o.dom,components:t,apis:s,eventOrder:st(st({},o.eventOrder),((r={})[_o()]=["disabling","toggling","alloy.base.behaviour"],r)),events:c,behaviours:Wl(o.splitDropdownBehaviours,[Xx.config({others:{sandbox:function(t){var e=Mf(t,o,"arrow");return lw(o,t,{onOpen:function(){Eg.on(e),Eg.on(t)},onClose:function(){Eg.off(e),Eg.off(t)}})}}}),ig.config({mode:"special",onSpace:a,onEnter:a,onDown:function(t){return u(t),lt.some(!0)}}),hg.config({}),Eg.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:o.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),NE=function(e){return{isDisabled:function(){return mv.isDisabled(e)},setDisabled:function(t){return mv.set(e,t)}}},HE=function(e){return{setActive:function(t){Eg.set(e,t)},isActive:function(){return Eg.isOn(e)},isDisabled:function(){return mv.isDisabled(e)},setDisabled:function(t){return mv.set(e,t)}}},PE=function(t,e){return t.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})},zE=Kr("focus-button"),LE=["checklist","ordered-list"],jE=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],UE=function(e,n,t,o,r,i){var u,a=function(t){return Zh.isRtl()&&A(LE,t)?t+"-rtl":t},c=Zh.isRtl()&&e.exists(function(t){return A(jE,t)});return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:PE(t,i)},components:Kv([e.map(function(t){return UC(a(t),i.icons)}),n.map(function(t){return GC(t,"tox-tbtn",i)})]),eventOrder:((u={})[io()]=["focusing","alloy.base.behaviour","common-button-display-events"],u),buttonBehaviours:rc([Wv(i.isDisabled),zv(),fg("common-button-display-events",[nr(io(),function(t,e){e.event.prevent(),Yo(t,zE)})])].concat(o.map(function(t){return FE.config({channel:t,initialData:{icon:e,text:n},renderComponents:function(t,e){return Kv([t.icon.map(function(t){return UC(a(t),i.icons)}),t.text.map(function(t){return GC(t,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}},WE=function(t,e,n){var o,r=fn(ut),i=UE(t.icon,t.text,t.tooltip,lt.none(),lt.none(),n);return dp.sketch({dom:i.dom,components:i.components,eventOrder:YC,buttonBehaviours:rc([fg("toolbar-button-events",[(o={onAction:t.onAction,getApi:e.getApi},dr(function(e,t){Gv(o,e)(function(t){qo(e,XC,{buttonApi:t}),o.onAction(t)})})),Xv(e,r),Yv(e,r)]),Wv(function(){return t.disabled||n.isDisabled()}),zv()].concat(e.toolbarButtonBehaviours))})},GE=function(t,e,n){return WE(t,{toolbarButtonBehaviours:[].concat(0<n.length?[fg("toolbarButtonWith",n)]:[]),getApi:NE,onSetup:t.onSetup},e)},XE=function(t,e,n){return Pt(WE(t,{toolbarButtonBehaviours:[lg.config({}),Eg.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[fg("toolbarToggleButtonWith",n)]:[]),getApi:HE,onSetup:t.onSetup},e))},YE=function(e,t){var n,o,r,i,u=Kr("channel-update-split-dropdown-display"),a=function(n){return{isDisabled:function(){return mv.isDisabled(n)},setDisabled:function(t){return mv.set(n,t)},setIconFill:function(t,e){qu(n.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Pr(t,"fill",e)})},setIconStroke:function(t,e){qu(n.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Pr(t,"stroke",e)})},setActive:function(e){Pr(n.element,"aria-pressed",e),qu(n.element,"span").each(function(t){n.getSystem().getByDom(t).each(function(t){return Eg.set(t,e)})})},isActive:function(){return qu(n.element,"span").exists(function(t){return n.getSystem().getByDom(t).exists(Eg.isOn)})}}},c=fn(ut),s={getApi:a,onSetup:e.onSetup};return RE.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:st({"aria-pressed":!1},PE(e.tooltip,t.providers))},onExecute:function(t){e.onAction(a(t))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:rc([Uv(t.providers.isDisabled),zv(),fg("split-dropdown-events",[nr(zE,hg.focus),Xv(s,c),Yv(s,c)]),Wy.config({})]),eventOrder:((n={})[No()]=["alloy.base.behaviour","split-dropdown-events"],n),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:(o=a,r=e,i=t.providers,function(e){return Ax(function(t){return r.fetch(t)}).map(function(t){return lt.from(wy(Pt(Qb(Kr("menu-value"),t,function(t){r.onItemAction(o(e),t)},r.columns,r.presets,ih.CLOSE_ON_EXECUTE,r.select.getOr(l),i),{movement:ty(r.columns,r.presets),menuBehaviours:Uh("auto"!==r.columns?[]:[sr(function(o,t){Lh(o,4,hh(r.presets)).each(function(t){var e=t.numRows,n=t.numColumns;ig.setGridSize(o,e,n)})})])})))})}),parts:{menu:xh(0,e.columns,e.presets)},components:[RE.parts.button(UE(e.icon,e.text,lt.none(),lt.some(u),lt.some([Eg.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),RE.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:pp("chevron-down",t.providers.icons)},buttonBehaviours:rc([Uv(t.providers.isDisabled),zv()])}),RE.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})},qE=function(i,u){return nr(XC,function(t,e){var n,o=i.get(t),r=(n=o,{hide:function(){return Yo(n,Bo())},getValue:function(){return Ll.getValue(n)}});u.onAction(r,e.event.buttonApi)})},KE=function(t,e,n){var o,r,i,u,a,c,s,l,f,d,m,g,p={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===e.type?(s=t,f=p,(d=(l=e).original).primary,m=k(d,["primary"]),g=_e(Yp(st(st({},m),{type:"togglebutton",onAction:ut}))),XE(g,f.backstage.shared.providers,[qE(s,l)])):(o=t,i=p,(u=(r=e).original).primary,a=k(u,["primary"]),c=_e(Wp(st(st({},a),{type:"button",onAction:ut}))),GE(c,i.backstage.shared.providers,[qE(o,r)]))},JE=function(t,e){var n,o,r,i,u=t.label.fold(function(){return{}},function(t){return{"aria-label":t}}),a=mp(kx.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:u,selectOnFocus:!0,inputBehaviours:rc([ig.config({mode:"special",onEnter:function(t){return c.findPrimary(t).map(function(t){return Ko(t),!0})},onLeft:function(t,e){return e.cut(),lt.none()},onRight:function(t,e){return e.cut(),lt.none()}})])})),c=(n=a,o=t.commands,r=e,i=R(o,function(t){return mp(KE(n,t,r))}),{asSpecs:function(){return R(i,function(t){return t.asSpec()})},findPrimary:function(n){return Q(o,function(t,e){return t.primary?lt.from(i[e]).bind(function(t){return t.getOpt(n)}).filter(x(mv.isDisabled)):lt.none()})}});return[{title:lt.none(),items:[a.asSpec()]},{title:lt.none(),items:c.asSpecs()}]},$E=JE,QE=function(t,e){var n,o,r,i,u,a=Mu(window),c=Hu(mn.fromDom(t.getContentAreaContainer())),s=wv(t)||kv(t)||Cv(t),l=(n=c,o=a,r=Math.max(o.x,n.x),i=n.right-r,u=o.width-(r-o.x),{x:r,width:Math.min(i,u)}),f=l.x,d=l.width;if(t.inline&&!s)return Nu(f,a.y,d,a.height);var m=function(t,e,n,o){var r=mn.fromDom(t.getContainer()),i=qu(r,".tox-editor-header").getOr(r),u=Hu(i),a=u.y>=e.bottom,c=o&&!a;if(t.inline&&c)return{y:Math.max(u.bottom,n.y),bottom:n.bottom};if(t.inline&&!c)return{y:n.y,bottom:Math.min(u.y,n.bottom)};var s=Hu(r);return c?{y:Math.max(u.bottom,n.y),bottom:Math.min(s.bottom,n.bottom)}:{y:Math.max(s.y,n.y),bottom:Math.min(u.y,n.bottom)}}(t,c,a,e.header.isPositionedAtTop()),g=m.y,p=m.bottom;return Nu(f,g,d,p-g)},ZE=function(e,t){var n=H(t,function(t){return t.predicate(e.dom)}),o=N(n,function(t){return"contexttoolbar"===t.type});return{contextToolbars:o.pass,contextForms:o.fail}},tD=function(t,e,n){var o=ZE(t,e);if(0<o.contextForms.length)return lt.some({elem:t,toolbars:[o.contextForms[0]]});var r=ZE(t,n);if(0<r.contextForms.length)return lt.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;var e=function(e){return M(t,function(t){return t.position===e})},n=function(e){return H(t,function(t){return t.position===e})},o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),u=R(n("selection"),function(t){return st(st({},t),{position:"node"})});return i.concat(u)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return lt.some({elem:t,toolbars:i})}return lt.none()},eD=function(t,e,i){return t(e)?lt.none():Kn(e,function(t){var e=ZE(t,i.inNodeScope),n=e.contextToolbars,o=e.contextForms,r=0<o.length?o:function(t){if(t.length<=1)return t;var e=function(e){return L(t,function(t){return t.position===e})};return e("selection").orThunk(function(){return e("node")}).orThunk(function(){return e("line")}).map(function(t){return t.position}).fold(function(){return[]},function(e){return H(t,function(t){return t.position===e})})}(n);return 0<r.length?lt.some({elem:t,toolbars:r}):lt.none()},t)},nD=function(n,r){var t={},i=[],u=[],a={},c={},o=function(e,n){var o=_e(Oe("ContextForm",th,n));(t[e]=o).launch.map(function(t){a["form:"+e]=st(st({},n.launch),{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?u.push(o):i.push(o),c[e]=o},s=function(e,n){Oe("ContextToolbar",eh,n).each(function(t){"editor"===n.scope?u.push(t):i.push(t),c[e]=t})},e=Ct(n);return dt(e,function(t){var e=n[t];"contextform"===e.type?o(t,e):"contexttoolbar"===e.type&&s(t,e)}),{forms:t,inNodeScope:i,inEditorScope:u,lookupTable:c,formNavigators:a}},oD=Kr("forward-slide"),rD=Kr("backward-slide"),iD=Kr("change-slide-event"),uD="tox-pop--resizing",aD=function(t,e,n){var u,a,r,c,s,o=n.dataset,i="basic"===o.type?function(){return R(o.data,function(t){return G_(t,n.isSelectedFor,n.getPreviewFor)})}:o.getData;return{items:(u=e,a=n,r=function(t,e,n,o){var r=u.shared.providers.translate(t.title);if("separator"===t.type)return lt.some({type:"separator",text:r});if("submenu"!==t.type)return lt.some(st({type:"togglemenuitem",text:r,icon:t.icon,active:t.isSelected(o),disabled:n,onAction:a.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}})));var i=U(t.getStyleItems(),function(t){return c(t,e,o)});return 0===e&&i.length<=0?lt.none():lt.some({type:"nestedmenuitem",text:r,disabled:i.length<=0,getSubmenuItems:function(){return U(t.getStyleItems(),function(t){return c(t,e,o)})}})},c=function(t,e,n){var o="formatter"===t.type&&a.isInvalid(t);return 0===e?o?[]:r(t,e,!1,n).toArray():r(t,e,o,n).toArray()},{validateItems:s=function(t){var e=a.getCurrentValue(),n=a.shouldHide?0:1;return U(t,function(t){return c(t,n,e)})},getFetch:function(r,i){return function(t,e){var n=i(),o=s(n);e(nO(o,ih.CLOSE_ON_EXECUTE,r,!1))}}}),getStyleItems:i}},cD=function(o,t,e){var n=aD(0,t,e),r=n.items,i=n.getStyleItems;return JC({text:e.icon.isSome()?lt.none():lt.some(""),icon:e.icon,tooltip:lt.from(e.tooltip),role:lt.none(),fetch:r.getFetch(t,i),onSetup:function(n){return e.setInitialValue.each(function(t){return t(n.getComponent())}),e.nodeChangeHandler.map(function(t){var e=t(n.getComponent());return o.on("NodeChange",e),function(){o.off("NodeChange",e)}}).getOr(ut)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:e.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};(WO=UO=UO||{})[WO.SemiColon=0]="SemiColon",WO[WO.Space=1]="Space";var sD,lD,fD,dD,mD,gD,pD=function(t,e,n,o){var r,i,u=t.getParam(e,n,"string");return{type:"basic",data:(i=u,r=o===UO.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),R(r,function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}}))}},hD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],vD=function(n){var e=function(t){var e=L(hD,function(t){return n.formatter.match(t.format)}).fold(function(){return"left"},function(t){return t.title.toLowerCase()});qo(t,KC,{icon:"align-"+e})},t=lt.some(function(t){return function(){return e(t)}}),o=lt.some(e),r={type:"basic",data:hD};return{tooltip:"Align",icon:lt.some("align-left"),isSelectedFor:function(t){return function(){return n.formatter.match(t)}},getCurrentValue:lt.none,getPreviewFor:function(t){return function(){return lt.none()}},onAction:function(e){return function(){return L(hD,function(t){return t.format===e.format}).each(function(t){return n.execCommand(t.command)})}},setInitialValue:o,nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!n.formatter.canApply(t.format)}}},bD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],yD=function(t){var e=t.split(/\s*,\s*/);return R(e,function(t){return t.replace(/^['"]+|['"]+$/g,"")})},xD=function(t){var e;return 0===t.indexOf("-apple-system")&&(e=yD(t.toLowerCase()),W(bD,function(t){return-1<e.indexOf(t.toLowerCase())}))},wD=function(r){var i=function(){var n=function(t){return t?yD(t)[0]:""},t=r.queryCommandValue("FontName"),e=u.data,o=t?t.toLowerCase():"";return{matchOpt:L(e,function(t){var e=t.format;return e.toLowerCase()===o||n(e).toLowerCase()===n(o).toLowerCase()}).orThunk(function(){return xD(o)?lt.from({title:"System Font",format:o}):lt.none()}),font:t}},e=function(t){var e=i(),n=e.matchOpt,o=e.font,r=n.fold(function(){return o},function(t){return t.title});qo(t,qC,{text:r})},t=lt.some(function(t){return function(){return e(t)}}),n=lt.some(e),u=pD(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",UO.SemiColon);return{tooltip:"Fonts",icon:lt.none(),isSelectedFor:function(e){return function(t){return t.exists(function(t){return t.format===e})}},getCurrentValue:function(){return i().matchOpt},getPreviewFor:function(t){return function(){return lt.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(t){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,t.format)})}},setInitialValue:n,nodeChangeHandler:t,dataset:u,shouldHide:!1,isInvalid:l}},kD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},SD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},CD=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):Mt(SD,t).getOr(t);var n,o,r},OD=function(n){var i=function(){var o=lt.none(),r=u.data,i=n.queryCommandValue("FontSize");if(i)for(var t=function(t){var e=CD(i,t),n=Mt(kD,e).getOr("");o=L(r,function(t){return t.format===i||t.format===e||t.format===n})},e=3;o.isNone()&&0<=e;e--)t(e);return{matchOpt:o,size:i}},t=at(lt.none),e=function(t){var e=i(),n=e.matchOpt,o=e.size,r=n.fold(function(){return o},function(t){return t.title});qo(t,qC,{text:r})},o=lt.some(function(t){return function(){return e(t)}}),r=lt.some(e),u=pD(n,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",UO.Space);return{tooltip:"Font sizes",icon:lt.none(),isSelectedFor:function(e){return function(t){return t.exists(function(t){return t.format===e})}},getPreviewFor:t,getCurrentValue:function(){return i().matchOpt},onAction:function(t){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("FontSize",!1,t.format)})}},setInitialValue:r,nodeChangeHandler:o,dataset:u,shouldHide:!1,isInvalid:l}},_D=function(t,e){var n=e(),o=R(n,function(t){return t.format});return lt.from(t.formatter.closest(o)).bind(function(e){return L(n,function(t){return t.format===e})}).orThunk(function(){return Kf(t.formatter.match("p"),{title:"Paragraph",format:"p"})})},TD=function(t){var e=fn(lt.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(lt.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(lt.some(t))}}},ED=function(){return TD(function(t){return t.destroy()})},DD=function(){return TD(function(t){return t.unbind()})},BD=function(o,r){return function(e){var n=DD(),t=function(){e.setActive(o.formatter.match(r));var t=o.formatter.formatChanged(r,e.setActive);n.set(t)};return o.initialized?t():o.on("init",t),n.clear}},FD=function(e){return function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})}}},AD=function(n){var e=function(t){var e=_D(n,function(){return r.data}).fold(function(){return"Paragraph"},function(t){return t.title});qo(t,qC,{text:e})},t=lt.some(function(t){return function(){return e(t)}}),o=lt.some(e),r=pD(n,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",UO.SemiColon);return{tooltip:"Blocks",icon:lt.none(),isSelectedFor:function(t){return function(){return n.formatter.match(t)}},getCurrentValue:lt.none,getPreviewFor:function(e){return function(){var t=n.formatter.get(e);return lt.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(e))})}},onAction:FD(n),setInitialValue:o,nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!n.formatter.canApply(t.format)}}},MD=function(r,t){var e=function(t){var n=function(t){var e=t.items;return e!==undefined&&0<e.length?U(e,n):[{title:t.title,format:t.format}]},e=U(W_(r),n),o=_D(r,function(){return e}).fold(function(){return"Paragraph"},function(t){return t.title});qo(t,qC,{text:o})},n=lt.some(function(t){return function(){return e(t)}}),o=lt.some(e);return{tooltip:"Formats",icon:lt.none(),isSelectedFor:function(t){return function(){return r.formatter.match(t)}},getCurrentValue:lt.none,getPreviewFor:function(e){return function(){var t=r.formatter.get(e);return t!==undefined?lt.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:r.dom.parseStyle(r.formatter.getCssText(e))}):lt.none()}},onAction:FD(r),setInitialValue:o,nodeChangeHandler:n,shouldHide:r.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!r.formatter.canApply(t.format)},dataset:t}},ID=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],VD=function(r,i){return function(t,e,n){var o=r(t).mapError(function(t){return Ee(t)}).getOrDie();return i(o,e,n)}},RD={button:VD(Wp,function(t,e){return n=t,o=e.backstage.shared.providers,GE(n,o,[]);var n,o}),togglebutton:VD(Yp,function(t,e){return n=t,o=e.backstage.shared.providers,XE(n,o,[]);var n,o}),menubutton:VD(_E,function(t,e){return rO(t,"tox-tbtn",e.backstage,lt.none())}),splitbutton:VD(function(t){return Oe("SplitButton",TE,t)},function(t,e){return YE(t,e.backstage.shared)}),grouptoolbarbutton:VD(function(t){return Oe("GroupToolbarButton",SE,t)},function(t,e,n){var o,r,i,u,a,c,s=n.ui.registry.getAll().buttons,l=((o={})[Xc]=e.backstage.shared.header.isPositionedAtTop()?ta.TopToBottom:ta.BottomToTop,o);switch(Tv(n)){case oh.floating:return r=t,i=e.backstage,u=function(t){return zD(n,{buttons:s,toolbar:t,allowToolbarGroups:!1},e,lt.none())},a=l,c=i.shared,LT.sketch({lazySink:c.getSink,fetch:function(){return Ax(function(t){t(R(u(r.items),vE))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:UE(r.icon,r.text,r.tooltip,lt.none(),lt.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:a}}}});default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=st({type:"advanced"},o.styleselect),cD(n,o,MD(n,r));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,cD(n,o,OD(n));var n,o},fontSelectButton:function(t,e){return n=t,o=e.backstage,cD(n,o,wD(n));var n,o},formatButton:function(t,e){return n=t,o=e.backstage,cD(n,o,AD(n));var n,o},alignMenuButton:function(t,e){return n=t,o=e.backstage,cD(n,o,vD(n));var n,o}},ND={styleselect:RD.styleSelectButton,fontsizeselect:RD.fontsizeSelectButton,fontselect:RD.fontSelectButton,formatselect:RD.formatButton,align:RD.alignMenuButton},HD=function(t){var e,n,o,r=t.toolbar,i=t.buttons;return!1===r?[]:r===undefined||!0===r?(n=i,o=R(ID,function(t){var e=H(t.items,function(t){return It(n,t)||It(ND,t)});return{name:t.name,items:e}}),H(o,function(t){return 0<t.items.length})):C(r)?(e=r.split("|"),R(e,function(t){return{items:t.trim().split(" ")}})):b(r,function(t){return It(t,"name")&&It(t,"items")})?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},PD=function(r,e,i,u,a,t){return Mt(e,i.toLowerCase()).orThunk(function(){return t.bind(function(t){return Q(t,function(t){return Mt(e,t+i.toLowerCase())})})}).fold(function(){return Mt(ND,i.toLowerCase()).map(function(t){return t(r,a)}).orThunk(function(){return lt.none()})},function(t){return"grouptoolbarbutton"!==t.type||u?(n=a,o=r,Mt(RD,(e=t).type).fold(function(){return console.error("skipping button defined by",e),lt.none()},function(t){return lt.some(t(e,n,o))})):(console.warn("Ignoring the '"+i+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),lt.none());var e,n,o})},zD=function(n,o,r,i){var t=HD(o),e=R(t,function(t){var e=U(t.items,function(t){return 0===t.trim().length?[]:PD(n,o.buttons,t,o.allowToolbarGroups,r,i).toArray()});return{title:lt.from(n.translate(t.name)),items:e}});return H(e,function(t){return 0<t.items.length})},LD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},jD={maxHeightFunction:Ac(),maxWidthFunction:kT()},UD={onLtr:function(){return[La,ja,Pa,Na,za,Ha,sp,lp,ap,ip,cp,up]},onRtl:function(){return[La,ja,za,Ha,Pa,Na,sp,lp,cp,up,ap,ip]}},WD={onLtr:function(){return[ja,Na,Ha,Pa,za,La,sp,lp,ap,ip,cp,up]},onRtl:function(){return[ja,Ha,Na,za,Pa,La,sp,lp,cp,up,ap,ip]}},GD=function(c,t,n,s){var o,r,l=jn().deviceType.isTouch,a=mu((o={sink:n,onEscape:function(){return c.focus(),lt.some(!0)}},r=fn([]),Zg.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){r.set([]),Zg.getContent(t).each(function(t){tu(t.element,"visibility")}),Di(t.element,uD),tu(t.element,"width")},inlineBehaviours:rc([fg("context-toolbar-events",[cr(bo(),function(t,e){Di(t.element,uD),tu(t.element,"width")}),nr(iD,function(t,e){var n=t.element;tu(n,"width");var o=Ou(n);Zg.setContent(t,e.event.contents),Ti(n,uD);var r=Ou(n);Yi(n,"width",o+"px"),Zg.getContent(t).each(function(t){e.event.focus.bind(function(t){return dc(t),gc(n)}).orThunk(function(){return ig.focusIn(t),mc(Ni(n))})}),fp.setTimeout(function(){Yi(t.element,"width",r+"px")},0)}),nr(oD,function(e,t){Zg.getContent(e).each(function(t){r.set(r.get().concat([{bar:t,focus:mc(Ni(e.element))}]))}),qo(e,iD,{contents:t.event.forwardContents,focus:lt.none()})}),nr(rD,function(e,t){J(r.get()).each(function(t){r.set(r.get().slice(0,r.get().length-1)),qo(e,iD,{contents:gu(t.bar),focus:t.focus})})})]),ig.config({mode:"special",onEscape:function(e){return J(r.get()).fold(function(){return o.onEscape()},function(t){return Yo(e,rD),lt.some(!0)})}})]),lazySink:function(){return gt.value(o.sink)}}))),f=function(){return QE(c,s.backstage.shared)},u=function(){if(l()&&s.backstage.isContextMenuOpen())return!0;var t,e,n,o,r,i,u=(t=m.get().filter(function(t){return ji(mn.fromDom(t))}).map(function(t){return t.getBoundingClientRect()}).getOrThunk(function(){return c.selection.getRng().getBoundingClientRect()}),e=c.inline?Bu().top:Pu(mn.fromDom(c.getBody())).y,{y:t.top+e,bottom:t.bottom+e}),a=f();return n=u.y,o=u.bottom,r=a.y,i=a.bottom,!(Math.max(n,r)<=Math.min(o,i))},e=function(){Zg.hide(a)},i=function(){d.get().each(function(t){var e=a.element;tu(e,"display"),u()?Yi(e,"display","none"):Zs.positionWithinBounds(n,t,a,lt.some(f()))})},d=fn(lt.none()),m=fn(lt.none()),g=fn(null),p=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:rc([ig.config({mode:"acyclic"}),fg("pop-dialog-wrap-events",[sr(function(t){c.shortcuts.add("ctrl+F9","focus statusbar",function(){return ig.focusIn(t)})}),lr(function(t){c.shortcuts.remove("ctrl+F9")})])])}},h=Lt(function(){return nD(t,function(t){var e=v([t]);qo(a,oD,{forwardContents:p(e)})})}),v=function(t){var e=c.ui.registry.getAll().buttons,n=h(),o=st(st({},e),n.formNavigators),r=Tv(c)===oh.scrolling?oh.scrolling:oh["default"],i=mt(R(t,function(t){return"contexttoolbar"===t.type?zD(c,{buttons:o,toolbar:t.items,allowToolbarGroups:!1},s,lt.some(["form:"])):(e=t,n=s.backstage.shared.providers,$E(e,n));var e,n}));return kE({type:r,uid:Kr("context-toolbar"),initGroups:i,onEscape:lt.none,cyclicKeying:!0,providers:s.backstage.shared.providers})};c.on("contexttoolbar-show",function(e){var t=h();Mt(t.lookupTable,e.toolbarKey).each(function(t){y([t],e.target===c?lt.none():lt.some(e)),Zg.getContent(a).each(ig.focusIn)})});var b=function(t,e){var n,o,r="node"===t?s.backstage.shared.anchors.node(e):s.backstage.shared.anchors.cursor();return Pt(r,(n=t,o=l(),"line"===n?{bubble:Nc(12,0,LD),layouts:{onLtr:function(){return[Ua]},onRtl:function(){return[Wa]}},overrides:jD}:{bubble:Nc(0,12,LD),layouts:o?WD:UD,overrides:jD}))},y=function(t,e){var n,o,r,i;w(),l()&&s.backstage.isContextMenuOpen()||(n=v(t),o=e.map(mn.fromDom),r=b(t[0].position,o),d.set(lt.some(r)),m.set(e),i=a.element,tu(i,"display"),Zg.showWithinBounds(a,r,p(n),function(){return lt.some(f())}),u()&&Yi(i,"display","none"))},x=function(){var t,e,n,o,r,i,u;c.hasFocus()&&(t=h(),e=t,n=c,r=mn.fromDom(n.getBody()),i=function(t){return Gn(t,r)},u=mn.fromDom(n.selection.getNode()),(i(o=u)||Yn(r,o)?tD(u,e.inNodeScope,e.inEditorScope).orThunk(function(){return eD(i,u,e)}):lt.none()).fold(function(){d.set(lt.none()),Zg.hide(a)},function(t){y(t.toolbars,lt.some(t.elem.dom))}))},w=function(){var t=g.get();null!==t&&(fp.clearTimeout(t),g.set(null))},k=function(t){w(),g.set(t)};c.on("init",function(){c.on(ST,e),c.on("ScrollContent ScrollWindow longpress",i),c.on("click keyup focus SetContent ObjectResized ResizeEditor",function(){k(fp.setEditorTimeout(c,x,0))}),c.on("focusout",function(t){fp.setEditorTimeout(c,function(){gc(n.element).isNone()&&gc(a.element).isNone()&&(d.set(lt.none()),Zg.hide(a))},0)}),c.on("SwitchMode",function(){c.mode.isReadOnly()&&(d.set(lt.none()),Zg.hide(a))}),c.on("NodeChange",function(t){gc(a.element).fold(function(){k(fp.setEditorTimeout(c,x,0))},function(t){})})})},XD=zf,YD=Sf,qD=at([tn("shell",!1),ze("makeItem"),tn("setupItem",ut),Gl("listBehaviours",[lg])]),KD=xf({name:"items",overrides:function(){return{behaviours:rc([lg.config({})])}}}),JD=at([KD]),$D=Yf({name:at("CustomList")(),configFields:qD(),partFields:JD(),factory:function(s,t,e,n){var o=s.shell?{behaviours:[lg.config({})],components:[]}:{behaviours:[],components:t},r=function(t){return s.shell?lt.some(t):Af(t,s,"items")};return{uid:s.uid,dom:s.dom,components:o.components,behaviours:Wl(s.listBehaviours,o.behaviours),apis:{setItems:function(a,c){r(a).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(e){var t=lg.contents(e),n=c.length,o=n-t.length,r=0<o?I(o,function(){return s.makeItem()}):[],i=t.slice(n);dt(i,function(t){return lg.remove(e,t)}),dt(r,function(t){return lg.append(e,t)});var u=lg.contents(e);dt(u,function(t,e){s.setupItem(a,t,c[e],e)})})}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),QD=at([]),ZD=/* */Object.freeze({__proto__:null,setup:ut,isDocked:l,getBehaviours:QD}),tB=function(t){return(Qi(t,"position").is("fixed")?lt.none():Or(t)).orThunk(function(){var n=mn.fromTag("span");return Sr(t).bind(function(t){Fr(t,n);var e=Or(n);return Ir(n),e})})},eB=function(t){return tB(t).map(ku).getOrThunk(function(){return xu(0,0)})},nB=Rt([{"static":[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),oB=function(t,e){var n=t.element;Ti(n,e.transitionClass),Di(n,e.fadeOutClass),Ti(n,e.fadeInClass),e.onShow(t)},rB=function(t,e){var n=t.element;Ti(n,e.transitionClass),Di(n,e.fadeInClass),Ti(n,e.fadeOutClass),e.onHide(t)},iB=function(t,o,r){return W(t,function(t){switch(t){case"bottom":return n=r,o.bottom<=n.bottom;case"top":return e=r,o.y>=e.y}var e,n})},uB=function(e,t){return t.getInitialPosition().map(function(t){return Nu(t.bounds.x,t.bounds.y,Ou(e),vu(e))})},aB=function(t,e,n){n.setInitialPosition(lt.some({style:function(t){var e={},n=t.dom;if(Mi(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e}(t),position:Ji(t,"position")||"static",bounds:e}))},cB=function(n,o,r){return r.getInitialPosition().bind(function(t){switch(r.setInitialPosition(lt.none()),t.position){case"static":return lt.some(nB["static"]());case"absolute":var e=tB(n).map(Hu).getOrThunk(function(){return Hu(Ui())});return lt.some(nB.absolute(hc("absolute",Mt(t.style,"left").map(function(t){return o.x-e.x}),Mt(t.style,"top").map(function(t){return o.y-e.y}),Mt(t.style,"right").map(function(t){return e.right-o.right}),Mt(t.style,"bottom").map(function(t){return e.bottom-o.bottom}))));default:return lt.none()}})},sB=function(t,e,n){var o,r,i,u=t.element;return Qi(u,"position").is("fixed")?(r=e,uB(o=u,i=n).filter(function(t){return iB(i.getModes(),t,r)}).bind(function(t){return cB(o,t,i)})):function(t,e,n){var o=Hu(t);if(iB(n.getModes(),o,e))return lt.none();aB(t,o,n);var r=zu(),i=o.x-r.x,u=e.y-r.y,a=r.bottom-e.bottom,c=o.y<=e.y;return lt.some(nB.fixed(hc("fixed",lt.some(i),c?lt.some(u):lt.none(),lt.none(),c?lt.none():lt.some(a))))}(u,e,n)},lB=function(e,t){dt(["left","right","top","bottom","position"],function(t){return tu(e.element,t)}),t.onUndocked(e)},fB=function(t,e,n){vc(t.element,n),("fixed"===n.position?e.onDocked:e.onUndocked)(t)},dB=function(i,t,u,a,c){void 0===c&&(c=!1),t.contextual.each(function(r){r.lazyContext(i).each(function(t){var e,n,o=(n=a,(e=t).y<n.bottom&&e.bottom>n.y);o!==u.isVisible()&&(u.setVisible(o),c&&!o?(Fi(i.element,[r.fadeOutClass]),r.onHide(i)):(o?oB:rB)(i,r))})})},mB=function(e,n,t){var o,r,i=e.element;t.setDocked(!1),o=t,r=e.element,uB(r,o).bind(function(t){return cB(r,t,o)}).each(function(t){t.fold(function(){return lB(e,n)},function(t){return fB(e,n,t)},ut)}),t.setVisible(!0),n.contextual.each(function(t){Ai(i,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)}),gB(e,n,t)},gB=function(t,e,n){var o,r,i,u,a;t.getSystem().isConnected()&&(o=t,i=n,u=(r=e).lazyViewport(o),(a=i.isDocked())&&dB(o,r,i,u),sB(o,u,i).each(function(t){i.setDocked(!a),t.fold(function(){return lB(o,r)},function(t){return fB(o,r,t)},function(t){dB(o,r,i,u,!0),fB(o,r,t)})}))},pB=function(t,e,n){n.isDocked()&&mB(t,e,n)},hB=/* */Object.freeze({__proto__:null,refresh:gB,reset:pB,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),vB=/* */Object.freeze({__proto__:null,events:function(o,r){return Zo([cr(bo(),function(e,n){o.contextual.each(function(t){Bi(e.element,t.transitionClass)&&(Ai(e.element,[t.transitionClass,t.fadeInClass]),(r.isVisible()?t.onShown:t.onHidden)(e)),n.stop()})}),nr(Vo(),function(t,e){gB(t,o,r)}),nr(Ro(),function(t,e){pB(t,o,r)})])}}),bB=[Ze("contextual",[je("fadeInClass"),je("fadeOutClass"),je("transitionClass"),We("lazyContext"),ma("onShow"),ma("onShown"),ma("onHide"),ma("onHidden")]),an("lazyViewport",zu),cn("modes",["top","bottom"],Ie),ma("onDocked"),ma("onUndocked")],yB=uc({fields:bB,name:"docking",active:vB,apis:hB,state:/* */Object.freeze({__proto__:null,init:function(t){var e=fn(!1),n=fn(!0),o=fn(lt.none()),r=fn(t.modes);return di({isDocked:e.get,setDocked:e.set,getInitialPosition:o.get,setInitialPosition:o.set,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),xB={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},wB="tox-tinymce--toolbar-sticky-on",kB="tox-tinymce--toolbar-sticky-off",SB=function(r){var i=r.element;Sr(i).each(function(t){var e,n,o="padding-"+yB.getModes(r)[0];yB.isDocked(r)?(e=Ou(t),Yi(i,"width",e+"px"),Yi(t,o,bu(n=i)+(parseInt(Ji(n,"margin-top"),10)||0)+(parseInt(Ji(n,"margin-bottom"),10)||0)+"px")):(tu(i,"width"),tu(t,o))})},CB=function(t,e){e?(Di(t,xB.fadeOutClass),Fi(t,[xB.transitionClass,xB.fadeInClass])):(Di(t,xB.fadeInClass),Fi(t,[xB.fadeOutClass,xB.transitionClass]))},OB=function(t,e){var n=mn.fromDom(t.getContainer());e?(Ti(n,wB),Di(n,kB)):(Ti(n,kB),Di(n,wB))},_B=function(c,t){var e,i=fn(lt.none()),o=t.getSink,u=function(e){o().each(function(t){return e(t.element)})},n=function(t){c.inline||SB(t),OB(c,yB.isDocked(t)),t.getSystem().broadcastOn([Sl()],{}),o().each(function(t){return t.getSystem().broadcastOn([Sl()],{})})},r=c.inline?[]:[lc.config({channels:((e={})[pE()]={onReceive:SB},e)})];return S([hg.config({}),yB.config({contextual:st({lazyContext:function(t){var e,n,o=bu(t.element),r=c.inline?c.getContentAreaContainer():c.getContainer(),i=Hu(mn.fromDom(r)),u=i.height-o,a=i.y+(e=t,n="top",A(yB.getModes(e),n)?0:o);return lt.some(Nu(i.x,a,i.width,u))},onShow:function(){u(function(t){return CB(t,!0)})},onShown:function(r){u(function(t){return Ai(t,[xB.transitionClass,xB.fadeInClass])}),i.get().each(function(t){var e,n,o;e=r.element,o=yr(n=t),mc(o).filter(function(t){return!Gn(n,t)}).filter(function(t){return Gn(t,mn.fromDom(o.dom.body))||Yn(e,t)}).each(function(){return dc(n)}),i.set(lt.none())})},onHide:function(t){var e,n;i.set((e=t.element,n=o,gc(e).orThunk(function(){return n().toOptional().bind(function(t){return gc(t.element)})}))),u(function(t){return CB(t,!1)})},onHidden:function(){u(function(t){return Ai(t,[xB.transitionClass])})}},xB),modes:[t.header.getDockingMode()],onDocked:n,onUndocked:n})],r)},TB=/* */Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",function(){n().each(yB.reset)}),t.on("ResizeWindow ResizeEditor",function(){n().each(SB)}),t.on("SkinLoaded",function(){n().each(function(t){yB.isDocked(t)?yB.reset(t):yB.refresh(t)})}),t.on("FullscreenStateChanged",function(){n().each(yB.reset)})),t.on("AfterScrollIntoView",function(y){n().each(function(t){yB.refresh(t);var e,n,o,r,i,u,a,c,s,l,f,d,m,g,p,h,v,b=t.element;Zd(b)&&(e=y,r=yr(n=b),i=r.dom.defaultView.innerHeight,u=Bu(r),a=mn.fromDom(e.elm),c=Pu(a),s=vu(a),l=c.y,f=l+s,d=ku(n),m=vu(n),g=d.top,p=g+m,h=Math.abs(g-u.top)<2,v=Math.abs(p-(u.top+i))<2,h&&l<p?Fu(u.left,l-m,r):v&&g<f&&(o=l-i+s+m,Fu(u.left,o,r)))})}),t.on("PostRender",function(){OB(t,!1)})},isDocked:function(t){return t().map(yB.isDocked).getOr(!1)},getBehaviours:_B}),EB=Xf({factory:function(e,o){var t={focus:ig.focusIn,setMenus:function(t,e){var n=R(e,function(e){var t={type:"menubutton",text:e.text,fetch:function(t){t(e.getItems())}},n=_E(t).mapError(function(t){return Ee(t)}).getOrDie();return rO(n,"tox-mbtn",o.backstage,lt.some("menuitem"))});lg.set(t,n)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:rc([lg.config({}),fg("menubar-events",[sr(function(t){e.onSetup(t)}),nr(so(),function(n,t){qu(n.element,".tox-mbtn--active").each(function(e){Ku(t.event.target,".tox-mbtn").each(function(t){Gn(e,t)||n.getSystem().getByDom(e).each(function(e){n.getSystem().getByDom(t).each(function(t){pw.expand(t),pw.close(e),hg.focus(t)})})})})}),nr(Lo(),function(n,t){t.event.prevFocus.bind(function(t){return n.getSystem().getByDom(t).toOptional()}).each(function(e){t.event.newFocus.bind(function(t){return n.getSystem().getByDom(t).toOptional()}).each(function(t){pw.isOpen(e)&&(pw.expand(t),pw.close(e))})})})]),ig.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return e.onEscape(t),lt.some(!0)}}),tx.config({})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ze("dom"),ze("uid"),ze("onEscape"),ze("backstage"),tn("onSetup",ut)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),DB="container",BB=[jl("slotBehaviours",[])],FB=function(t){return"<alloy.field."+t+">"},AB=function(r,t){var n,e=function(t){return Rf(r)},o=function(n,o){return function(t,e){return Af(t,r,e).map(function(t){return n(t,e)}).getOr(o)}},i=function(t,e){return"true"!==zr(t.element,"aria-hidden")},u=o(i,!1),a=o(function(t,e){var n;i(t)&&(n=t.element,Yi(n,"display","none"),Pr(n,"aria-hidden","true"),qo(t,jo(),{name:e,visible:!1}))}),c=function(e,t){dt(t,function(t){return n(e,t)})},s=o(function(t,e){var n;i(t)||(n=t.element,tu(n,"display"),Ur(n,"aria-hidden"),qo(t,jo(),{name:e,visible:!0}))}),l={getSlotNames:e,getSlot:function(t,e){return Af(t,r,e)},isShowing:u,hideSlot:n=a,hideAllSlots:function(t){return c(t,e())},showSlot:s};return{uid:r.uid,dom:r.dom,components:t,behaviours:Ul(r.slotBehaviours),apis:l}},MB=Tt({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},li),IB=st(st({},MB),{sketch:function(t){var n,e=(n=[],{slot:function(t,e){return n.push(t),Tf(DB,FB(t),e)},record:function(){return n}}),o=t(e),r=e.record(),i=R(r,function(t){return bf({name:t,pname:FB(t)})});return jf(DB,BB,i,AB,o)}}),VB=le([$e("icon"),$e("tooltip"),an("onShow",ut),an("onHide",ut),an("onSetup",function(){return ut})]),RB=function(t){return{element:function(){return t.element.dom}}},NB=function(n,o){var r=R(Ct(o),function(t){var e=o[t],n=_e(Oe("sidebar",VB,e));return{name:t,getApi:RB,onSetup:n.onSetup,onShow:n.onShow,onHide:n.onHide}});return R(r,function(t){var e=fn(ut);return n.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Uh([Xv(t,e),Yv(t,e),nr(jo(),function(e,t){var n=t.event;L(r,function(t){return t.name===n.name}).each(function(t){(n.visible?t.onShow:t.onHide)(t.getApi(e))})})])})})},HB=function(t,n){Zf.getCurrent(t).each(function(t){return lg.set(t,[(e=n,IB.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:NB(t,e),slotBehaviours:Uh([sr(function(t){return IB.hideAllSlots(t)})])}}))]);var e})},PB=function(t){return Zf.getCurrent(t).bind(function(t){return sE.isGrowing(t)||sE.hasGrown(t)?Zf.getCurrent(t).bind(function(e){return L(IB.getSlotNames(e),function(t){return IB.isShowing(e,t)})}):lt.none()})},zB=Kr("FixSizeEvent"),LB=Kr("AutoSizeEvent"),jB=function(t){var e,n,o,r=mn.fromHtml(t),i=_r(r),u=(n=(e=r).dom.attributes!==undefined?e.dom.attributes:[],z(n,function(t,e){var n;return"class"===e.name?t:st(st({},t),((n={})[e.name]=e.value,n))},{})),a=(o=r,Array.prototype.slice.call(o.dom.classList,0)),c=0===i.length?{}:{innerHtml:Rr(r)};return st({tag:mr(r),classes:a,attributes:u},c)},UB=function(t,e,n){var o=t.element;!0===e?(lg.set(t,[{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:jB('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:rc([ig.config({mode:"special",onTab:function(){return lt.some(!0)},onShiftTab:function(){return lt.some(!0)}}),hg.config({})])}]),tu(o,"display"),Ur(o,"aria-hidden")):(lg.set(t,[]),Yi(o,"display","none"),Pr(o,"aria-hidden","true"))},WB=YD.optional({factory:EB,name:"menubar",schema:[ze("backstage")]}),GB=YD.optional({factory:{sketch:function(t){return $D.sketch({uid:t.uid,dom:t.dom,listBehaviours:rc([ig.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return kE({type:t.type,uid:Kr("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),lt.some(!0)}})},setupItem:function(t,e,n,o){_T.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[ze("dom"),ze("onEscape")]}),XB=YD.optional({factory:{sketch:function(t){var e;return((e=t).type===oh.sliding?wE:e.type===oh.floating?xE:kE)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),lt.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[ze("dom"),ze("onEscape"),ze("getSink")]}),YB=YD.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?_B:QD;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:rc(n(e,t.sharedBackstage))}}},name:"header",schema:[ze("dom")]}),qB=YD.optional({name:"socket",schema:[ze("dom")]}),KB=YD.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:rc([tx.config({}),hg.config({}),sE.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){Zf.getCurrent(t).each(IB.hideAllSlots),Yo(t,LB)},onGrown:function(t){Yo(t,LB)},onStartGrow:function(t){qo(t,zB,{width:Qi(t.element,"width").getOr("")})},onStartShrink:function(t){qo(t,zB,{width:Ou(t.element)+"px"})}}),lg.config({}),Zf.config({find:function(t){var e=lg.contents(t);return K(e)}})])}],behaviours:rc([ox(0),fg("sidebar-sliding-events",[nr(zB,function(t,e){Yi(t.element,"width",e.event.width)}),nr(LB,function(t,e){tu(t.element,"width")})])])}}},name:"sidebar",schema:[ze("dom")]}),JB=YD.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:rc([lg.config({})]),components:[]}}},name:"throbber",schema:[ze("dom")]}),$B=Yf({name:"OuterContainer",factory:function(n,t,e){var o={getSocket:function(t){return XD.getPart(t,n,"socket")},setSidebar:function(t,e){XD.getPart(t,n,"sidebar").each(function(t){return HB(t,e)})},toggleSidebar:function(t,o){XD.getPart(t,n,"sidebar").each(function(t){return e=t,n=o,void Zf.getCurrent(e).each(function(e){Zf.getCurrent(e).each(function(t){sE.hasGrown(e)?IB.isShowing(t,n)?sE.shrink(e):(IB.hideAllSlots(t),IB.showSlot(t,n)):(IB.hideAllSlots(t),IB.showSlot(t,n),sE.grow(e))})});var e,n})},whichSidebar:function(t){return XD.getPart(t,n,"sidebar").bind(PB).getOrNull()},getHeader:function(t){return XD.getPart(t,n,"header")},getToolbar:function(t){return XD.getPart(t,n,"toolbar")},setToolbar:function(t,e){XD.getPart(t,n,"toolbar").each(function(t){t.getApis().setGroups(t,e)})},setToolbars:function(t,e){XD.getPart(t,n,"multiple-toolbar").each(function(t){$D.setItems(t,e)})},refreshToolbar:function(t){XD.getPart(t,n,"toolbar").each(function(t){return t.getApis().refresh(t)})},toggleToolbarDrawer:function(t){XD.getPart(t,n,"toolbar").each(function(e){var t,n;t=e.getApis().toggle,n=function(t){return t(e)},t!==undefined&&null!==t?lt.some(n(t)):lt.none()})},isToolbarDrawerToggled:function(t){return XD.getPart(t,n,"toolbar").bind(function(e){return lt.from(e.getApis().isOpen).map(function(t){return t(e)})}).getOr(!1)},getThrobber:function(t){return XD.getPart(t,n,"throbber")},focusToolbar:function(t){XD.getPart(t,n,"toolbar").orThunk(function(){return XD.getPart(t,n,"multiple-toolbar")}).each(function(t){ig.focusIn(t)})},setMenubar:function(t,e){XD.getPart(t,n,"menubar").each(function(t){EB.setMenus(t,e)})},focusMenubar:function(t){XD.getPart(t,n,"menubar").each(function(t){EB.focus(t)})}};return{uid:n.uid,dom:n.dom,components:t,apis:o,behaviours:n.behaviours}},configFields:[ze("dom"),ze("behaviours")],partFields:[YB,WB,XB,GB,qB,KB,JB],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=R(n,vE);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=R(n,function(t){return R(t,vE)});t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),QB={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},ZB=function(t){return"string"==typeof t?t.split(" "):t},tF=function(i,u){var a=st(st({},QB),u.menus),e=0<Ct(u.menus).length,t=u.menubar===undefined||!0===u.menubar?ZB("file edit view insert format tools table help"):ZB(!1===u.menubar?"":u.menubar),n=H(t,function(t){return e&&u.menus.hasOwnProperty(t)&&u.menus[t].hasOwnProperty("items")||QB.hasOwnProperty(t)}),o=R(n,function(t){var e,n,o,r=a[t];return e={title:r.title,items:ZB(r.items)},n=u,o=i.getParam("removed_menuitems","").split(/[ ,]/),{text:e.title,getItems:function(){return U(e.items,function(t){var e=t.toLowerCase();return 0===e.trim().length||M(o,function(t){return t===e})?[]:"separator"===e||"|"===e?[{type:"separator"}]:n.menuItems[e]?[n.menuItems[e]]:[]})}}});return H(o,function(t){return 0<t.getItems().length&&M(t.getItems(),function(t){return"separator"!==t.type})})},eF=function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}},nF=function(e,n){return function(){return t={message:n},e.fire("SkinLoadError",t);var t}},oF=function(n,o,r){return new Ap(function(t,e){r.load(o,t,e),n.on("remove",function(){return r.unload(o)})})},rF=function(t,e){var n;return(n=mn.fromDom(t.getElement()),Pi(n).isSome())?oF(t,e+"/skin.shadowdom.min.css",Qh.DOM.styleSheetLoader):Ap.resolve()},iF=function(t,e){var n,o,r,i,u,a=(r=(n=e).getParam("skin"),i=n.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?n.documentBaseURI.toAbsolute(i):gv.baseURL+"/skins/ui/"+o),i);a&&e.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!1==(!1===e.getParam("skin"))&&C(a)?Ap.all([oF(u=e,a+"/skin.min.css",u.ui.styleSheetLoader),rF(e,a)]).then(eF(e),nF(e,"Skin could not be loaded")):eF(e)()},uF=y(iF,!1),aF=y(iF,!0),cF=function(n,t,o,r){var e,i=t.outerContainer,u=o.toolbar,a=o.buttons;b(u,C)?(e=u.map(function(t){var e={toolbar:t,buttons:a,allowToolbarGroups:o.allowToolbarGroups};return zD(n,e,{backstage:r},lt.none())}),$B.setToolbars(i,e)):$B.setToolbar(i,zD(n,o,{backstage:r},lt.none()))},sF=jn(),lF=sF.os.isiOS()&&sF.os.version.major<=12,fF=function(n,t){var e=n.dom,o=n.getWin(),r=n.getDoc().documentElement,i=fn(xu(o.innerWidth,o.innerHeight)),u=fn(xu(r.offsetWidth,r.offsetHeight)),a=function(){var t=i.get();t.left===o.innerWidth&&t.top===o.innerHeight||(i.set(xu(o.innerWidth,o.innerHeight)),Ab(n))},c=function(){var t=n.getDoc().documentElement,e=u.get();e.left===t.offsetWidth&&e.top===t.offsetHeight||(u.set(xu(t.offsetWidth,t.offsetHeight)),Ab(n))},s=function(t){return e=t,n.fire("ScrollContent",e);var e};e.bind(o,"resize",a),e.bind(o,"scroll",s);var l=Oy(mn.fromDom(n.getBody()),"load",c),f=t.uiMothership.element;n.on("hide",function(){Yi(f,"display","none")}),n.on("show",function(){tu(f,"display")}),n.on("NodeChange",c),n.on("remove",function(){l.unbind(),e.unbind(o,"resize",a),e.unbind(o,"scroll",s),o=null})},dF=/* */Object.freeze({__proto__:null,render:function(n,e,t,o,r){var i=fn(0),u=e.outerContainer;uF(n);var a,c,s=mn.fromDom(r.targetNode),l=Hi(Ni(s));a=s,c=e.mothership,ll(a,c,Dr),sl(l,e.uiMothership),n.on("PostRender",function(){cF(n,e,t,o),i.set(n.getWin().innerWidth),$B.setMenubar(u,tF(n,t)),$B.setSidebar(u,t.sidebar),fF(n,e)});var f,d,m,g,p,h=$B.getSocket(u).getOrDie("Could not find expected socket element");lF&&(qi(h.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),m=function(){n.fire("ScrollContent")},g=20,p=null,f={cancel:function(){null!==p&&(clearTimeout(p),p=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===p&&(p=setTimeout(function(){m.apply(null,t),p=null},g))}},d=Cy(h.element,"scroll",f.throttle),n.on("remove",d.unbind)),Pv(n,e),n.addCommand("ToggleSidebar",function(t,e){$B.toggleSidebar(u,e),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return $B.whichSidebar(u)});var v=Tv(n);v!==oh.sliding&&v!==oh.floating||n.on("ResizeWindow ResizeEditor ResizeContent",function(){var t=n.getWin().innerWidth;t!==i.get()&&($B.refreshToolbar(e.outerContainer),i.set(t))});var b={enable:function(){Hv(e,!1)},disable:function(){Hv(e,!0)},isDisabled:function(){return mv.isDisabled(u)}};return{iframeContainer:h.element.dom,editorContainer:u.element.dom,api:b}}}),mF=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?lt.some(parseInt(""+t,10)):lt.none()},gF=function(t){return ft(t)?t+"px":t},pF=function(e,t,n){var o=t.filter(function(t){return e<t}),r=n.filter(function(t){return t<e});return o.or(r).getOr(e)},hF=function(t){var e,n,o,r;return(n=pv(e=t),o=bv(e),r=xv(e),mF(n).map(function(t){return pF(t,o,r)})).getOr(pv(t))},vF=function(t){var e=hv(t),n=vv(t),o=yv(t);return mF(e).map(function(t){return pF(t,n,o)})},bF=function(a,c,t,e,s){var n=t.uiMothership,l=t.outerContainer,o=Qh.DOM,f=Av(a),d=Vv(a),m=yv(a).or(vF(a)),r=e.shared.header,g=r.isPositionedAtTop,i=Tv(a),p=i===oh.sliding||i===oh.floating,u=fn(!1),h=function(){return u.get()&&!a.removed},v=function(t){return p?t.fold(function(){return 0},function(t){return 1<t.components().length?vu(t.components()[1].element):0}):0},b=function(){n.broadcastOn([Sl()],{})},y=function(t){var e,n,o,r,i,u;void 0===t&&(t=!1),h()&&(f||(e=m.getOrThunk(function(){var t=mF(Ji(Ui(),"margin-left")).getOr(0);return Ou(Ui())-ku(c).left+t}),Yi(s.get().element,"max-width",e+"px")),p&&$B.refreshToolbar(l),f||(n=$B.getToolbar(l),o=v(n),r=Hu(c),i=g()?Math.max(r.y-vu(s.get().element)+o,0):r.bottom,qi(l.element,{position:"absolute",top:Math.round(i)+"px",left:Math.round(r.x)+"px"})),d&&(u=s.get(),t?yB.reset(u):yB.refresh(u)),b())},x=function(t){var e,n;void 0===t&&(t=!0),!f&&d&&h()&&(e=r.getDockingMode(),(n=function(t){switch(Dv(a)){case Ov.auto:var e=$B.getToolbar(l),n=v(e),o=vu(t.element)-n,r=Hu(c);if(r.y>o)return"top";var i=wr(c),u=Math.max(i.dom.scrollHeight,vu(i));return r.bottom<u-o||zu().bottom<r.bottom-o?"bottom":"top";case Ov.bottom:return"bottom";case Ov.top:default:return"top"}}(s.get()))!==e&&(function(t){var e=s.get();yB.setModes(e,[t]),r.setDockingMode(t);var n=g()?ta.TopToBottom:ta.BottomToTop;Pr(e.element,Xc,n)}(n),t&&y(!0)))};return{isVisible:h,isPositionedAtTop:g,show:function(){u.set(!0),Yi(l.element,"display","flex"),o.addClass(a.getBody(),"mce-edit-focus"),tu(n.element,"display"),x(!1),y()},hide:function(){u.set(!1),t.outerContainer&&(Yi(l.element,"display","none"),o.removeClass(a.getBody(),"mce-edit-focus")),Yi(n.element,"display","none")},update:y,updateMode:x,repositionPopups:b}},yF=function(t,e){var n=Hu(t);return{pos:e?n.y:n.bottom,bounds:n}},xF=/* */Object.freeze({__proto__:null,render:function(e,n,o,r,t){var i=n.mothership,u=n.uiMothership,a=n.outerContainer,c=fn(null),s=mn.fromDom(t.targetNode),l=bF(e,s,n,r,c),f=e.getParam("toolbar_persist",!1,"boolean");aF(e);var d=function(){var t;c.get()?l.show():(c.set($B.getHeader(a).getOrDie()),t=Mv(e),sl(t,i),sl(t,u),cF(e,n,o,r),$B.setMenubar(a,tF(e,o)),l.show(),function(c,s,l,t){var f=fn(yF(s,l.isPositionedAtTop())),e=function(t){var e=yF(s,l.isPositionedAtTop()),n=e.pos,o=e.bounds,r=f.get(),i=r.pos,u=r.bounds,a=o.height!==u.height||o.width!==u.width;f.set({pos:n,bounds:o}),a&&Ab(c,t),l.isVisible()&&(i!==n?l.update(!0):a&&(l.updateMode(),l.repositionPopups()))};t||(c.on("activate",l.show),c.on("deactivate",l.hide)),c.on("SkinLoaded ResizeWindow",function(){return l.update(!0)}),c.on("NodeChange keydown",function(t){fp.requestAnimationFrame(function(){return e(t)})}),c.on("ScrollWindow",function(){return l.updateMode()});var n=DD();n.set(Oy(mn.fromDom(c.getBody()),"load",e)),c.on("remove",function(){n.clear()})}(e,s,l,f),e.nodeChanged())};e.on("show",d),e.on("hide",l.hide),f||(e.on("focus",d),e.on("blur",l.hide)),e.on("init",function(){(e.hasFocus()||f)&&d()}),Pv(e,n);var m={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Hv(n,!1)},disable:function(){Hv(n,!0)},isDisabled:function(){return mv.isDisabled(a)}};return{editorContainer:a.element.dom,api:m}}}),wF=function(t,e){var n,o,r,i,u,a,c,s,l,f,d,m,g,p;r=aD(0,o=e,vD(n=t)),n.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}}),a=aD(0,u=e,wD(i=t)),i.ui.registry.addNestedMenuItem("fontformats",{text:u.shared.providers.translate("Fonts"),getSubmenuItems:function(){return a.items.validateItems(a.getStyleItems())}}),c=t,l=st({type:"advanced"},(s=e).styleselect),f=aD(0,s,MD(c,l)),c.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return f.items.validateItems(f.getStyleItems())}}),m=aD(0,e,AD(d=t)),d.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return m.items.validateItems(m.getStyleItems())}}),p=aD(0,e,OD(g=t)),g.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return p.items.validateItems(p.getStyleItems())}})},kF={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},SF=(lD="[eE][+-]?[0-9]+",dD=["Infinity",(sD="[0-9]+")+"\\."+(fD=function(t){return"(?:"+t+")?"})(sD)+fD(lD),"\\."+sD+fD(lD),sD+fD(lD)].join("|"),new RegExp("^([+-]?(?:"+dD+"))(.*)$")),CF=function(t,r){return lt.from(SF.exec(t)).bind(function(t){var e,n=Number(t[1]),o=t[2];return e=o,M(r,function(t){return M(kF[t],function(t){return e===t})})?lt.some({value:n,unit:o}):lt.none()})},OF=function(t){return CF(t,["fixed","relative","empty"]).map(function(t){return t.value+t.unit}).getOr(t)},_F=function(o){var r=o.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" "),i=new Map,u=ED(),a=function(){var t=OF(o.queryCommandValue("LineHeight"));lt.from(i.get(t)).fold(function(){return u.clear()},function(t){u.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)})};return o.on("nodeChange",a),R(r,function(e,n){return{type:"togglemenuitem",text:e,onSetup:function(t){return i.set(OF(e),t),n+1===r.length&&a(),function(){0===n&&(o.off("nodeChange",a),u.clear())}},onAction:function(){return o.execCommand("LineHeight",!1,e)}}})},TF=function(t){var e,n;(e=t).ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return _F(e)}}),(n=t).ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(_F(n))}})},EF=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},DF=function(t){var e,n;!function(n){CS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t,e){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:BD(n,t.name),onAction:EF(n,t.name)})});for(var t=1;t<=6;t++){var e="h"+t;n.ui.registry.addToggleButton(e,{text:e.toUpperCase(),tooltip:"Heading "+t,onSetup:BD(n,e),onAction:EF(n,e)})}}(t),e=t,CS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})}),n=t,CS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:BD(n,t.name)})})},BF=function(t){var e;DF(t),e=t,CS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:EF(e,"code")})},FF=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.mode.isReadOnly()||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},AF=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return FF(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return FF(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return FF(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return FF(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},MF=function(t,e){var n,o,r,i;!function(e){CS.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return e.execCommand(t.cmd)},icon:t.icon,onSetup:BD(e,t.name)})});var t="alignnone",n="No alignment",o="JustifyNone",r="align-none";e.ui.registry.addButton(t,{tooltip:n,onAction:function(){return e.execCommand(o)},icon:r})}(t),BF(t),wF(t,e),AF(t),function(t){Ub(t);var e=fn(null),n=fn(null);Kb(t,"forecolor","forecolor","Text color",e),Kb(t,"backcolor","hilitecolor","Background color",n),Jb(t,"forecolor","forecolor","Text color"),Jb(t,"backcolor","hilitecolor","Background color")}(t),(o=n=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return o.execCommand("mceToggleVisualAid")}}),(r=n).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(e,t){e.setActive(t.hasVisual);var n=function(t){e.setActive(t.hasVisual)};return t.on("VisualAid",n),function(){return t.off("VisualAid",n)}}(t,r)},onAction:function(){r.execCommand("mceToggleVisualAid")}}),(i=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}(t,i)},onAction:function(){return i.execCommand("outdent")}}),i.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return i.execCommand("indent")}}),TF(t)},IF=function(t,e){return{anchor:"makeshift",x:t,y:e}},VF=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},RF=function(t,e){var n,o,r,i=Qh.DOM.getPos(t);return n=e,o=i.x,r=i.y,IF(n.x+o,n.y+r)},NF=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(VF(t)){var e=t.touches[0];return IF(e.pageX,e.pageY)}return IF(t.pageX,t.pageY)}(e):RF(t.getContentAreaContainer(),function(t){if(VF(t)){var e=t.touches[0];return IF(e.clientX,e.clientY)}return IF(t.clientX,t.clientY)}(e)):HF(t)},HF=function(t){return{anchor:"selection",root:mn.fromDom(t.selection.getNode())}},PF=function(t){return{anchor:"node",node:lt.some(mn.fromDom(t.selection.getNode())),root:mn.fromDom(t.getBody())}},zF=function(t,e,n,o,r,i){var u=n(),a=i?PF(t):NF(t,e);nO(u,ih.CLOSE_ON_EXECUTE,o,!1).map(function(t){e.preventDefault(),Zg.showMenuAt(r,a,{menu:{markers:bh("normal")},data:t})})},LF={onLtr:function(){return[ja,Na,Ha,Pa,za,La,sp,lp,ap,ip,cp,up]},onRtl:function(){return[ja,Ha,Na,za,Pa,La,sp,lp,cp,up,ap,ip]}},jF={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},UF=function(e,n,t,o,r,i,u){var a,c,s=i?PF(e):(a=e,c=n,st({bubble:Nc(0,12,jF),layouts:LF,overrides:{maxWidthFunction:kT(),maxHeightFunction:Ac()}},NF(a,c)));nO(t,ih.CLOSE_ON_EXECUTE,o,!0).map(function(t){n.preventDefault(),Zg.showMenuWithinBounds(r,s,{menu:{markers:bh("normal"),highlightImmediately:u},data:t,type:"horizontal"},function(){return lt.some(QE(e,o.shared))}),e.fire(ST)})},WF=function(e,n,o,r,i,u){var t,a=jn(),c=a.os.isiOS(),s=a.os.isOSX(),l=a.os.isAndroid(),f=a.deviceType.isTouch(),d=function(){var t=o();UF(e,n,t,r,i,u,!(l||c||s&&f))};!s&&!c||u?(l&&!u&&e.selection.setCursorLocation(n.target,0),d()):(t=function(){!function(t){var e=t.selection.getRng(),n=function(){fp.setEditorTimeout(t,function(){t.selection.setRng(e)},10),i()};t.once("touchend",n);var o=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}}(e),d()},!function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var o=e.touches[0],r=n.getRng();return Bs(t.getWin(),ms.domRange(r)).exists(function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY})}(e,n)?(e.once("selectionchange",t),e.once("touchend",function(){return e.off("selectionchange",t)})):t())},GF=function(t){return"string"==typeof t?t.split(/[ ,]/):t},XF=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},YF=function(t){return n="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(e=t).ui.registry.getAll().contextMenus,lt.from(e.getParam(n)).map(GF).getOrThunk(function(){return H(GF(o),function(t){return It(r,t)})});var e,n,o,r},qF=function(t){return C(t)?"|"===t:"separator"===t.type},KF={type:"separator"},JF=function(e){if(C(e))return e;switch(e.type){case"separator":return KF;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var t=e.getSubmenuItems();return C(t)?t:R(t,JF)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(t=e.onAction,function(){return t()})}}var t},$F=function(t,e){if(0===e.length)return t;var n=J(t).filter(function(t){return!qF(t)}).fold(function(){return[]},function(t){return[KF]});return t.concat(n).concat(e).concat([KF])},QF=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},ZF=function(t,e){return QF(t,e)?t.selection.getStart(!0):e.target},tA=function(a,t,n){var o=jn().deviceType.isTouch,r=mu(Zg.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return a.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:rc([fg("dismissContextMenu",[nr(Po(),function(t,e){wl.close(t),a.focus()})])])})),e=function(t){return Zg.hide(r)},i=function(u){var t,e;XF(a)&&u.preventDefault(),t=a,u.ctrlKey&&!XF(t)||!1===a.getParam("contextmenu")||(e=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string");if(QF(t,e))return!0;if(n){var o=ZF(t,e);return Ty(mn.fromDom(o),n)}return!1}(a,u),(o()?WF:zF)(a,u,function(){var r,i,t,e=ZF(a,u),n=a.ui.registry.getAll(),o=YF(a);return r=n.contextMenus,i=e,0<(t=z(o,function(t,e){if(It(r,e)){var n=r[e].update(i);if(C(n))return $F(t,n.split(" "));if(0<n.length){var o=R(n,JF);return $F(t,o)}return t}return t.concat([e])},[])).length&&qF(t[t.length-1])&&t.pop(),t},n,r,e))};a.on("init",function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");a.on(t,e),a.on("longpress contextmenu",i)})},eA=Rt([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),nA=function(e){return function(t){return t.translate(-e.left,-e.top)}},oA=function(e){return function(t){return t.translate(e.left,e.top)}},rA=function(n){return function(t,e){return z(n,function(t,e){return e(t)},xu(t,e))}},iA=function(t,e,n){return t.fold(rA([oA(n),nA(e)]),rA([nA(e)]),rA([]))},uA=function(t,e,n){return t.fold(rA([oA(n)]),rA([]),rA([oA(e)]))},aA=function(t,e,n){return t.fold(rA([]),rA([nA(n)]),rA([oA(e),nA(n)]))},cA=function(t,e,n){var o=t.fold(function(t,e){return{position:lt.some("absolute"),left:lt.some(t+"px"),top:lt.some(e+"px")}},function(t,e){return{position:lt.some("absolute"),left:lt.some(t-n.left+"px"),top:lt.some(e-n.top+"px")}},function(t,e){return{position:lt.some("fixed"),left:lt.some(t+"px"),top:lt.some(e+"px")}});return st({right:lt.none(),bottom:lt.none()},o)},sA=function(t,i,u,a){var e=function(o,r){return function(t,e){var n=o(i,u,a);return r(t.getOr(n.left),e.getOr(n.top))}};return t.fold(e(aA,lA),e(uA,fA),e(iA,dA))},lA=eA.offset,fA=eA.absolute,dA=eA.fixed,mA=function(t,e){var n=zr(t,e);return h(n)?NaN:parseInt(n,10)},gA=function(t,e,n,o){return r=e,i=t.element,u=mA(i,r.leftAttr),a=mA(i,r.topAttr),(isNaN(u)||isNaN(a)?lt.none():lt.some(xu(u,a))).fold(function(){return n},function(t){return dA(t.left+o.left,t.top+o.top)});var r,i,u,a},pA=function(t,e,n,o,r,i){var u,a,c,s=gA(t,e,n,o),l=(e.mustSnap?bA:yA)(t,e,s,r,i),f=iA(s,r,i);return u=e,a=f,c=t.element,Pr(c,u.leftAttr,a.left+"px"),Pr(c,u.topAttr,a.top+"px"),l.fold(function(){return{coord:dA(f.left,f.top),extra:lt.none()}},function(t){return{coord:t.output,extra:t.extra}})},hA=function(t,e){var n,o;n=e,o=t.element,Ur(o,n.leftAttr),Ur(o,n.topAttr)},vA=function(t,l,f,d){return Q(t,function(t){var e,n,o,r,i,u,a,c,s=t.sensor;return(e=l,n=s,o=t.range.left,r=t.range.top,a=uA(e,i=f,u=d),c=uA(n,i,u),Math.abs(a.left-c.left)<=o&&Math.abs(a.top-c.top)<=r)?lt.some({output:sA(t.output,l,f,d),extra:t.extra}):lt.none()})},bA=function(t,e,d,m,g){var n=e.getSnapPoints(t);return vA(n,d,m,g).orThunk(function(){return z(n,function(e,n){var t,o,r,i,u,a,c,s,l=n.sensor,f=(t=d,o=l,n.range.left,n.range.top,u=uA(t,r=m,i=g),a=uA(o,r,i),c=Math.abs(u.left-a.left),s=Math.abs(u.top-a.top),xu(c,s));return e.deltas.fold(function(){return{deltas:lt.some(f),snap:lt.some(n)}},function(t){return(f.left+f.top)/2<=(t.left+t.top)/2?{deltas:lt.some(f),snap:lt.some(n)}:e})},{deltas:lt.none(),snap:lt.none()}).snap.map(function(t){return{output:sA(t.output,d,m,g),extra:t.extra}})})},yA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return vA(i,n,o,r)},xA=/* */Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,u,a,c,s,l,f,d=e.getTarget(t.element);e.repositionTarget&&(r=yr(t.element),i=Bu(r),u=eB(d),l=i,f=u,a={coord:sA((s=o).output,s.output,l,f),extra:s.extra},c=cA(a.coord,0,u),Ki(d,c))}}),wA="data-initial-z-index",kA=function(t,e){var n;t.getSystem().addToGui(e),Sr((n=e).element).filter(pr).each(function(e){Qi(e,"z-index").each(function(t){Pr(e,wA,t)}),Yi(e,"z-index",Ji(n.element,"z-index"))})},SA=function(t){Sr(t.element).filter(pr).each(function(e){Lr(e,wA).fold(function(){return tu(e,"z-index")},function(t){return Yi(e,"z-index",t)}),Ur(e,wA)}),t.getSystem().removeFromGui(t)},CA=function(t,e,n){return t.getSystem().build(jy.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},OA=Ze("snaps",[ze("getSnapPoints"),ma("onSensor"),ze("leftAttr"),ze("topAttr"),tn("lazyViewport",zu),tn("mustSnap",!1)]),_A=[tn("useFixed",l),ze("blockerClass"),tn("getTarget",ct),tn("onDrag",ut),tn("repositionTarget",!0),tn("onDrop",ut),an("getBounds",zu),OA],TA=function(e){return t=Qi(e,"left"),n=Qi(e,"top"),o=Qi(e,"position"),r=function(t,e,n){return("fixed"===n?dA:lA)(parseInt(t,10),parseInt(e,10))},(t.isSome()&&n.isSome()&&o.isSome()?lt.some(r(t.getOrDie(),n.getOrDie(),o.getOrDie())):lt.none()).getOrThunk(function(){var t=ku(e);return fA(t.left,t.top)});var t,n,o,r},EA=function(n,t,i,u,a,c,e){var o,r,s,l,f,d,m,g,p,h=t.fold(function(){var t,n,o,e=(t=i,n=c.left,o=c.top,t.fold(function(t,e){return lA(t+n,e+o)},function(t,e){return fA(t+n,e+o)},function(t,e){return dA(t+n,e+o)})),r=iA(e,u,a);return dA(r.left,r.top)},function(e){var t=pA(n,e,i,c,u,a);return t.extra.each(function(t){e.onSensor(n,t)}),t.coord});return o=h,r=u,s=a,f=(l=e).bounds,d=uA(o,r,s),m=Oc(d.left,f.x,f.x+f.width-l.width),g=Oc(d.top,f.y,f.y+f.height-l.height),p=fA(m,g),o.fold(function(){var t=aA(p,r,s);return lA(t.left,t.top)},function(){return p},function(){var t=iA(p,r,s);return dA(t.left,t.top)})},DA=function(t,e){return{bounds:t.getBounds(),height:bu(e.element),width:_u(e.element)}},BA=function(d,m,t,e,n){var o=t.update(e,n),g=t.getStartData().getOrThunk(function(){return DA(m,d)});o.each(function(t){var e,n,o,r,i,u,a,c,s,l,f;e=d,o=g,r=t,f=(n=m).getTarget(e.element),n.repositionTarget&&(i=yr(e.element),u=Bu(i),a=eB(f),c=TA(f),s=EA(e,n.snaps,c,u,a,r,o),l=cA(s,0,a),Ki(f,l)),n.onDrag(e,f,r)})},FA=function(e,t,n,o){t.each(SA),n.snaps.each(function(t){hA(e,t)});var r=n.getTarget(e.element);o.reset(),n.onDrop(e,r)},AA=function(t){return function(e,n){var o=function(t){n.setStartData(DA(e,t))};return Zo(S([nr(Vo(),function(t){n.getStartData().each(function(){return o(t)})})],t(e,n,o)))}},MA=/* */Object.freeze({__proto__:null,getData:function(t){return lt.from(xu(t.x,t.y))},getDelta:function(t,e){return xu(e.left-t.left,e.top-t.top)}}),IA=function(a,c,s){return[nr(io(),function(e,t){var n,o,r,i,u;0===t.event.raw.button&&(t.stop(),r={drop:n=function(){return FA(e,lt.some(i),a,c)},delayDrop:(o=Ey(n,200)).schedule,forceDrop:n,move:function(t){o.cancel(),BA(e,a,c,MA,t)}},i=CA(e,a.blockerClass,(u=r,Zo([nr(io(),u.forceDrop),nr(co(),u.drop),nr(uo(),function(t,e){u.move(e.event)}),nr(ao(),u.delayDrop)]))),s(e),kA(e,i))})]},VA=S(_A,[va("dragger",{handlers:AA(IA)})]),RA=/* */Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],lt.some(xu(e.clientX,e.clientY))):lt.none()},getDelta:function(t,e){return xu(e.left-t.left,e.top-t.top)}}),NA=function(u,a,c){var s=fn(lt.none());return[nr(eo(),function(e,t){t.stop();var n,o=function(){FA(e,s.get(),u,a),s.set(lt.none())},r={drop:o,delayDrop:ut,forceDrop:o,move:function(t){BA(e,u,a,RA,t)}},i=CA(e,u.blockerClass,(n=r,Zo([nr(eo(),n.forceDrop),nr(oo(),n.drop),nr(ro(),n.drop),nr(no(),function(t,e){n.move(e.event)})])));s.set(lt.some(i));c(e),kA(e,i)}),nr(no(),function(t,e){e.stop(),BA(t,u,a,RA,e.event)}),nr(oo(),function(t,e){e.stop(),FA(t,s.get(),u,a),s.set(lt.none())}),nr(ro(),function(t){FA(t,s.get(),u,a),s.set(lt.none())})]},HA=S(_A,[va("dragger",{handlers:AA(NA)})]),PA=S(_A,[va("dragger",{handlers:AA(function(t,e,n){return S(IA(t,e,n),NA(t,e,n))})})]),zA=cc({branchKey:"mode",branches:/* */Object.freeze({__proto__:null,mouse:VA,touch:HA,mouseOrTouch:PA}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:lt.from(t.extra)}}},state:/* */Object.freeze({__proto__:null,init:function(){var i=lt.none(),e=lt.none(),t=at({});return di({readState:t,reset:function(){i=lt.none(),e=lt.none()},update:function(r,t){return r.getData(t).bind(function(t){return e=r,n=t,o=i.map(function(t){return e.getDelta(t,n)}),i=lt.some(n),o;var e,n,o})},getStartData:function(){return e},setStartData:function(t){e=lt.some(t)}})}}),apis:xA}),LA=function(t,r,i,u,e,n){return t.fold(function(){return zA.snap({sensor:fA(i-20,u-20),range:xu(e,n),output:fA(lt.some(i),lt.some(u)),extra:{td:r}})},function(t){var e=i-20,n=u-20,o=t.element.dom.getBoundingClientRect();return zA.snap({sensor:fA(e,n),range:xu(40,40),output:fA(lt.some(i-o.width/2),lt.some(u-o.height/2)),extra:{td:r}})})},jA=function(t,i,u){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,e){var n,o,r=e.td;n=i.get(),o=r,n.exists(function(t){return Gn(t,o)})||(i.set(lt.some(r)),u(r))},mustSnap:!0}},UA=function(t){return mp(dp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:rc([zA.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Wy.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},WA=function(c,n){var o=fn([]),r=fn([]),t=fn(!1),i=fn(lt.none()),u=fn(lt.none()),e=function(t){var e=Pu(t);return LA(f.getOpt(n),t,e.x,e.y,e.width,e.height)},a=function(t){var e=Pu(t);return LA(d.getOpt(n),t,e.right,e.bottom,e.width,e.height)},s=jA(function(){return R(o.get(),e)},i,function(e){u.get().each(function(t){c.fire("TableSelectorChange",{start:e,finish:t})})}),l=jA(function(){return R(r.get(),a)},u,function(e){i.get().each(function(t){c.fire("TableSelectorChange",{start:t,finish:e})})}),f=UA(s),d=UA(l),m=mu(f.asSpec()),g=mu(d.asSpec()),p=function(t,e,n,o){var r=n(e);zA.snapTo(t,r);!function(t,e,n,o){var r=e.dom.getBoundingClientRect();tu(t.element,"display");var i=kr(mn.fromDom(c.getBody())).dom.innerHeight,u=n(r),a=o(r,i);(u||a)&&Yi(t.element,"display","none")}(t,e,function(t){return t[o]<0},function(t,e){return t[o]>e})},h=function(t){return p(m,t,e,"top")},v=function(t){return p(g,t,a,"bottom")};jn().deviceType.isTouch()&&(c.on("TableSelectionChange",function(e){t.get()||(rl(n,m),rl(n,g),t.set(!0)),i.set(lt.some(e.start)),u.set(lt.some(e.finish)),e.otherCells.each(function(t){o.set(t.upOrLeftCells),r.set(t.downOrRightCells),h(e.start),v(e.finish)})}),c.on("ResizeEditor ResizeWindow ScrollContent",function(){i.get().each(h),u.get().each(v)}),c.on("TableSelectionClear",function(){t.get()&&(al(m),al(g),t.set(!1)),i.set(lt.none()),u.set(lt.none())}))};(gD=mD=mD||{})[gD.None=0]="None",gD[gD.Both=1]="Both",gD[gD.Vertical=2]="Vertical";var GA,XA,YA,qA=function(t,e,n){var o,r,i,u,a,c,s=mn.fromDom(t.getContainer()),l=(o=t,r=e,i=n,u=vu(s),a=Ou(s),(c={}).height=pF(u+r.top,bv(o),xv(o)),i===mD.Both&&(c.width=pF(a+r.left,vv(o),yv(o))),c);_t(l,function(t,e){return Yi(s,e,gF(t)),0}),t.fire("ResizeEditor")},KA=function(i,u,a){u.delimiter||(u.delimiter="\xbb");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:rc([ig.config({mode:"flow",selector:"div[role=button]"}),mv.config({disabled:a.isDisabled}),zv(),tx.config({}),lg.config({}),fg("elementPathEvents",[sr(function(r,t){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return ig.focusIn(r)}),i.on("NodeChange",function(t){var e,o,n=function(t){for(var e=[],n=t.length;0<n--;){var o=t[n];if(1===o.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||e.push({name:r.name,element:o}),r.isPropagationStopped())break}}return e}(t.parents);0<n.length?lg.set(r,(e=R(n||[],function(e,t){return dp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":t,"tab-index":-1,"aria-level":t+1},innerHtml:e.name},action:function(t){i.focus(),i.selection.select(e.element),i.nodeChanged()},buttonBehaviours:rc([jv(a.isDisabled),zv()])})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+u.delimiter+" "}},z(e.slice(1),function(t,e){var n=t;return n.push(o),n.push(e),n},[e[0]]))):lg.set(r,[])})})])]),components:[]}},JA=function(u,a){var t,e,n,o,r,i;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(r=function(){var t,o,e,r,n,i=[];return u.getParam("elementpath",!0,"boolean")&&i.push(KA(u,{},a)),u.hasPlugin("wordcount")&&i.push((t=u,o=a,r=function(t,e,n){return lg.set(t,[lu(o.translate(["{0} "+n,e[n]]))])},dp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:rc([jv(o.isDisabled),zv(),tx.config({}),lg.config({}),Ll.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),fg("wordcount-events",[dr(function(t){var e=Ll.getValue(t),n="words"===e.mode?"characters":"words";Ll.setValue(t,{mode:n,count:e.count}),r(t,e.count,n)}),sr(function(n){t.on("wordCountUpdate",function(t){var e=Ll.getValue(n).mode;Ll.setValue(n,{mode:e,count:t.wordCount}),r(n,t.wordCount,e)})})])]),eventOrder:((e={})[_o()]=["disabling","alloy.base.behaviour","wordcount-events"],e)}))),u.getParam("branding",!0,"boolean")&&i.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="http://www.tiansense.com" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(n=Zh.translate(["Powered by {0}","TIANSENSE"]))+'">'+n+"</a>"}}),0<i.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:i}]:[]}(),e=!(t=u).hasPlugin("autoresize"),(i=!1===(n=t.getParam("resize",e))?mD.None:"both"===n?mD.Both:mD.Vertical)!==mD.None&&r.push((o=i,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:a.translate("Resize"),"aria-hidden":"true"},innerHtml:pp("resize-handle",a.icons)},behaviours:rc([zA.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,e,n){qA(u,n,o)},blockerClass:"tox-blocker"})])})),r)}},$A=function(x){var t,e,n,o,r=x.inline,w=r?xF:dF,k=Vv(x)?TB:ZD,i=lt.none(),u=jn(),a=u.browser.isIE()?["tox-platform-ie"]:[],c=u.deviceType.isTouch()?["tox-platform-touch"]:[],s=Bv(x),l=Mv(x),f=Zh.isRtl()?{attributes:{dir:"rtl"}}:{},d={attributes:((t={})[Xc]=s?ta.BottomToTop:ta.TopToBottom,t)},S=function(){return i.bind($B.getHeader)},m=function(){Yi(rt.element,"width",document.body.clientWidth+"px")},C=mu((e=Gn(Ui(),l)&&"grid"===Ji(l,"display"),n={dom:st({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(a).concat(c)},f),behaviours:rc([Zs.config({useFixed:function(){return k.isDocked(S)}})])},o={dom:{styles:{width:document.body.clientWidth+"px"}},events:Zo([nr(Ro(),m)])},Pt(n,e?o:{}))),O=function(){return gt.value(C)},g=mp({dom:{tag:"div",classes:["tox-anchorbar"]}}),_=function(){return i.bind(function(t){return $B.getThrobber(t)}).getOrDie("Could not find throbber element")},T=wT(C,x,function(){return i.bind(function(t){return g.getOpt(t)}).getOrDie("Could not find a anchor bar element")}),p=$B.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:T,onEscape:function(){x.focus()}}),E=Tv(x),h=$B.parts.toolbar(st({dom:{tag:"div",classes:["tox-toolbar"]},getSink:O,providers:T.shared.providers,onEscape:function(){x.focus()},type:E,lazyToolbar:function(){return i.bind(function(t){return $B.getToolbar(t)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return S().getOrDie("Could not find header element")}},d)),v=$B.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:T.shared.providers,onEscape:function(){x.focus()},type:E}),b=$B.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),y=$B.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),D=$B.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:T}),B=x.getParam("statusbar",!0,"boolean")&&!r?lt.some(JA(x,T.shared.providers)):lt.none(),F={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[b,y]},A=Cv(x),M=kv(x),I=wv(x),V=$B.parts.header({dom:st({tag:"div",classes:["tox-editor-header"]},d),components:mt([I?[p]:[],A?[v]:M?[h]:[],Av(x)?[]:[g.asSpec()]]),sticky:Vv(x),editor:x,sharedBackstage:T.shared}),R=mt([s?[]:[V],r?[]:[F],s?[V]:[]]),N=mt([[{dom:{tag:"div",classes:["tox-editor-container"]},components:R}],r?[]:B.toArray(),[D]]),H=Iv(x),P=st(st({role:"application"},Zh.isRtl()?{dir:"rtl"}:{}),H?{"aria-hidden":"true"}:{}),z=mu($B.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(r?["tox-tinymce-inline"]:[]).concat(s?["tox-tinymce--toolbar-bottom"]:[]).concat(c).concat(a),styles:st({visibility:"hidden"},H?{opacity:"0",border:"0"}:{}),attributes:P},components:N,behaviours:rc([zv(),mv.config({disableClass:"tox-tinymce--disabled"}),ig.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])})),i=lt.some(z);x.shortcuts.add("alt+F9","focus menubar",function(){$B.focusMenubar(z)}),x.shortcuts.add("alt+F10","focus toolbar",function(){$B.focusToolbar(z)}),x.addCommand("ToggleToolbarDrawer",function(){$B.toggleToolbarDrawer(z)}),x.addQueryStateHandler("ToggleToolbarDrawer",function(){return $B.isToolbarDrawerToggled(z)});var L,j,U,W,G,X,Y,q,K,J,$,Q,Z,tt,et,nt,ot=Uy(z),rt=Uy(C);L=x,j=ot,U=rt,W=function(e,n){dt([j,U],function(t){t.broadcastEvent(e,n)})},G=function(e,n){dt([j,U],function(t){t.broadcastOn([e],n)})},X=function(t){return G(kl(),{target:t.target})},Y=Cy(mn.fromDom(document),"touchstart",X),q=Cy(mn.fromDom(document),"touchmove",function(t){return W(Mo(),t)}),K=Cy(mn.fromDom(document),"touchend",function(t){return W(Io(),t)}),J=Cy(mn.fromDom(document),"mousedown",X),$=Cy(mn.fromDom(document),"mouseup",function(t){0===t.raw.button&&G(Cl(),{target:t.target})}),Q=function(t){return G(kl(),{target:mn.fromDom(t.target)})},Z=function(t){0===t.button&&G(Cl(),{target:mn.fromDom(t.target)})},tt=function(t){return W(Vo(),_y(t))},et=function(t){G(Sl(),{}),W(Ro(),_y(t))},nt=function(){return G(Sl(),{})},L.on("PostRender",function(){L.on("click",Q),L.on("tap",Q),L.on("mouseup",Z),L.on("ScrollWindow",tt),L.on("ResizeWindow",et),L.on("ResizeEditor",nt)}),L.on("remove",function(){L.off("click",Q),L.off("tap",Q),L.off("mouseup",Z),L.off("ScrollWindow",tt),L.off("ResizeWindow",et),L.off("ResizeEditor",nt),J.unbind(),Y.unbind(),q.unbind(),K.unbind(),$.unbind()}),L.on("detach",function(){fl(j),fl(U),j.destroy(),U.destroy()});var it=function(){var t,e=gF(hF(x)),n=gF(vF(t=x).getOr(hv(t)));return x.inline||(Zi("div","width",n)&&Yi(z.element,"width",n),Zi("div","height",e)?Yi(z.element,"height",e):Yi(z.element,"height","200px")),e};return{mothership:ot,uiMothership:rt,backstage:T,renderUI:function(){var o,r,n,e,i,u,a,c;k.setup(x,T.shared,S),MF(x,T),tA(x,O,T),r=(o=x).ui.registry.getAll().sidebars,dt(Ct(r),function(e){var t=r[e],n=function(){return lt.from(o.queryCommandValue("ToggleSidebar")).is(e)};o.ui.registry.addToggleButton(e,{icon:t.icon,tooltip:t.tooltip,onAction:function(t){o.execCommand("ToggleSidebar",!1,e),t.setActive(n())},onSetup:function(t){var e=function(){return t.setActive(n())};return o.on("ToggleSidebar",e),function(){o.off("ToggleSidebar",e)}}})}),n=x,e=_,i=T.shared,u=fn(!1),a=fn(lt.none()),c=function(t){t!==u.get()&&(UB(e(),t,i.providers),u.set(t))},n.on("ProgressState",function(t){var e;a.get().each(fp.clearTimeout),ft(t.time)?(e=fp.setEditorTimeout(n,function(){return c(t.state)},t.time),a.set(lt.some(e))):(c(t.state),a.set(lt.none()))}),Tt(x.getParam("toolbar_groups",{},"object"),function(t,e){x.ui.registry.addGroupToolbarButton(e,t)});var t,s=x.ui.registry.getAll(),l=s.buttons,f=s.menuItems,d=s.contextToolbars,m=s.sidebars,g=Sv(x),p={menuItems:f,menus:(t=x.getParam("menu"))?Tt(t,function(t){return st(st({},t),{items:t.items})}):{},menubar:x.getParam("menubar"),toolbar:g.getOrThunk(function(){return x.getParam("toolbar",!0)}),allowToolbarGroups:E===oh.floating,buttons:l,sidebar:m};GD(x,d,C,{backstage:T}),WA(x,C);var h=x.getElement(),v=it(),b={mothership:ot,uiMothership:rt,outerContainer:z},y={targetNode:h,height:v};return w.render(x,b,p,T,y)},getUi:function(){return{channels:{broadcastAll:rt.broadcast,broadcastOn:rt.broadcastOn,register:ut}}}}},QA=at([ze("lazySink"),qe("dragBlockClass"),an("getBounds",zu),tn("useTabstopAt",w),tn("eventOrder",{}),jl("modalBehaviours",[ig]),ga("onExecute"),ha("onEscape")]),ZA={sketch:ct},tM=at([xf({name:"draghandle",overrides:function(t,e){return{behaviours:rc([zA.config({mode:"mouse",getTarget:function(t){return Yu(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),bf({schema:[ze("dom")],name:"title"}),bf({factory:ZA,schema:[ze("dom")],name:"close"}),bf({factory:ZA,schema:[ze("dom")],name:"body"}),xf({factory:ZA,schema:[ze("dom")],name:"footer"}),yf({factory:{sketch:function(t,e){return st(st({},t),{dom:e.dom,components:e.components})}},schema:[tn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),tn("components",[])],name:"blocker"})]),eM=/* */Object.freeze({__proto__:null,block:function(t,e,n,o){Pr(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=rc([ig.config({mode:"special",onTab:function(){return lt.some(!0)},onShiftTab:function(){return lt.some(!0)}}),hg.config({})]),u=o(r,i),a=r.getSystem().build(u);lg.append(r,gu(a)),a.hasConfigured(ig)&&ig.focusIn(a),n.isBlocked()||e.onBlock(t),n.blockWith(function(){return lg.remove(r,a)})},unblock:function(t,e,n){Ur(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),nM=[an("getRoot",lt.none),ma("onBlock"),ma("onUnblock")],oM=uc({fields:nM,name:"blocking",apis:eM,state:/* */Object.freeze({__proto__:null,init:function(){var e=ED();return di({readState:e.isSet,blockWith:function(t){e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),rM=Yf({name:"ModalDialog",configFields:QA(),partFields:tM(),factory:function(a,t,e,r){var n,i=fn(lt.none()),o=Kr("modal-events"),u=st(st({},a.eventOrder),((n={})[No()]=[o].concat(a.eventOrder["alloy.system.attached"]||[]),n));return{uid:a.uid,dom:a.dom,components:t,apis:{show:function(t){i.set(lt.some(t));var e=a.lazySink(t).getOrDie(),n=r.blocker(),o=e.getSystem().build(st(st({},n),{components:n.components.concat([gu(t)]),behaviours:rc([hg.config({}),fg("dialog-blocker-events",[cr(lo(),function(){ig.focusIn(t)})])])}));rl(e,o),ig.focusIn(t)},hide:function(e){i.set(lt.none()),Sr(e.element).each(function(t){e.getSystem().getByDom(t).each(function(t){al(t)})})},getBody:function(t){return Mf(t,a,"body")},getFooter:function(t){return Mf(t,a,"footer")},setIdle:function(t){oM.unblock(t)},setBusy:function(t,e){oM.block(t,e)}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Wl(a.modalBehaviours,[lg.config({}),ig.config({mode:"cyclic",onEnter:a.onExecute,onEscape:a.onEscape,useTabstopAt:a.useTabstopAt}),oM.config({getRoot:i.get}),fg(o,[sr(function(t){var e,n,o,r,i,u;e=t.element,n=Mf(t,a,"title").element,o=Lr(e,"id").fold(function(){var t=Kr("dialog-label");return Pr(n,"id",t),t},ct),Pr(e,"aria-labelledby",o),r=t.element,i=Mf(t,a,"body").element,u=lt.from(zr(r,"id")).fold(function(){var t=Kr("dialog-describe");return Pr(i,"id",t),t},ct),Pr(r,"aria-describedby",u)})])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),iM=le([je("type"),je("name")].concat(Ih)),uM=Ve,aM=[ve("name","name",Xt(function(){return Kr("button-name")}),Ie),$e("icon"),rn("align","end",["start","end"]),un("primary",!1),un("disabled",!1)],cM=S(aM,[je("text")]),sM=S([Ue("type",["submit","cancel","custom"])],cM),lM=S([Ue("type",["menu"]),$e("text"),$e("tooltip"),$e("icon"),Ye("items",iM)],aM),fM=Be("type",{submit:sM,cancel:sM,custom:sM,menu:lM}),dM=[je("type"),je("text"),Ue("level",["info","warn","error","success"]),je("icon"),tn("url","")],mM=le(dM),gM=[je("type"),je("name"),je("label"),un("disabled",!1),un("checked0",!0),un("checked1",!1)],pM=le(gM),hM=le([]),vM=[je("type"),je("text"),un("disabled",!1),un("primary",!1),ve("name","name",Xt(function(){return Kr("button-name")}),Ie),$e("icon"),un("borderless",!1)],bM=le(vM),yM=[je("type"),je("name"),je("label"),un("disabled",!1),un("checked",!1)],xM=le(yM),wM=Ve,kM=[je("type"),je("name")],SM=kM.concat([$e("label")]),CM=SM.concat([tn("columns","auto")]),OM=le(CM),_M=we([je("value"),je("text"),je("icon")]),TM=le(SM),EM=Ie,DM=le(SM),BM=Ie,FM=kM.concat([on("tag","textarea"),je("scriptId"),je("scriptUrl"),(GA=undefined,en("settings",GA,He))]),AM=kM.concat([on("tag","textarea"),We("init")]),MM=Se(function(t){return Oe("customeditor.old",se(AM),t).orThunk(function(){return Oe("customeditor.new",se(FM),t)})}),IM=Ie,VM=le(SM),RM=fe(xe),NM=SM.concat([Xe("items",[Xe("items",[je("text"),je("value"),un("selected",!1)]),nn("size",1),un("disabled",!1)]),un("disabled",!1),on("value","")]),HM=le(NM),PM=le([je("dv")]),zM=SM.concat([Xe("items",[je("text"),je("value"),un("selected",!1)]),nn("size",1),un("disabled",!1),un("checked",!1),un("hidden",!0)]),LM=le(zM),jM=le([]),UM=function(t){return[je("type"),Le("columns",Me),t]},WM=[je("type"),je("html"),rn("presets","presentation",["presentation","document"])],GM=le(WM),XM=SM.concat([un("sandboxed",!0)]),YM=le(XM),qM=Ie,KM=SM.concat([Le("currentState",le([ze("blob"),je("url")]))]),JM=le(KM),$M=SM.concat([$e("inputMode"),$e("placeholder"),$e("value"),un("maximized",!1),un("disabled",!1)]),QM=le($M),ZM=Ie,tI=[je("text"),je("value")],eI=[je("text"),Ye("items",(XA=function(){return nI},YA=Lt(function(){return XA()}),{extract:function(t,e,n){return YA().extract(t,e,n)},toString:function(){return YA().toString()}}))],nI=de([le(tI),le(eI)]),oI=SM.concat([Ye("items",nI),un("disabled",!1)]),rI=le(oI),iI=Ie,uI=SM.concat([Xe("items",[je("text"),je("value"),un("selected",!1)]),nn("size",1),un("disabled",!1)]),aI=le(uI),cI=Ie,sI=SM.concat([Xe("items",[Xe("items",[je("text"),je("value"),un("selected",!1)]),nn("size",1),un("disabled",!1)]),un("disabled",!1)]),lI=le(sI),fI=le([je("tb"),je("col"),je("lnk"),je("exeObs"),je("exeTime")]),dI=SM.concat([un("constrain",!0),un("disabled",!1)]),mI=le(dI),gI=le([je("width"),je("height")]),pI=[je("type"),Ye("header",Ie),Ye("cells",fe(Ie))],hI=le(pI),vI=SM.concat([Xe("items",[Xe("items",[je("text"),je("value"),un("selected",!1)]),nn("size",1),un("disabled",!1)]),un("disabled",!1)]),bI=le(vI),yI=le([je("tb"),je("col")]),xI=SM.concat([$e("placeholder"),$e("value"),un("maximized",!1),un("disabled",!1)]),wI=le(xI),kI=Ie,SI=SM.concat([rn("filetype","file",["image","media","file"]),tn("disabled",!1)]),CI=le(SI),OI=le([je("value"),tn("meta",{})]),_I=function(e){return ve("items","items",Wt(),fe(Se(function(t){return Oe("Checking item of "+e,TI,t).fold(function(t){return gt.error(Ee(t))},function(t){return gt.value(t)})})))},TI=ke(function(){return De("type",{alertbanner:mM,auth:pM,bar:le((e=_I("bar"),[je("type"),e])),button:bM,checkbox:xM,colorinput:TM,colorpicker:DM,dropzone:VM,defaultvalue:HM,fieldtype:LM,grid:le(UM(_I("grid"))),iframe:YM,input:QM,listbox:rI,selectbox:aI,selectmulti:lI,sizeinput:mI,tbcol:bI,textarea:wI,urlinput:CI,customeditor:MM,htmlpanel:GM,imagetools:JM,collection:OM,label:le((t=_I("label"),[je("type"),je("label"),t])),table:hI,panel:DI});var t,e}),EI=[je("type"),tn("classes",[]),Ye("items",TI)],DI=le(EI),BI=[ve("name","name",Xt(function(){return Kr("tab-name")}),Ie),je("title"),Ye("items",TI)],FI=[je("type"),Xe("tabs",BI)],AI=le(FI),MI=cM,II=fM,VI=le([je("title"),Le("body",De("type",{panel:DI,tabpanel:AI})),on("size","normal"),Ye("buttons",II),tn("initialData",{}),an("onAction",ut),an("onChange",ut),an("onSubmit",ut),an("onClose",ut),an("onCancel",ut),tn("onTabChange",ut)]),RI=le(S([Ue("type",["cancel","custom"])],MI)),NI=le([je("title"),je("url"),Je("height"),Je("width"),Ke("buttons",fe(RI)),an("onAction",ut),an("onCancel",ut),an("onClose",ut),an("onMessage",ut)]),HI=function(t){return O(t)?[t].concat(U(At(t),HI)):p(t)?U(t,HI):[]},PI=function(t){return C(t.type)&&C(t.name)},zI={auth:hM,checkbox:wM,colorinput:EM,colorpicker:BM,dropzone:RM,defaultvalue:PM,fieldtype:jM,input:ZM,iframe:qM,sizeinput:gI,selectmulti:fI,selectbox:cI,listbox:iI,size:gI,tbcol:yI,textarea:kI,urlinput:OI,customeditor:IM,collection:_M,togglemenuitem:uM},LI=function(t){var e=H(HI(t),PI),n=U(e,function(e){return t=e,lt.from(zI[t.type]).fold(function(){return[]},function(t){return[Le(e.name,t)]});var t});return le(n)},jI=function(t){return{internalDialog:_e(Oe("dialog",VI,t)),dataValidator:LI(t),initialData:t.initialData}},UI={open:function(t,e){var n=jI(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(_e(Oe("dialog",NI,e)))},redial:jI},WI=function(t){var n=[],o={};return _t(t,function(t,e){t.fold(function(){n.push(e)},function(t){o[e]=t})}),0<n.length?gt.error(n):gt.value(o)},GI=Xf({name:"TabButton",configFields:[tn("uid",undefined),ze("value"),ve("dom","dom",Yt(function(){return{attributes:{role:"tab",id:Kr("aria"),"aria-selected":"false"}}}),Fe()),qe("action"),tn("domModification",{}),jl("tabButtonBehaviours",[hg,ig,Ll]),ze("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Bg(t.action),behaviours:Wl(t.tabButtonBehaviours,[hg.config({}),ig.config({mode:"execution",useSpace:!0,useEnter:!0}),Ll.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),XI=at([ze("tabs"),ze("dom"),tn("clickToDismiss",!1),jl("tabbarBehaviours",[ld,ig]),fa(["tabClass","selectedClass"])]),YI=wf({factory:GI,name:"tabs",unit:"tab",overrides:function(o){var r=function(t,e){ld.dehighlight(t,e),qo(t,Wo(),{tabbar:t,button:e})},i=function(t,e){ld.highlight(t,e),qo(t,Uo(),{tabbar:t,button:e})};return{action:function(t){var e=t.getSystem().getByUid(o.uid).getOrDie(),n=ld.isHighlighted(e,t);(n&&o.clickToDismiss?r:n?ut:i)(e,t)},domModification:{classes:[o.markers.tabClass]}}}}),qI=at([YI]),KI=Yf({name:"Tabbar",configFields:XI(),partFields:qI(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Wl(t.tabbarBehaviours,[ld.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Pr(e.element,"aria-selected","true")},onDehighlight:function(t,e){Pr(e.element,"aria-selected","false")}}),ig.config({mode:"flow",getInitial:function(t){return ld.getHighlighted(t).map(function(t){return t.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),JI=Xf({name:"Tabview",configFields:[jl("tabviewBehaviours",[lg])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:Wl(t.tabviewBehaviours,[lg.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),$I=at([tn("selectFirst",!0),ma("onChangeTab"),ma("onDismissTab"),tn("tabs",[]),jl("tabSectionBehaviours",[])]),QI=bf({factory:KI,schema:[ze("dom"),Ge("markers",[ze("tabClass"),ze("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),ZI=bf({factory:JI,name:"tabview"}),tV=at([QI,ZI]),eV=Yf({name:"TabSection",configFields:$I(),partFields:tV(),factory:function(i,t,e,n){var o=function(t,e){Af(t,i,"tabbar").each(function(t){e(t).each(Ko)})};return{uid:i.uid,dom:i.dom,components:t,behaviours:Ul(i.tabSectionBehaviours),events:Zo(mt([i.selectFirst?[sr(function(t,e){o(t,ld.getFirst)})]:[],[nr(Uo(),function(t,e){var o,r,n=e.event.button;o=n,r=Ll.getValue(o),Af(o,i,"tabview").each(function(n){L(i.tabs,function(t){return t.value===r}).each(function(t){var e=t.view();Lr(o.element,"id").each(function(t){Pr(n.element,"aria-labelledby",t)}),lg.set(n,e),i.onChangeTab(n,o,e)})})}),nr(Wo(),function(t,e){var n=e.event.button;i.onDismissTab(t,n)})]])),apis:{getViewItems:function(t){return Af(t,i,"tabview").map(function(t){return lg.contents(t)}).getOr([])},showTab:function(t,n){o(t,function(e){var t=ld.getCandidates(e);return L(t,function(t){return Ll.getValue(t)===n}).filter(function(t){return!ld.isHighlighted(e,t)})})}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),nV=function(t,e){Yi(t,"height",e+"px"),jn().browser.isIE()?tu(t,"flex-basis"):Yi(t,"flex-basis",e+"px")},oV=function(t,m,e){Yu(t,'[role="dialog"]').each(function(d){qu(d,'[role="tablist"]').each(function(f){e.get().map(function(t){return Yi(m,"height","0"),Yi(m,"flex-basis","0"),Math.min(t,(n=m,o=f,r=wr(e=d).dom,i=Yu(e,".tox-dialog-wrap").getOr(e),u="fixed"===Ji(i,"position")?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight),a=vu(n),c=n.dom.offsetLeft>=o.dom.offsetLeft+Ou(o)?Math.max(vu(o),a):a,s=parseInt(Ji(e,"margin-top"),10)||0,l=parseInt(Ji(e,"margin-bottom"),10)||0,u-(vu(e)+s+l-c)));var e,n,o,r,i,u,a,c,s,l}).each(function(t){nV(m,t)})})})},rV=function(t){return qu(t,'[role="tabpanel"]')},iV=function(a){var c;return{smartTabHeight:(c=fn(lt.none()),{extraEvents:[sr(function(t){var n=t.element;rV(n).each(function(u){var e;Yi(u,"visibility","hidden"),t.getSystem().getByDom(u).toOptional().each(function(t){var o,r,i,e=(r=u,i=t,R(o=a,function(t,e){lg.set(i,o[e].view());var n=r.dom.getBoundingClientRect();return lg.set(i,[]),n.height})),n=K(Y(e,function(t,e){return e<t?-1:t<e?1:0}));c.set(n)}),oV(n,u,c),tu(u,"visibility"),e=t,K(a).each(function(t){return eV.showTab(e,t.value)}),fp.requestAnimationFrame(function(){oV(n,u,c)})})}),nr(Ro(),function(t){var e=t.element;rV(e).each(function(t){oV(e,t,c)})}),nr(dx,function(t,e){var r=t.element;rV(r).each(function(e){var t=mc(Ni(e));Yi(e,"visibility","hidden");var n=Qi(e,"height").map(function(t){return parseInt(t,10)});tu(e,"height"),tu(e,"flex-basis");var o=e.dom.getBoundingClientRect().height;n.forall(function(t){return t<o})?(c.set(lt.from(o)),oV(r,e,c)):n.each(function(t){nV(e,t)}),tu(e,"visibility"),t.each(dc)})})],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},uV="send-data-to-section",aV="send-data-to-view",cV=Kr("update-dialog"),sV=Kr("update-title"),lV=Kr("update-body"),fV=Kr("update-footer"),dV=Kr("body-send-message"),mV=function(t,e,d,n){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:st(st({},e.map(function(t){return{id:t}}).getOr({})),n?{"aria-live":"polite"}:{})},components:[],behaviours:rc([ox(0),FE.config({channel:lV,updateState:function(t,e){return lt.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(r=t.body,i=d,u=fn({}),a=function(t){var e=Ll.getValue(t),n=WI(e).getOr({}),o=u.get(),r=Pt(o,n);u.set(r)},c=function(t){var e=u.get();Ll.setValue(t,e)},s=fn(null),l=R(r.tabs,function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:i.shared.providers.translate(t.title)},view:function(){return[cS.sketch(function(e){return{dom:{tag:"div",classes:["tox-form"]},components:R(t.items,function(t){return V_(e,t,i)}),formBehaviours:rc([ig.config({mode:"acyclic",useTabstopAt:x(jS)}),fg("TabView.form.events",[sr(c),lr(a)]),lc.config({channels:$t([{key:uV,value:{onReceive:a}},{key:aV,value:{onReceive:c}}])})])}})]}}}),f=iV(l).smartTabHeight,eV.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=Ll.getValue(e);qo(t,fx,{name:o,oldName:s.get()}),s.set(o)},tabs:l,components:[eV.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[KI.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:rc([tx.config({})])}),eV.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:f.selectFirst,tabSectionBehaviours:rc([fg("tabpanel",f.extraEvents),ig.config({mode:"acyclic"}),Zf.config({find:function(t){return K(eV.getViewItems(t))}}),Ll.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([uV],{}),u.get()},setValue:function(t,e){u.set(e),t.getSystem().broadcastOn([aV],{})}}})])}))];default:return[(n=t.body,o=d,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(e=mp(cS.sketch(function(e){return{dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:R(n.items,function(t){return V_(e,t,o)})}}))).asSpec()]}],behaviours:rc([ig.config({mode:"acyclic",useTabstopAt:x(jS)}),nx(e),ES(e,{postprocess:function(t){return WI(t).fold(function(t){return console.error(t),{}},function(t){return t})}})])})]}var n,o,e,r,i,u,a,c,s,l,f},initialData:t})])}},gV=Qv.deviceType.isTouch(),pV=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},hV=function(t,e){return rM.parts.close(dp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:rc([tx.config({})])}))},vV=function(){return rM.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},bV=function(t,e){return rM.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:jB("<p>"+e.translate(t)+"</p>")}]}]})},yV=function(t){return rM.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},xV=function(t,e){return[jy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),jy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},wV=function(e){var t,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return rM.sketch({lazySink:e.lazySink,onEscape:function(t){return e.onEscape(t),lt.some(!0)},useTabstopAt:function(t){return!jS(t)},dom:{tag:"div",classes:[n].concat(e.extraClasses),styles:st({position:"relative"},e.extraStyles)},components:S([e.header,e.body],e.footer.toArray()),parts:{blocker:{dom:jB('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:gV?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:rc(S([hg.config({}),fg("dialog-events",e.dialogEvents.concat([cr(lo(),function(t,e){ig.focusIn(t)})])),fg("scroll-lock",[sr(function(){Ti(Ui(),i)}),lr(function(){Di(Ui(),i)})])],e.extraBehaviours)),eventOrder:st(((t={})[_o()]=["dialog-events"],t[No()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[Ho()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),e.eventOrder)})},kV=function(t){return dp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:pp("close",t.icons)}}],action:function(t){Yo(t,ux)}})},SV=function(t,e,n){var o=function(t){return[lu(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:st({},e.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:rc([FE.config({channel:sV,renderComponents:o})])}},CV=function(){return{dom:jB('<div class="tox-dialog__draghandle"></div>')}},OV=function(t,e){return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=rM.parts.title(SV(n,lt.none(),o)),i=rM.parts.draghandle(CV()),u=rM.parts.close(kV(o)),a=[r].concat(n.draggable?[i]:[]).concat([u]),jy.sketch({dom:jB('<div class="tox-dialog__header"></div>'),components:a});var n,o,r,i,u,a},_V=function(t,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":t},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:jB('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},TV=function(t,e){return{onClose:function(){return e.closeWindow()},onBlock:function(n){rM.setBusy(t(),function(t,e){return _V(n.message,e)})},onUnblock:function(){rM.setIdle(t())}}},EV=function(t,e,n,o){var r;return mu(wV(st(st({},t),{lazySink:o.shared.getSink,extraBehaviours:S([FE.config({channel:cV,updateState:function(t,e){return lt.some(e)},initialData:e}),FS({})],t.extraBehaviours),onEscape:function(t){Yo(t,ux)},dialogEvents:n,eventOrder:((r={})[Oo()]=[FE.name(),lc.name()],r[No()]=["scroll-lock",FE.name(),"messages","dialog-events","alloy.base.behaviour"],r[Ho()]=["alloy.base.behaviour","dialog-events","messages",FE.name(),"scroll-lock"],r)})))},DV=function(t){return R(t,function(t){return"menu"===t.type?(n=R((e=t).items,function(t){var e=fn(!1);return st(st({},t),{storage:e})}),st(st({},e),{items:n})):t;var e,n})},BV=function(t){return z(t,function(t,e){return"menu"!==e.type?t:z(e.items,function(t,e){return t[e.name]=e.storage,t},t)},{})},FV=function(t,n){return[ur(lo(),LS),t(ix,function(t,e){n.onClose(),e.onClose()}),t(ux,function(t,e,n,o){e.onCancel(t),Yo(o,ix)}),nr(lx,function(t,e){return n.onUnblock()}),nr(sx,function(t,e){return n.onBlock(e.event)})]},AV=function(i,t){var e=function(t,r){return nr(t,function(n,o){u(n,function(t,e){r(i(),t,o.event,n)})})},u=function(e,n){FE.getState(e).get().each(function(t){n(t,e)})};return S(FV(e,t),[e(ax,function(t,e,n){e.onAction(t,{name:n.name})})])},MV=function(i,t,c){var e=function(t,r){return nr(t,function(n,o){u(n,function(t,e){r(i(),t,o.event,n)})})},u=function(e,n){FE.getState(e).get().each(function(t){n(t.internalDialog,e)})};return S(FV(e,t),[e(cx,function(t,e){return e.onSubmit(t)}),e(rx,function(t,e,n){e.onChange(t,{name:n.name})}),e(ax,function(t,e,n,o){var r=function(){return ig.focusIn(o)},i=function(t){return jr(t,"disabled")||Lr(t,"aria-disabled").exists(function(t){return"true"===t})},u=Ni(o.element),a=mc(u);e.onAction(t,{name:n.name,value:n.value}),mc(u).fold(r,function(e){i(e)||a.exists(function(t){return Yn(e,t)&&i(t)})?r():c().toOptional().filter(function(t){return!Yn(t.element,e)}).each(r)})}),e(fx,function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})}),lr(function(t){var e=i();Ll.setValue(t,e.getData())})])},IV=function(t,e){var n=e.map(function(t){return t.footerButtons}).getOr([]),o=N(n,function(t){return"start"===t.align}),r=function(t,e){return jy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:R(e,function(t){return t.memento.asSpec()})})};return[r("start",o.pass),r("end",o.fail)]},VV=function(t,i){return{dom:jB('<div class="tox-dialog__footer"></div>'),components:[],behaviours:rc([FE.config({channel:fV,initialData:t,updateState:function(t,e){var r=R(e.buttons,function(t){var e,n,o=mp((n=i,dO(e=t,e.type,n)));return{name:t.name,align:t.align,memento:o}});return lt.some({lookupByName:function(t,e){return n=t,o=e,L(r,function(t){return t.name===o}).bind(function(t){return t.memento.getOpt(n)});var n,o},footerButtons:r})},renderComponents:IV})])}},RV=VV,NV=function(t,e){return rM.parts.footer(VV(t,e))},HV=function(e,n){if(e.getRoot().getSystem().isConnected()){var o=Zf.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return cS.getField(o,n).fold(function(){var t=e.getFooter();return FE.getState(t).get().bind(function(t){return t.lookupByName(o,n)})},function(t){return lt.some(t)})}return lt.none()},PV=function(c,o,s){var t=function(t){var e=c.getRoot();e.getSystem().isConnected()&&t(e)},l={getData:function(){var t=c.getRoot(),e=t.getSystem().isConnected()?c.getFormWrapper():t,n=Ll.getValue(e),o=Tt(s,function(t){return t.get()});return st(st({},n),o)},setData:function(a){t(function(t){var e,n,o=l.getData(),r=st(st({},o),a),i=(e=r,n=c.getRoot(),FE.getState(n).get().map(function(t){return _e(Oe("data",t.dataValidator,e))}).getOr(e)),u=c.getFormWrapper();Ll.setValue(u,i),_t(s,function(t,e){It(r,e)&&t.set(r[e])})})},disable:function(t){HV(c,t).each(mv.disable)},enable:function(t){HV(c,t).each(mv.enable)},focus:function(t){HV(c,t).each(hg.focus)},block:function(e){if(!C(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){qo(t,sx,{message:e})})},unblock:function(){t(function(t){Yo(t,lx)})},showTab:function(n){t(function(t){var e=c.getBody();FE.getState(e).get().exists(function(t){return t.isTabPanel()})&&Zf.getCurrent(e).each(function(t){eV.showTab(t,n)})})},redial:function(n){t(function(t){var e=o(n);t.getSystem().broadcastOn([cV],e),t.getSystem().broadcastOn([sV],e.internalDialog),t.getSystem().broadcastOn([lV],e.internalDialog),t.getSystem().broadcastOn([fV],e.internalDialog),l.setData(e.initialData)})},close:function(){t(function(t){Yo(t,ix)})}};return l},zV=function(t,e,n){var o,r,i,u=OV(t.internalDialog.title,n),a=(o={body:t.internalDialog.body},r=n,i=mV(o,lt.none(),r,!1),rM.parts.body(i)),c=DV(t.internalDialog.buttons),s=BV(c),l=NV({buttons:c},n),f=MV(function(){return p},TV(function(){return g},e),n.shared.getSink),d=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),m={header:u,body:a,footer:lt.some(l),extraClasses:d,extraBehaviours:[],extraStyles:{}},g=EV(m,t,f,n),p=PV({getRoot:function(){return g},getBody:function(){return rM.getBody(g)},getFooter:function(){return rM.getFooter(g)},getFormWrapper:function(){var t=rM.getBody(g);return Zf.getCurrent(t).getOr(t)}},e.redial,s);return{dialog:g,instanceApi:p}},LV=function(t,e,n,o){var r,i,u,a,c,s,l,f,d,m=Kr("dialog-label"),g=Kr("dialog-content"),p=mp((u={title:t.internalDialog.title,draggable:!0},a=m,c=n.shared.providers,jy.sketch({dom:jB('<div class="tox-dialog__header"></div>'),components:[SV(u,lt.some(a),c),CV(),kV(c)],containerBehaviours:rc([zA.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Ku(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=mp((s={body:t.internalDialog.body},l=g,f=n,d=o,mV(s,lt.some(l),f,d))),v=DV(t.internalDialog.buttons),b=BV(v),y=mp(RV({buttons:v},n)),x=MV(function(){return k},{onBlock:function(n){oM.block(w,function(t,e){return _V(n.message,e)})},onUnblock:function(){oM.unblock(w)},onClose:function(){return e.closeWindow()}},n.shared.getSink),w=mu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((r={role:"dialog"})["aria-labelledby"]=m,r["aria-describedby"]=""+g,r)},eventOrder:((i={})[Oo()]=[FE.name(),lc.name()],i[_o()]=["execute-on-form"],i[No()]=["reflecting","execute-on-form"],i),behaviours:rc([ig.config({mode:"cyclic",onEscape:function(t){return Yo(t,ix),lt.some(!0)},useTabstopAt:function(t){return!jS(t)&&("button"!==mr(t)||"disabled"!==zr(t,"disabled"))}}),FE.config({channel:cV,updateState:function(t,e){return lt.some(e)},initialData:t}),hg.config({}),fg("execute-on-form",x.concat([cr(lo(),function(t,e){ig.focusIn(t)})])),oM.config({getRoot:function(){return lt.some(w)}}),lg.config({}),FS({})]),components:[p.asSpec(),h.asSpec(),y.asSpec()]}),k=PV({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return h.get(w)},getFormWrapper:function(){var t=h.get(w);return Zf.getCurrent(t).getOr(t)}},e.redial,b);return{dialog:w,instanceApi:k}},jV=tinymce.util.Tools.resolve("tinymce.util.URI"),UV=["insertContent","setContent","execCommand","close","block","unblock"],WV=function(t){return O(t)&&-1!==UV.indexOf(t.mceAction)},GV=function(o,t,r,e){var n,i,u,a,c=OV(o.title,e),s=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[PS({dom:{tag:"iframe",attributes:{src:o.url}},behaviours:rc([tx.config({}),hg.config({})])})]}],behaviours:rc([ig.config({mode:"acyclic",useTabstopAt:x(jS)})])},rM.parts.body(i)),l=o.buttons.bind(function(t){return 0===t.length?lt.none():lt.some(NV({buttons:t},e))}),f=AV(function(){return y},TV(function(){return b},t)),d=st(st({},o.height.fold(function(){return{}},function(t){return{height:t+"px","max-height":t+"px"}})),o.width.fold(function(){return{}},function(t){return{width:t+"px","max-width":t+"px"}})),m=o.width.isNone()&&o.height.isNone()?["tox-dialog--width-lg"]:[],g=new jV(o.url,{base_uri:new jV(window.location.href)}),p=g.protocol+"://"+g.host+(g.port?":"+g.port:""),h=fn(lt.none()),v=[fg("messages",[sr(function(){var t=Cy(mn.fromDom(window),"message",function(t){var e,n;g.isSameOrigin(new jV(t.raw.origin))&&(e=t.raw.data,WV(e)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!_(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(r,y,e):!WV(n=e)&&O(n)&&It(n,"mceAction")&&o.onMessage(y,e))});h.set(lt.some(t))}),lr(function(){h.get().each(function(t){return t.unbind()})})]),lc.config({channels:((n={})[dV]={onReceive:function(t,e){qu(t.element,"iframe").each(function(t){t.dom.contentWindow.postMessage(e,p)})}},n)})],b=EV({header:c,body:s,footer:l,extraClasses:m,extraBehaviours:v,extraStyles:d},o,f,e),y=(a=function(t){u.getSystem().isConnected()&&t(u)},{block:function(e){if(!C(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");a(function(t){qo(t,sx,{message:e})})},unblock:function(){a(function(t){Yo(t,lx)})},close:function(){a(function(t){Yo(t,ix)})},sendMessage:function(e){a(function(t){t.getSystem().broadcastOn([dV],e)})}});return{dialog:u=b,instanceApi:y}},XV=function(t){var c,s,l,f,p=t.backstage,h=t.editor,v=Vv(h),n=(s=(c=t).backstage.shared,{open:function(t,e){var n=function(){rM.hide(u),e()},o=mp(dO({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:lt.none()},"cancel",c.backstage)),r=vV(),i=hV(n,s.providers),u=mu(wV({lazySink:function(){return s.getSink()},header:pV(r,i),body:bV(t,s.providers),footer:lt.some(yV(xV([],[o.asSpec()]))),onEscape:n,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[nr(ux,n)],eventOrder:{}}));rM.show(u);var a=o.get(u);hg.focus(a)}}),o=(f=(l=t).backstage.shared,{open:function(t,e){var n=function(t){rM.hide(a),e(t)},o=mp(dO({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:lt.none()},"submit",l.backstage)),r=dO({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:lt.none()},"cancel",l.backstage),i=vV(),u=hV(function(){return n(!1)},f.providers),a=mu(wV({lazySink:function(){return f.getSink()},header:pV(i,u),body:bV(t,f.providers),footer:lt.some(yV(xV([],[r,o.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[nr(ux,function(){return n(!1)}),nr(cx,function(){return n(!0)})],eventOrder:{}}));rM.show(a);var c=o.get(a);hg.focus(c)}}),r=function(t,n){return UI.openUrl(function(t){var e=GV(t,{closeWindow:function(){rM.hide(e.dialog),n(e.instanceApi)}},h,p);return rM.show(e.dialog),e.instanceApi},t)},i=function(t,i){return UI.open(function(t,e,n){var o=e,r=zV({dataValidator:n,initialData:o,internalDialog:t},{redial:UI.redial,closeWindow:function(){rM.hide(r.dialog),i(r.instanceApi)}},p);return rM.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},t)},u=function(t,d,m,g){return UI.open(function(t,e,n){var o,r,i,u=_e(Oe("data",n,e)),a=(o=fn(lt.none()),{clear:function(){return o.set(lt.none())},set:function(t){return o.set(lt.some(t))},isSet:function(){return o.get().isSome()},on:function(t){return o.get().each(t)}}),c=p.shared.header.isPositionedAtTop(),s=function(){return a.on(function(t){Zg.reposition(t),yB.refresh(t)})},l=LV({dataValidator:n,initialData:u,internalDialog:t},{redial:UI.redial,closeWindow:function(){a.on(Zg.hide),h.off("ResizeEditor",s),a.clear(),m(l.instanceApi)}},p,g),f=mu(Zg.sketch(st(st({lazySink:p.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},c?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:rc(S([fg("window-manager-inline-events",[nr(Po(),function(t,e){Yo(l.dialog,ux)})])],(r=h,i=c,v&&i?[]:[yB.config({contextual:{lazyContext:function(){return lt.some(Hu(mn.fromDom(r.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]))),isExtraPart:function(t,e){return Ty(n=e,".tox-alert-dialog")||Ty(n,".tox-confirm-dialog");var n}})));return a.set(f),Zg.showWithin(f,d,gu(l.dialog),lt.some(Ui())),v&&c||(yB.refresh(f),h.on("ResizeEditor",s)),l.instanceApi.setData(u),ig.focusIn(l.dialog),l.instanceApi},t)};return{open:function(t,e,n){return e!==undefined&&"toolbar"===e.inline?u(t,p.shared.anchors.inlineDialog(),n,e.ariaAttrs):e!==undefined&&"cursor"===e.inline?u(t,p.shared.anchors.cursor(),n,e.ariaAttrs):i(t,n)},openUrl:function(t,e){return r(t,e)},alert:function(t,e){n.open(t,function(){e()})},close:function(t){t.close()},confirm:function(t,e){o.open(t,function(t){e(t)})}}};t.add("silver",function(t){var e=$A(t),n=e.uiMothership,o=e.backstage,r=e.renderUI,i=e.getUi;ky(t,o.shared);var u=XV({editor:t,backstage:o});return{renderUI:r,getWindowManagerImpl:at(u),getNotificationManagerImpl:function(){return bp(0,{backstage:o},n)},ui:i()}})}();